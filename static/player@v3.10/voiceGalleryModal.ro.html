<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="https://ttsreader.com/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>TTSReader Voice Gallery</title>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow-y: auto;
        }
        /* Loading spinner styling */
        #loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            z-index: 1000;
        }
        .loader-hidden {
        display: none !important;
        }  
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        /* Iframe baseline (if needed by parent) */
        iframe {
            display: none;
            border: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>

    <link rel="stylesheet" href="./voiceGalleryModal/voiceGalleryModal.css" />

    <script>
        /**
         * Parses URL query parameters (e.g., voice, rate, onClose callback)
         */
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                onClose: params.get('onClose'),
                url: params.get('url'),
                voice: params.get('voice'),
                rate: parseFloat(params.get('rate')),
                date: parseInt(params.get('date')),
                lang: params.get('lang'),
            };
        }
window.hideLoader = function() {
    const loader = document.getElementById('loader');
    if (loader) {
        loader.classList.add('loader-hidden');
    }
};
        /**
         * Initializes interaction with the parent player application
         */
        async function main() {
            const { onClose } = getQueryParams();
            if (onClose) {
                // Defines the global onClose function to trigger parent callback
                window.onClose = () => {
                    if (window.parent && window.parent[onClose]) {
                        window.parent[onClose]();
                    }
                };
            }
        }
        main();
    </script>
</head>

<body>
    <div id="loader"></div>

    <div onclick="onClose()" style="background-color: whitesmoke; cursor: pointer; position: fixed; padding: 10px; top: 10px; right: 10px; border-radius: 50%; border: 2px solid gray; color: darkslategrey; z-index: 2000;">
        <svg style="vertical-align: middle;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" />
        </svg>
    </div>

    <main class="app">
        <div class="controls">
            <div class="controls-left">
                <div class="control control-language">
                    <label class="control-label" for="languageSelect">Language</label>
                    <select id="languageSelect" class="control-select">
                        <option value="">All languages</option>
                    </select>
                </div>

                <div class="searchbox">
                    <span class="searchbox-icon">ðŸ”Ž</span>
                    <input id="searchInput" class="searchbox-input" type="text" placeholder="Search" />
                </div>

                <div class="control">
                    <span class="control-label">Gender</span>
                    <div class="gender-filter" role="group" aria-label="Gender filter">
                        <button type="button" class="gender-btn is-active" data-gender="">
                            <span class="gender-tx">All</span>
                        </button>
                        <button type="button" class="gender-btn" data-gender="Male">
                            <svg class="gender-img" viewBox="0 0 514 514"><g fill="currentColor">                <path d="M 493.81 503.85 C 489.92 502.44 489.20 498.94 488.71 479.00 C 488.20 458.58 486.61 450.25 480.97 438.44 C 477.92 432.04 475.61 428.93 469.81 423.43 C 458.44 412.65 446.39 407.12 419.67 400.44 C 411.88 398.50 398.61 394.59 390.20 391.78 L 374.90 386.65 L 367.70 393.66 C 338.84 421.76 306.45 436.87 268.45 439.96 C 241.06 442.19 214.41 436.86 188.50 423.97 C 173.95 416.73 160.89 407.53 148.34 395.64 L 138.93 386.74 L 125.22 391.36 C 117.67 393.90 103.69 398.03 94.14 400.52 C 65.45 408.02 54.29 413.25 42.92 424.49 C 35.82 431.51 29.85 442.71 27.45 453.50 C 26.56 457.49 25.65 468.11 25.32 478.18 L 24.73 495.85 L 17.32 496.55 C 13.25 496.93 9.64 496.98 9.32 496.65 C 8.34 495.67 10.92 459.00 12.47 451.89 C 16.69 432.51 25.33 418.27 39.34 407.64 C 52.13 397.93 64.43 392.77 91.14 385.93 C 141.43 373.06 173.73 355.67 182.54 336.74 C 184.84 331.81 184.98 330.45 184.99 313.76 L 185.00 296.01 L 179.95 289.76 C 170.28 277.77 163.02 263.29 157.87 245.73 C 155.66 238.21 155.42 237.87 150.54 235.11 C 144.74 231.84 138.04 224.95 135.16 219.32 C 129.21 207.64 127.73 188.27 131.89 176.21 C 133.95 170.21 133.98 169.66 132.48 164.71 C 128.45 151.34 128.15 108.51 131.98 93.50 C 137.07 73.56 150.30 55.07 166.16 45.75 C 168.54 44.34 174.55 39.19 179.50 34.31 C 186.97 26.93 190.12 24.63 198.00 20.75 C 214.40 12.70 229.94 9.75 256.00 9.73 C 277.26 9.72 296.56 13.02 310.69 19.08 C 319.96 23.05 334.47 25.27 353.19 25.57 C 363.23 25.74 371.74 26.32 372.87 26.93 C 375.60 28.39 376.30 31.15 376.30 40.53 C 376.30 48.84 375.25 53.48 371.72 60.73 L 369.67 64.96 L 373.34 72.80 C 377.84 82.38 381.44 96.19 383.06 110.07 C 384.67 123.80 383.69 147.82 380.98 161.10 L 378.92 171.18 L 381.11 176.84 C 383.76 183.73 384.28 200.33 382.10 209.00 C 379.15 220.81 371.91 230.77 362.41 236.14 C 357.40 238.96 357.27 239.16 355.12 247.02 C 350.79 262.80 342.55 279.34 333.42 290.54 L 329.00 295.97 L 329.00 313.52 C 329.00 332.65 329.40 334.55 335.07 342.45 C 346.65 358.58 382.91 376.00 428.71 387.46 C 456.90 394.51 476.34 405.37 487.60 420.34 C 499.35 435.98 503.71 452.45 504.22 483.21 C 504.48 498.81 504.37 500.05 502.50 501.85 C 499.86 504.41 497.10 505.04 493.81 503.85ZM 284.75 422.54 C 310.17 416.84 334.29 404.20 351.69 387.46 C 358.05 381.34 359.22 379.75 358.00 378.95 C 357.18 378.40 352.49 375.60 347.60 372.73 C 337.70 366.91 325.76 356.37 321.09 349.33 C 315.83 341.39 313.90 334.65 313.17 321.73 L 312.50 309.97 L 302.00 316.51 C 296.23 320.11 288.57 323.96 285.00 325.08 C 269.94 329.76 242.98 329.61 228.18 324.75 C 224.43 323.52 217.44 319.83 212.14 316.28 C 206.97 312.83 202.35 310.00 201.87 310.00 C 201.39 310.00 201.00 313.49 200.99 317.75 C 200.98 335.24 197.19 345.52 186.61 356.73 C 179.71 364.05 169.24 371.85 160.25 376.39 C 157.36 377.84 155.00 379.42 155.00 379.90 C 155.00 381.39 168.63 393.69 176.22 399.03 C 194.42 411.85 213.32 419.74 235.00 423.58 C 245.12 425.38 274.89 424.76 284.75 422.54ZM 273.11 313.00 C 283.37 311.09 303.92 298.83 314.73 288.18 C 318.82 284.15 324.38 277.40 327.09 273.18 C 332.88 264.17 339.10 248.79 341.52 237.50 C 343.46 228.50 345.67 225.34 350.66 224.40 C 362.34 222.21 370.46 205.29 368.03 188.25 C 366.82 179.77 365.42 177.43 360.42 175.52 C 354.17 173.14 347.70 165.45 339.12 150.21 C 330.31 134.57 324.02 127.14 316.48 123.45 C 308.73 119.66 301.53 119.35 282.29 121.99 C 269.44 123.76 262.92 124.13 250.79 123.78 C 232.67 123.27 224.28 121.44 212.22 115.39 L 203.91 111.22 L 198.55 121.90 C 185.37 148.18 168.71 167.13 151.27 175.66 C 147.73 177.39 145.48 179.22 144.83 180.91 C 144.28 182.33 144.00 188.45 144.22 194.50 C 144.52 203.24 145.08 206.58 146.92 210.74 C 149.82 217.31 155.21 222.24 161.88 224.46 C 167.66 226.38 168.96 228.16 171.00 237.00 C 175.53 256.54 189.07 282.80 196.34 286.11 C 197.54 286.66 199.28 288.43 200.21 290.05 C 201.19 291.75 206.26 295.82 212.18 299.66 C 225.73 308.46 231.09 311.16 237.87 312.62 C 244.84 314.12 265.87 314.35 273.11 313.00ZM 366.96 153.35 C 368.62 143.08 368.68 114.38 367.07 105.00 C 365.22 94.24 360.60 80.38 356.70 73.90 C 351.45 65.19 351.46 65.35 355.87 56.51 C 358.07 52.10 360.08 46.85 360.35 44.84 L 360.84 41.19 L 349.17 40.52 C 330.08 39.42 317.55 37.21 303.49 32.47 C 286.55 26.76 275.33 25.00 256.00 25.02 C 233.02 25.05 219.47 27.40 206.00 33.72 C 199.86 36.60 196.81 38.96 189.21 46.74 C 183.30 52.77 178.02 57.18 174.71 58.83 C 166.72 62.81 156.87 73.42 152.06 83.25 C 145.62 96.41 144.99 100.24 145.04 126.46 C 145.08 147.46 145.77 157.10 147.33 158.66 C 148.26 159.60 157.02 152.70 163.64 145.79 C 173.33 135.71 186.43 113.88 192.51 97.70 C 194.42 92.60 198.02 89.00 201.20 89.00 C 202.27 89.00 205.66 91.06 208.76 93.58 C 225.13 106.92 245.08 110.50 278.60 106.11 C 303.51 102.85 311.74 103.41 323.63 109.18 C 334.92 114.66 343.11 124.30 354.50 145.50 C 359.50 154.80 363.69 161.00 364.98 161.00 C 365.39 161.00 366.28 157.56 366.96 153.35Z"/></g></g></svg>
                            <span class="gender-tx">Male</span>
                        </button>
                        <button type="button" class="gender-btn" data-gender="Female">
                            <svg class="gender-img" viewBox="0 0 514 514"><g fill="currentColor">                <path d="M 34.23 472.75 C 34.59 434.70 34.73 432.14 36.78 426.00 C 39.96 416.45 45.64 407.58 53.02 400.64 C 60.57 393.53 68.17 389.57 83.00 385.00 C 88.78 383.22 98.67 379.51 105.00 376.77 C 111.33 374.02 122.76 369.14 130.42 365.92 C 138.07 362.70 144.73 359.67 145.22 359.18 C 145.73 358.67 141.33 357.35 134.80 356.06 C 97.07 348.58 70.23 337.75 54.78 323.77 L 50.05 319.50 L 56.89 313.82 C 64.81 307.26 70.41 299.38 75.01 288.32 C 82.57 270.19 85.17 255.99 91.45 198.78 C 96.44 153.36 98.57 139.02 103.16 120.11 C 120.33 49.34 158.70 12.81 225.73 3.43 C 241.53 1.22 272.47 1.22 288.27 3.43 C 355.20 12.79 393.78 49.49 410.83 120.00 C 415.41 138.93 417.60 153.66 422.52 198.50 C 427.40 243.06 427.23 241.73 430.16 257.00 C 435.79 286.32 443.47 302.52 457.11 313.82 L 463.95 319.50 L 459.22 323.77 C 443.59 337.92 417.36 348.50 379.20 356.06 C 372.67 357.35 368.27 358.67 368.78 359.18 C 369.27 359.67 375.93 362.70 383.58 365.92 C 391.24 369.14 402.68 374.02 409.00 376.77 C 415.32 379.51 425.23 383.22 431.00 385.00 C 445.83 389.57 453.43 393.53 460.98 400.64 C 468.36 407.58 474.04 416.45 477.22 426.00 C 479.27 432.14 479.41 434.70 479.77 472.75 L 480.16 513.00 L 257.00 513.00 L 33.84 513.00 L 34.23 472.75ZM 458.81 462.75 C 458.50 433.63 458.49 433.47 455.90 427.95 C 450.19 415.78 443.33 410.71 424.08 404.46 C 416.31 401.93 403.32 396.92 395.23 393.32 C 387.13 389.73 377.12 385.45 373.00 383.82 C 363.20 379.94 346.06 371.34 338.50 366.50 C 330.81 361.58 318.92 349.66 316.56 344.50 C 315.56 342.30 314.61 340.36 314.47 340.19 C 314.32 340.01 311.12 342.00 307.35 344.59 C 303.58 347.19 295.96 351.49 290.41 354.16 C 265.93 365.91 248.07 365.91 223.59 354.16 C 218.04 351.49 210.42 347.19 206.65 344.59 C 202.88 342.00 199.68 340.01 199.53 340.19 C 199.39 340.36 198.44 342.30 197.44 344.50 C 195.08 349.66 183.19 361.58 175.50 366.50 C 167.94 371.34 150.80 379.94 141.00 383.82 C 136.88 385.45 126.87 389.73 118.77 393.32 C 110.68 396.92 97.69 401.93 89.92 404.46 C 70.67 410.71 63.81 415.78 58.10 427.95 C 55.51 433.47 55.50 433.63 55.19 462.75 L 54.89 492.00 L 257.00 492.00 L 459.11 492.00 L 458.81 462.75ZM 271.40 339.82 C 303.17 329.37 340.30 292.59 358.56 253.50 C 368.75 231.66 373.17 212.79 373.19 191.00 C 373.19 177.44 370.91 157.66 369.11 155.76 C 368.73 155.35 363.55 153.44 357.61 151.51 C 335.78 144.44 314.98 134.14 293.52 119.79 L 280.50 111.08 L 276.50 114.86 C 270.11 120.91 254.35 133.97 243.41 142.30 C 215.04 163.88 179.30 182.01 150.04 189.68 L 140.45 192.20 L 140.80 199.35 C 143.48 252.86 188.65 317.60 237.51 337.94 C 250.22 343.23 259.48 343.74 271.40 339.82ZM 176.93 338.37 C 178.59 336.26 179.00 334.30 179.00 328.57 C 179.00 321.48 178.96 321.36 174.88 317.45 C 163.15 306.21 147.16 283.26 138.10 264.66 C 127.94 243.82 122.94 227.14 120.64 206.34 C 119.98 200.38 119.11 195.61 118.72 195.75 C 118.32 195.89 116.74 196.00 115.19 196.00 L 112.39 196.00 L 110.11 217.75 C 104.98 266.82 97.51 295.32 85.00 313.50 L 81.91 317.99 L 87.71 320.59 C 104.36 328.09 125.87 333.95 153.50 338.51 C 172.47 341.64 174.36 341.63 176.93 338.37ZM 357.50 338.98 C 384.94 334.76 409.26 328.27 426.29 320.59 L 432.09 317.99 L 429.18 313.74 C 424.77 307.32 419.58 296.42 416.68 287.50 C 410.23 267.63 407.46 251.54 402.53 205.50 C 397.37 157.20 397.97 160.77 394.81 159.92 C 393.34 159.53 391.96 159.38 391.75 159.59 C 391.54 159.80 391.99 164.36 392.76 169.73 C 394.73 183.53 393.90 208.25 391.01 221.94 C 385.05 250.13 370.80 279.17 350.52 304.44 C 346.52 309.42 341.39 315.28 339.12 317.45 C 335.04 321.36 335.00 321.48 335.00 328.57 C 335.00 334.30 335.41 336.26 337.07 338.37 C 339.58 341.56 340.54 341.59 357.50 338.98ZM 124.00 173.99 C 181.31 165.17 239.93 128.14 295.02 65.93 C 307.09 52.30 321.25 33.84 320.30 32.95 C 319.86 32.53 315.90 31.07 311.50 29.70 C 289.77 22.94 261.48 20.45 235.86 23.05 C 201.05 26.59 176.83 36.90 157.48 56.41 C 136.43 77.64 123.74 109.58 116.94 158.40 C 115.87 166.09 115.00 172.97 115.00 173.69 C 115.00 175.26 115.61 175.28 124.00 173.99ZM 393.57 136.75 C 384.24 92.36 367.71 61.85 344.16 45.60 C 341.85 44.01 339.83 42.88 339.66 43.10 C 339.49 43.32 336.68 47.09 333.42 51.48 C 325.73 61.84 313.52 76.54 303.59 87.42 C 298.96 92.49 296.06 96.44 296.59 96.95 C 297.09 97.42 302.45 101.04 308.50 104.99 C 330.69 119.47 361.39 132.60 383.37 137.00 C 388.39 138.01 392.85 138.87 393.27 138.92 C 393.69 138.96 393.83 137.99 393.57 136.75Z"/></g></g></svg>
                            <span class="gender-tx">Female</span>
                        </button>
                    </div>
                </div>

                <div class="control">
                    <label class="control-label" for="sortSelect">Sort by</label>
                    <select id="sortSelect" class="control-select">
                        <option value="az">A to Z</option>
                        <option value="za">Z to A</option>
                    </select>
                </div>

                <label class="checkbox">
                    <input id="pinnedOnly" type="checkbox" />
                    <span>Show only pinned</span>
                </label>
                <span>|</span>
                <span id="resultsMeta" class="results-meta">0 voices</span>
            </div>
        </div>

        <div id="voicesGrid" class="voices-grid"></div>

        <div class="save-bar">
            <button id="saveBtn" disabled>
                Save selection & return to player
            </button>
        </div>
    </main>

    <script src="./voiceGalleryModal/voiceGalleryModal.js"></script>
</body>
</html>