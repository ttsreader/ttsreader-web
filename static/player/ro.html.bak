<!DOCTYPE html>
<html lang="ro" data-dark-mode data-no-ads data-is-signed-out>
<head>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "TTSReader Text to Speech Player V3",
      "description": "Listen to any text with the highest-quality expressive AI voices. TTSReader's Player is a free online text to speech reader that supports multiple languages and voices. It allows you to listen to your text, save it as an audio file, and even share it with others.",
      "applicationCategory": "WebApplication",
      "operatingSystem": "All",
      "browserRequirements": "Requires JavaScript",
      "url": "https://ttsreader.com/player/",
      "datePublished": "2023-05-01T00:00:00+00:00",
      "dateModified": "2025-07-10T20:33:56.613Z",
      "version": "3.6.8",
      "publisher": {
        "@type": "Organization",
        "name": "TTSReader - Text To Speech by WellSource Ltd.",
        "url": "https://ttsreader.com"
      }
    }
  </script>
  <!-- Include Quill stylesheet -->
  <link href="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.snow.css" rel="stylesheet" />
  <!-- Include the Quill library -->
  <script src="https://cdn.jsdelivr.net/npm/quill@2/dist/quill.js"></script>

  <meta charset="utf-8" />
  <link rel="icon" href="favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#a51b14" />
  <meta
          name="description"
          content="TTSReader's Player - Free Online Text to Speech Reader"
  />
  <link rel="apple-touch-icon" href="/favicon2.svg" />
  <!--
    manifest.json provides metadata used when your web app is installed on a
    user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
  -->
  <link rel="manifest" href="manifest.json" />
  <!--
    Notice the use of  in the tags above.
    It will be replaced with the URL of the `public` folder during the build.
    Only files inside the `public` folder can be referenced from the HTML.

    Unlike "/favicon.ico" or "favicon.ico", "/favicon.ico" will
    work correctly both with client-side routing and a non-root public URL.
    Learn how to configure a non-root public URL by running `npm run build`.
  -->
  <title>TTSReader V3.6.8 - Playerul Text-to-Speech al TTSReader</title><!-- TTSReader's Text to Speech Player -->

  <!-- Google Analytics: -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-47292499-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-47292499-3');
  </script>
  <!-- End of Google Analytics: -->

  <script>
    // Dark mode toggle:
    let storedTheme = localStorage.getItem('theme-player-only');
    let DEFAULT_THEME = 'light-bg';

    if (!storedTheme) {
      let storedBlogTheme = localStorage.getItem('theme');

      if (!storedBlogTheme) {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          storedTheme = 'dark-no-bg';
        } else {
          storedTheme = DEFAULT_THEME;
        }
      } else {
        if (storedBlogTheme === 'dark') {
          storedTheme = 'dark-no-bg';
        } else {
          storedTheme = 'light-no-bg';
        }
      }
    }

    if (storedTheme === 'dark-no-bg') {
      window.setUiToDarkModeAndBgTheme(true, false);
    } else if (storedTheme === 'dark-bg') {
      window.setUiToDarkModeAndBgTheme(true, true);
    } else if (storedTheme === 'light-no-bg') {
      window.setUiToDarkModeAndBgTheme(false, false);
    } else if (storedTheme === 'light-bg') {
      window.setUiToDarkModeAndBgTheme(false, true);
    } else {
      window.setUiToDarkModeAndBgTheme(true, false);
    }

    // Drawer open
    let storedDrawerMode = localStorage.getItem('drawer-mode');
    if (!storedDrawerMode) {
      storedDrawerMode = 'close'; // Default to close if not set
    }

    if ((storedDrawerMode === 'open' || !storedDrawerMode) && window.matchMedia && window.matchMedia('(min-width: 800px)').matches && window.matchMedia('(min-height: 600px)').matches ) {
      toggleDrawerOpen();
    }

    function setUiToDarkModeAndBgTheme(isDark, isBg) {
      if (isBg===null || isBg===undefined) {
        isBg = document.documentElement.hasAttribute('data-theme-bg');
      }
      if (isDark && isBg) {
        document.documentElement.setAttribute('data-dark-mode','true');
        document.documentElement.setAttribute('data-theme-bg','true');
        localStorage.setItem('theme-player-only','dark-bg');
      } else if (isDark && !isBg) {
        document.documentElement.setAttribute('data-dark-mode','true');
        document.documentElement.removeAttribute('data-theme-bg');
        localStorage.setItem('theme-player-only','dark-no-bg');
      } else if (!isDark && isBg) {
        document.documentElement.removeAttribute('data-dark-mode');
        document.documentElement.setAttribute('data-theme-bg','true');
        localStorage.setItem('theme-player-only','light-bg');
      } else {
        document.documentElement.removeAttribute('data-dark-mode');
        document.documentElement.removeAttribute('data-theme-bg');
        localStorage.setItem('theme-player-only','light-no-bg');
      }
    }

    function toggleDrawerOpen() {
      let isOpen = document.documentElement.getAttribute('data-drawer-open')==='true';
      if (isOpen) {
        document.documentElement.removeAttribute('data-drawer-open');
        localStorage.setItem('drawer-mode','closed');
      } else {
        document.documentElement.setAttribute('data-drawer-open','true');
        localStorage.setItem('drawer-mode','open');
      }
    }

    function toggleTheme() {
      if (!window.setUiToDarkModeAndBgTheme) {
        console.log('no window.setUiToDarkModeAndBgTheme');
        return;
      }

      // dark -> dark+bg -> light -> light+bg -> dark
      let isDark = document.documentElement.getAttribute('data-dark-mode')==='true';
      let isBgImage = document.documentElement.getAttribute('data-theme-bg')==='true';

      if (isDark && isBgImage) {
        setUiToDarkModeAndBgTheme(false, false);
      } else if (isDark && !isBgImage) {
        setUiToDarkModeAndBgTheme(true, true);
      } else if (!isDark && !isBgImage) {
        setUiToDarkModeAndBgTheme(false, true);
      } else {
        setUiToDarkModeAndBgTheme(true, false);
      }
    }
  </script>

  <style>

    [data-is-signed-out] [data-ws-show-if-state="isSignedIn=true"] {
      display: none;
    }

    .highlight {
      background-color: #ff0;
      color: black;
    }
    .modal-step {
      background: url('./images/anima2_transparent_white.webp') no-repeat center;
      background-size: cover;
    }
    [data-dark-mode] .modal-step {
      background: url('./images/anima2_transparent_black.webp') no-repeat center;
      background-size: cover;
    }
    .modal-step-overlay {
      background: url('./images/anima2_transparent_white.webp') no-repeat center;
      background-size: cover;
    }
    [data-dark-mode] .modal-step-overlay {
      background: url('./images/anima2_transparent_black.webp') no-repeat center;
      background-size: cover;
    }
    body {
      transition: background 0.3s, color 0.3s;
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
      font-size: 16px;
      margin: auto;
    }

    .theme-toggle .label {
      cursor: pointer;
    }

    .theme-toggle .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 28px;
    }

    .theme-toggle .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .theme-toggle .slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background-color: #bbb;
      transition: 0.3s;
      border-radius: 30px;
    }

    .theme-toggle .slider::before {
      content: "";
      position: absolute;
      width: 22px;
      height: 22px;
      left: 3px;
      top: 3px;
      background-color: #fff;
      border-radius: 50%;
      transition: 0.3s;
    }

    .theme-toggle input:checked + .slider {
      background-color: #3b82f6;
    }

    .theme-toggle input:checked + .slider::before {
      transform: translateX(32px);
    }

    /* Quill styles */
    .ql-toolbar.ql-snow {
      border: none !important;
      position: relative !important;
    }
    .Sliding-In-Modal.hidden {
      visibility: hidden;
      opacity: 0;
      pointer-events: none;
    }
  </style>
<script defer src="/static/js/main.1ebfdae1.js"></script><link href="/static/css/main.5d5d3cbf.css" rel="stylesheet"></head>
<body>

<div id="root" style="display: flex;flex-direction: column; flex: 1;">

  <div data-ws-show-if-state="isPremium=false">
    <div class="Go-premium-banner" data-ws-show-if-state="isSignedIn=false" style="text-align: center;text-transform: uppercase;
      color: white;
      font-weight: bold;
      font-size: smaller;
      background-color: darkgreen;"><a style="cursor: pointer; text-decoration: none;color: white;display: block; padding: 10px;" data-ws-toggle="#upgradeModal">
      Faceți clic aici pentru a face upgrade. 100% satisfacție garantată<!-- Click here to upgrade. 100% satisfaction guaranteed -->
    </a></div>
    <div class="Go-premium-banner" data-ws-show-if-state="isSignedIn=true" style="text-align: center;text-transform: uppercase;
      color: white;
      font-weight: bold;
      font-size: smaller;
      background-color: darkgreen;"><a style="cursor: pointer; text-decoration: none;color: white;display: block; padding: 10px;" onclick="openNewUpgradeModal()">
      Faceți clic aici pentru a face upgrade. 100% satisfacție garantată<!-- Click here to upgrade. 100% satisfaction guaranteed -->
    </a></div>
  </div>

  <div style="flex: 1; display: flex;max-height: 100%;overflow: hidden;">
    <drawer style="overflow: hidden;max-height: 100%;">
      <div style="position: absolute;top:10px;right:10px;padding: 10px;cursor: pointer;" onclick="toggleDrawerOpen();">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>
      </div>
      <div style="padding: 10px;margin-top: 50px;overflow-x: hidden;overflow-y: auto;padding-bottom: 100px;">
        <div>
          <a title="Text To Speech Solutions"  aria-label="Text To Speech Solutions" class="Menu-list-element" href="https://ttsreader.com" target="_blank" style="text-decoration:none;display: flex;align-items: center">
            <svg  class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l-2 0l9 -9l9 9l-2 0" /><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" /></svg>&nbsp;&nbsp;<strong style="display: block"><span style="color: darkred">TTS</span>Reader Text To Speech</strong>
          </a>
        </div>
        <div data-ws-show-if-state="isSignedIn=false">
          <a class="Menu-list-element" onclick="toggleSignIn();" style="text-decoration: none;display: block"><svg class="Top-btn-svg"><path d="M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"></path></svg>&nbsp;&nbsp;Autentificare / Înregistrare<!-- Sign in / Sign up --></a>
        </div>
        <div data-ws-show-if-state="isSignedIn=true" >
          <div style="display: flex;align-items: center;">
            <p data-ws-show-if-state="isSignedIn=true" style="text-decoration: none;padding-left:10px; display: block;flex:1"><i><span data-ws-label-state="email"></span></i></p>
            <a class="Menu-list-element" onclick="toggleSignIn();" style="padding: 10px;" title="Deconectare" aria-label="Deconectare">
              <svg class="Top-btn-svg"><path d="m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"></path></svg>
            </a>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=false">
          <div data-ws-show-if-state="isSignedIn=false">
            <a class="Menu-list-element" data-ws-toggle="#upgradeModal" style="cursor: pointer;text-decoration: none;display: block">🏆&nbsp;&nbsp;&nbsp;Deveniți Premium<!-- Go Premium -->&nbsp;&nbsp;&nbsp;</a>
          </div>
          <div data-ws-show-if-state="isSignedIn=true">
            <a class="Menu-list-element" onclick="openNewUpgradeModal()" style="cursor: pointer;text-decoration: none;display: block">🏆&nbsp;&nbsp;&nbsp;Deveniți Premium<!-- Go Premium -->&nbsp;&nbsp;&nbsp;</a>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <a class="Menu-list-element" data-ws-toggle="#upgradeModal" style="cursor: pointer;text-decoration: none;display: block">-&nbsp;&nbsp;<svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>&nbsp;&nbsp;Statut Premium 🏆<!-- Premium 🏆 Status --></a>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <a class="Menu-list-element" href="https://docs.google.com/forms/d/e/1FAIpQLSc-gAEGNiCixhSjTjkJXu3cYSqDJYEMa9vPzRPKnY6Pei_yrQ/viewform" target="_blank" style="cursor: pointer;text-decoration: none;display: block">-&nbsp;&nbsp;<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-sos"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2" /><path d="M17 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /><path d="M3 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /></svg>&nbsp;&nbsp;Formular de suport premium</a>
        </div>
        <div data-ws-show-if-state="isSignedIn=true">
          <a href="https://ttsreader.com/account/" rel="nofollow" target="_blank" class="Menu-list-element" style="text-decoration: none;display: block">-&nbsp;&nbsp;<svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855" /></svg>&nbsp;&nbsp;Gestionare cont</a>
        </div>

        <div class="Menu-list-element" style="position: relative;">
          <input style="position: absolute;display: block;opacity: 0; right:0;left:0;top:0;bottom:0; cursor: pointer" type="file" accept=".csv, .json, .txt, .rtf, .pdf, .epub, .docx, .html, .htm" data-ws-onChange="handleFileSelect">
          <a onclick="gtag('event','import_file_click_player_drawer',{value:'1'})"  data-ws-onClick="openFile" style="text-decoration:none;display: flex;align-items: center">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-word"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" /><path d="M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5" /></svg>&nbsp;&nbsp;<span style="display: block;flex: 1;">Importă fișier (DOCX, TXT, PDF, EPUB, ...)</span>
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="gtag('event','stats_click_player_drawer',{value:'1'})" data-ws-onClick="calculateStats" data-ws-toggle="#statsModal" style="text-decoration:none;">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-analytics"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 17l0 -5" /><path d="M12 17l0 -1" /><path d="M15 17l0 -3" /></svg>&nbsp;&nbsp;Statistici document <!-- Document Stats -->
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="gtag('event','mp3_export_click_player_drawer',{value:'1'})" data-ws-onClick="calculateStats" data-ws-toggle="#exportModal" style="text-decoration:none;">
            <svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M11 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 16l0 -5l2 1" /></svg>&nbsp;&nbsp;Descărcați fișierul audio mp3<!-- Download mp3 audio file -->
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="openOrCloseExportsListModal()" style="text-decoration:none;">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>&nbsp;&nbsp;Listă exporturi MP3
          </a>
        </div>
        <a class="Menu-list-element" data-ws-toggle="#voicesModal" onclick="gtag('event','more_voices_click_player_drawer',{value:'1'});">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>&nbsp;&nbsp;Aveți nevoie de mai multe voci<!-- Need more voices -->
        </a>
        <div>
          <a href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds" target="_blank" class="Menu-list-element" onclick="gtag('event','drawer_click_multivoices',{value:'1'})" style="text-decoration:none;">
            <svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M16 19h6" /><path d="M19 16v6" /></svg>&nbsp;&nbsp;Dialoguri cu mai multe voci
          </a>
        </div>

        <a class="Menu-list-element" href="/docs/guides/quick-start-new-player/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-info"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M11 14h1v4h1" /><path d="M12 11h.01" /></svg>&nbsp;&nbsp;Manualul utilizatorului<!-- User manual -->
        </a>
        <a class="Menu-list-element" data-ws-toggle="#helpModal" onclick="loadImages('#helpImgId');">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-help"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 17l0 .01" /><path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" /></svg>&nbsp;&nbsp;Suport vizual<!-- Help overlay -->
        </a>
        <a class="Menu-list-element" onclick="openOnboarding();">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-progress-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 20.777a8.942 8.942 0 0 1 -2.48 -.969" /><path d="M14 3.223a9.003 9.003 0 0 1 0 17.554" /><path d="M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592" /><path d="M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305" /><path d="M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356" /><path d="M9 12l2 2l4 -4" /></svg>&nbsp;&nbsp;Inițiere
        </a>


        <a class="Menu-list-element" href="/docs/guides/commercial/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-video"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z" /><path d="M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" /></svg>&nbsp;&nbsp;Publicare comercială<!-- Commercial & publishing -->
        </a>
        <!--<a class="Menu-list-element" href="https://speechnotes.co/files/webm_to_mp3/" target="_blank" style="text-decoration: none;display: block">Convert webm to mp3</a>-->
        <!--<a class="Menu-list-element" href="/mobile/" target="_blank" style="text-decoration: none;display: block">
          Versiuni mobile&lt;!&ndash; Mobile versions &ndash;&gt;
        </a>-->
        <a class="Menu-list-element" href="https://docs.google.com/forms/d/e/1FAIpQLSecnm9ZnFje9S6OSSQqP4Ts4av-hSmhAUbuLvQAojWUdckAtg/viewform?usp=sf_link" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-message-circle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1" /></svg>&nbsp;&nbsp;Formular de feedback<!-- Feedback form -->
        </a>
        <a class="Menu-list-element" href="https://ttsreader.com/contact/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>&nbsp;&nbsp;Contactează-ne<!-- Contact us -->
        </a>
        <div data-ws-show-if-state="isShareSupported=true">
          <a class="Menu-list-element" onclick="share();"><svg style="vertical-align: middle" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-share" width="27" height="27" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M8.7 10.7l6.6 -3.4"></path>
            <path d="M8.7 13.3l6.6 3.4"></path>
          </svg>&nbsp;&nbsp;Distribuie</a>
        </div>
        <div data-ws-show-if-state="isShareSupported=false">
          <a class="Menu-list-element" data-ws-toggle="#shareModal"><svg style="vertical-align: middle" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-share" width="27" height="27" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M8.7 10.7l6.6 -3.4"></path>
            <path d="M8.7 13.3l6.6 3.4"></path>
          </svg>&nbsp;&nbsp;Distribuie</a>
        </div>
        <div class="Menu-list-element" >
          <a class="Menu-list-element" href="/versions/" target="_blank" style="display: block; text-decoration: none">
          <b>V3.6.8</b> Build 2025-07-10T20:33:56.613Z
          <br/><span style="margin-top: 10px;display: block">TOATE VERSIUNILE <svg style="vertical-align: bottom;" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-external-link"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6" /><path d="M11 13l9 -9" /><path d="M15 4h5v5" /></svg></span></a>
        </div>
        <div style="margin: 20px auto; text-align: center;">
          <b>Utilitare complementare</b>
        </div>
        <div>
          <a class="Menu-list-element" href="https://speechnotes.co/dictate/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-microphone"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z" /><path d="M5 10a7 7 0 0 0 14 0" /><path d="M8 21l8 0" /><path d="M12 17l0 4" /></svg>&nbsp;&nbsp;Vorbire în text
          </a>
        </div>
        <div>
          <a class="Menu-list-element" href="https://speechnotes.co/transcribe/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-device-audio-tape"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M3 17l4 -3h10l4 3" /><circle cx="7.5" cy="9.5" r=".5" fill="currentColor" /><circle cx="16.5" cy="9.5" r=".5" fill="currentColor" /></svg>&nbsp;&nbsp;Transcriere AI automată
          </a>
        </div>
        <div>
          <a class="Menu-list-element" href="/sounds/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-bell-ringing"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 5a2 2 0 0 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" /><path d="M9 17v1a3 3 0 0 0 6 0v-1" /><path d="M21 6.727a11.05 11.05 0 0 0 -2.794 -3.727" /><path d="M3 6.727a11.05 11.05 0 0 1 2.792 -3.727" /></svg>&nbsp;&nbsp;Generator de bip-uri
          </a>
        </div>
        <div style="margin: 20px auto; text-align: center;">
          Interfața disponibilă în aceste limbi:
        </div>
        <div>
          <a class="interface-lang-link" target="_parent" href="/en/">English</a>
          <a class="interface-lang-link" target="_parent" href="/es/">Español</a>
          <a class="interface-lang-link" target="_parent" href="/fr/">Français</a>
          <a class="interface-lang-link" target="_parent" href="/ar/">العربية</a>
          <a class="interface-lang-link" target="_parent" href="/he/">עברית</a>
          <a class="interface-lang-link" target="_parent" href="/ja/">日本語</a>
          <a class="interface-lang-link" target="_parent" href="/de/">Deutsch</a>
          <a class="interface-lang-link" target="_parent" href="/it/">Italiano</a>
          <a class="interface-lang-link" target="_parent" href="/zh/">中文</a>
          <a class="interface-lang-link" target="_parent" href="/ko/">한국어</a>
          <a class="interface-lang-link" target="_parent" href="/pt/">Português</a>
          <a class="interface-lang-link" target="_parent" href="/ru/">Русский</a>
          <a class="interface-lang-link" target="_parent" href="/ro/">Română</a>
          <a class="interface-lang-link" target="_parent" href="/hi/">हिन्दी</a>
          <a class="interface-lang-link" target="_parent" href="/nl/">Nederlands</a>
        </div>
      </div>

    </drawer>
    <div style="display: flex; flex-direction: column; flex: 1;max-width: 100%;">

      <div class="Buttons-bar" style="display: flex">
        <button title="Open / close main drawer" aria-label="Open / close main drawer" style="" onclick="toggleDrawerOpen();">
          <svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>
        </button>
        <!--<a class="Hide-on-narrow-screens" href="https://ttsreader.com" alt="TTSReader Home" title="TTSReader Home" style="background-image: url('favicon2.svg');background-size: contain;width: 40px;height: 40px; border-radius: 10px;"></a>-->
        <span style="display: inline-block;flex: 1"></span>
        <button title="Open file" aria-label="Open file" data-ws-onClick="openFile" style="display: inline-block;position: relative;overflow: hidden;"><span>📂<span class="Hide-on-narrow-screens">&nbsp;Deschide<!-- Open --></span></span><input style="position: absolute;display: block;opacity: 0; right:0;left:0;top:0;bottom:0; cursor: pointer" type="file" accept=".csv, .json, .txt, .rtf, .pdf, .epub, .docx, .html, .htm" data-ws-onChange="handleFileSelect"></button>
        &nbsp;
        <button class="Clear-btn" data-ws-toggle="#openUrlModal" title="Read Web Page" aria-label="Read Web Page">
          <svg style="position: relative; bottom: -2px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-world-www"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4" /><path d="M11.5 3a16.989 16.989 0 0 0 -1.826 4" /><path d="M12.5 3a16.989 16.989 0 0 1 1.828 4" /><path d="M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4" /><path d="M11.5 21a16.989 16.989 0 0 1 -1.826 -4" /><path d="M12.5 21a16.989 16.989 0 0 0 1.828 -4" /><path d="M2 10l1 4l1.5 -4l1.5 4l1 -4" /><path d="M17 10l1 4l1.5 -4l1.5 4l1 -4" /><path d="M9.5 10l1 4l1.5 -4l1.5 4l1 -4" /></svg>
        </button>
        &nbsp;
        <button class="Clear-btn" data-ws-onClick="clearContent" title="Erase all text from document" aria-label="Erase all text from document">🗑️</button>
        &nbsp;
        <button title="Select language, voice and speed" aria-label="Select language, voice and speed" style="" data-ws-toggle="#voicesModal">
          <svg class="Top-btn-svg" style="width:1.5em;height: 1.5em;" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><circle cx="9" cy="9" r="4"></circle><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"></path></svg>
          <span class="Hide-on-narrow-screens">
        &nbsp;
        <span class="Voice-label Flag-font" data-ws-label-state="voiceLabel"></span>
        &nbsp;
        <svg class="Top-btn-svg" style="margin-left: -10px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="m7 10 5 5 5-5z"></path></svg>
      </span>
        </button>
        <button title="Reading speed" data-ws-toggle="#voicesModal"><span data-ws-label-state="selectedRate"></span>X</button>
        &nbsp;
        <button data-ws-toggle="#addPauseModal" title="Insert pause in reading" aria-label="Insert pause in reading">
          <svg xmlns="http://www.w3.org/2000/svg" class="Top-btn-svg" style="width: 1.3em; height: 1.3em;" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M20.942 13.018a9 9 0 1 0 -7.909 7.922"></path>
            <path d="M12 7v5l2 2"></path>
            <path d="M17 17v5"></path>
            <path d="M21 17v5"></path>
          </svg>
        </button>
        &nbsp;
        <div class="Dropdown-header" style="display: inline-block; vertical-align: middle;cursor: pointer;position: relative;"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98 13.87 11h-3.74L12 5.98z"></path></svg>
          <div class="Dropdown-content" style="left:0;width:120px; translate: -40px;">
            <span data-ws-onClick="fontDecrease" style="display: inline-block; line-height: 20px; font-size: 18px; margin: 5px; padding: 5px; border-radius: 50%;background-color: white; color: blue;fill:blue;"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"></path></svg></span>
            <span data-ws-onClick="fontIncrease" style="display: inline-block; line-height: 20px; font-size: 18px; margin: 5px; padding: 5px; border-radius: 50%;background-color: white; color: blue;fill:blue;"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"></path></svg></span>
          </div>
        </div>
        &nbsp;
        <button onclick="toggleTheme();" class="btn btn-link" type="button" aria-label="Toggle user interface mode">
          <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg></span><span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
        </button>
        &nbsp;
        <button data-ws-show-if-state="isPremium=true" data-ws-toggle="#upgradeModal" style="position: relative;top:-1px;">🏆</button>
        <span style="flex: 1"></span>

        <button title="Text analytics - word counter & more" aria-label="Text analytics - word counter & more" style="" data-ws-onClick="calculateStats" data-ws-toggle="#statsModal">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-analytics"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 17l0 -5" /><path d="M12 17l0 -1" /><path d="M15 17l0 -3" /></svg>
        </button>
        <!--<button title="Interface Language Selector" aria-label="Interface Language Selector" style="" data-ws-toggle="#interfaceLangModal">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-language"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7" /><path d="M9 3v2c0 4.418 -2.239 8 -5 8" /><path d="M5 9c0 2.144 2.952 3.908 6.7 4" /><path d="M12 20l4 -9l4 9" /><path d="M19.1 18h-6.2" /></svg>
        </button>-->
      </div>

      <div style="display: flex;flex: 1;overflow: hidden;">

        <div style="flex: 1;display: flex;flex-direction: column;overflow: hidden;">
          <div class="App"  style="flex: 1;position: relative;display: flex;flex-direction: column">
            <div class="Book-bar" data-ws-show-if-state="isBook=true" style="text-align: center">
              <span data-ws-label-state="bookTitle"></span>&nbsp;-&nbsp;
              <button data-ws-onClick="loadPrevChapter" title="Load Previous Chapter" aria-label="Load Previous Chapter"><b>&lArr;</b></button>
              <span data-ws-label-state="currentChapterLabel"></span> / <span data-ws-label-state="totalChapters"></span>
              <button data-ws-onClick="loadNextChapter" title="Load Next Chapter" aria-label="Load Next Chapter"><b>&rArr;</b></button>
            </div>
            <div class="Text-box-container" style="position: relative;" data-ws-style-state="font-size=selectedFontSize">
              <!-- Create the toolbar container -->
              <!--<div id="toolbar"></div>-->
              <!-- Create the editor container -->
              <div id="editor" class="Text-box Text-box-quill" style="font-size: 1em;">
              </div>

              <!-- Initialize Quill editor -->
              <script>

                // ✅ Define the custom highlight blot
                const Inline = Quill.import('blots/inline');
                class HighlightBlot extends Inline {
                  static create(value) {
                    return super.create();
                  }
                  static formats(node) {
                    return true;
                  }
                }
                HighlightBlot.blotName = 'highlight';
                HighlightBlot.tagName = 'span';
                HighlightBlot.className = 'Highlight';
                Quill.register(HighlightBlot);

                class BlinkBlot extends Inline {
                  static create(value) {
                    return super.create();
                  }
                  static formats(node) {
                    return true;
                  }
                }
                BlinkBlot.blotName = 'blink';
                BlinkBlot.tagName = 'span';
                BlinkBlot.className = 'Blink';
                Quill.register(BlinkBlot);

                const quill = new Quill('#editor', {
                  modules: {
                    toolbar: [
                      [{ header: [1, 2, 3, 4, false] }],
                      ['bold', 'underline', 'italic'],
                      ['clean'] // remove formatting button
                    ]
                  },
                  formats: [
                    'highlight',
                    'blink',        // Custom blink format
                    'link',
                    'header',      // h1, h2, ...
                    'bold',        // <strong>
                    'underline',   // <u>
                    'italic',       // <em>
                    'strike'       // <strike>
                  ],
                  theme: 'snow',
                  placeholder: 'Tastați sau lipiți textul în această casetă, faceți clic pe butonul de redare și îl voi citi cu voce tare pentru dvs. Pentru a citi o pagină web - pur și simplu lipiți URL-ul și faceți clic pe redare. De asemenea, puteți încărca fișiere, schimba voci, teme, dimensiunea fontului și multe altele.' // Placeholder text
                });

                window.quill = quill; // Make Quill accessible globally

                const sentenceBreakRegex = /[.?!…]+[\s\n]+|[\n]+/g;

                function getCaretIndexOrHighlightEnd() {
                  const highlight = quill.root.querySelector('span.highlight');
                  const fullText = quill.getText();
                  if (highlight) {
                    const highlightedText = highlight.innerText;
                    const start = fullText.indexOf(highlightedText);
                    if (start !== -1) return start + highlightedText.length;
                  }
                  const sel = quill.getSelection();
                  return sel ? sel.index : 0;
                }

                function findNextSentence(caretIndex) {
                  const text = quill.getText();
                  sentenceBreakRegex.lastIndex = caretIndex;

                  const breakMatch = sentenceBreakRegex.exec(text);
                  if (!breakMatch) return null;

                  const sentenceStart = sentenceBreakRegex.lastIndex;
                  const nextBreak = sentenceBreakRegex.exec(text);
                  const sentenceEnd = nextBreak ? nextBreak.index : text.length;

                  return { start: sentenceStart, end: sentenceEnd };
                }

                function findPreviousSentence(caretIndex) {
                  const text = quill.getText();
                  let lastBreak = 0;
                  let nextBreak;

                  sentenceBreakRegex.lastIndex = 0;

                  while ((nextBreak = sentenceBreakRegex.exec(text)) !== null) {
                    if (nextBreak.index >= caretIndex) break;
                    lastBreak = sentenceBreakRegex.lastIndex;
                  }

                  const sentenceStart = lastBreak;
                  const sentenceEnd = caretIndex;

                  return sentenceStart < sentenceEnd ? { start: sentenceStart, end: sentenceEnd } : null;
                }

                function highlightRange(start, end) {
                  quill.formatText(0, quill.getLength(), 'highlight', false); // clear previous
                  quill.formatText(start, end - start, 'highlight', true);

                  const el = quill.root.querySelector('span.highlight');
                  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }

                /*document.getElementById('nextBtn').addEventListener('click', () => {
                  console.log('Previous button clicked');
                  const caret = getCaretIndexOrHighlightEnd();
                  const range = findNextSentence(caret);
                  if (range) highlightRange(range.start, range.end);
                });

                document.getElementById('prevBtn').addEventListener('click', () => {
                  console.log('Previous button clicked');
                  const caret = getCaretIndexOrHighlightEnd();
                  const range = findPreviousSentence(caret);
                  if (range) highlightRange(range.start, range.end);
                });*/

              </script>

              <!--<div class="Text-box" contentEditable="plaintext-only" data-ws-style-state="font-size=selectedFontSize" data-ws-onPaste="onPaste" data-ws-onInput="onInput" placeholder="Tastați sau lipiți textul în această casetă, faceți clic pe butonul de redare și îl voi citi cu voce tare pentru dvs. Pentru a citi o pagină web - pur și simplu lipiți URL-ul și faceți clic pe redare. De asemenea, puteți încărca fișiere, schimba voci, teme, dimensiunea fontului și multe altele." placeholder2="Acest player este în curs de dezvoltare activă, lucrăm pentru a-l face mai bun în fiecare zi. ❤️ Bucurați-vă de ascultare! 🎧"></div>-->
            </div>
            <div class="Playback-buttons-bar" style="direction: ltr;">
          <span>
            <button data-ws-show-if-state="isRepeatMode=false" title="Loop" aria-label="Loop"                              data-ws-onClick="toggleRepeatMode"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"></path><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"></path></svg></button>
            <button data-ws-show-if-state="isRepeatMode=true" title="Loop" aria-label="Loop" style="color: cornflowerblue" data-ws-onClick="toggleRepeatMode"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"></path><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"></path></svg></button>
            <button class="Hide-on-narrow-screens" data-ws-show-if-state="isRecordingSupported=true" title="Go to beginning" aria-label="Go to beginning" data-ws-onClick="goToStart"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"></path></svg></button>
            <button title="Jump backwards" aria-label="Jump backwards" data-ws-onClick="rewind"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6 8.5 6V6l-8.5 6z"></path></svg></button>
            <span style="display: inline-block; width: 80px;"></span>
            <button title="Jump forward" aria-label="Jump forward" data-ws-onClick="forward"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="m4 18 8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"></path></svg></button>
            <button class="Hide-on-narrow-screens" title="Toggle recording" aria-label="Toggle recording" data-ws-show-if-state="isRecordingSupported=true" data-ws-onClick="toggleRecord">
              <svg data-ws-show-if-state="isRecordingOn=false" class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
              <svg data-ws-show-if-state="isRecordingOn=true"  class="hidden Blinking-record-btn Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
            </button>
            <button title="Export to audio file" aria-label="Click to generate downloadable audio file" data-ws-onClick="calculateStats" data-ws-toggle="#exportModal">
              <svg  class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
            </button>
            <button id="Play-btn" data-ws-onClick="togglePlay" title="Play / Pause" aria-label="Play / Pause">
              <span data-ws-show-if-state="isPlayingOn=true" class="hidden"><svg class="Play-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></span>
              <span data-ws-show-if-state="isPlayingOn=false"><svg class="Play-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></span>
            </button>
          </span>
            </div>
          </div>

          <div data-ws-show-if-state="isSignedIn=false" class="remaining-chars-line" style="text-align: center; cursor: pointer; padding: 2px 10px;" onclick="signIn()">
            <p data-ws-show-if-state="isSignedIn=false">
              Autentificați-vă pentru a activa voci de bază nelimitate și 5k caractere gratuite pentru voci premium.
            </p>
          </div>
          <div data-ws-show-if-state="isSignedIn=true" class="remaining-chars-line hidden" style="text-align: center; cursor: pointer; padding: 2px 10px;" onclick="openNewUpgradeModal()" >
            <!--Old version:
            <p>
              Folosit&lt;!&ndash; Used &ndash;&gt;
              <b>
                <span data-ws-label-state="charsUsedToday"></span>&nbsp;/&nbsp;
                <span data-ws-label-state="dailyCharsLimit"></span>
              </b>
              caractere gratuite pe zi. Faceți clic pentru a elimina limita.&lt;!&ndash; free chars per day. Click to remove limit. &ndash;&gt;
            </p>-->
            <!-- New version: -->

              <div data-ws-show-if-state="serverData=false">
                <p>Fetching server data...</p>
              </div>
              <div data-ws-show-if-state="serverData=true">
                <p data-ws-show-if-state="isPremium=false">
                  Free plan. Unlimited basic voices. Used <span data-ws-label-state="usageLife"></span> / 5,000 chars for premium voices.&nbsp;Click to get more.
                </p>
                <p data-ws-show-if-state="isPremium=true">
                  Premium. Unlimited Basic voices.&nbsp;
                  <span data-ws-show-if-state="isPremiumPlan=true">
                    Plan <span data-ws-label-state="usedMonthly"></span> / <span data-ws-label-state="monthlyQuotaHuman"></span> / month.
                  </span>
                  &nbsp;
                  <span data-ws-show-if-state="isPayAsYouGo=true">
                    Additional chars: <span data-ws-label-state="remainingCreditsChars"></span>.
                  </span>
                  &nbsp;
                  Click to add.
                </p>
              </div>

          </div>
          <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626"
                  crossorigin="anonymous"></script>-->
          <!-- ResponsiveHorizontal20230518 -->
          <!--<ins class="adsbygoogle Ad Ad-bottom-banner"
               data-ad-client="ca-pub-5434274073094626"
               data-ad-slot="8622089184" data-ws-show-if-state="isPremium=false"></ins>
          -->
          <div class="Bottom-lift-up" style="height: 0;width: 100%;"></div>
        </div>

        <!-- ResponsiveVertical20230518 -->
        <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626"
                crossorigin="anonymous"></script>-->
        <!--<ins class="adsbygoogle Ad Ad-right-banner"
             data-ad-client="ca-pub-5434274073094626"
             data-ad-slot="1642597928" data-ws-show-if-state="isPremium=false"></ins>-->

      </div>

    </div>
  </div>







  <div id="exportsListModal" class="Sliding-In-Modal hidden">
    <div class="Sliding-In-Modal-Content" style="background-color: darkred; color: white; overflow-y: auto;position: relative;">
      <div onclick="openOrCloseExportsListModal(true);" style="position: absolute; right: 10px; top: 10px; cursor: pointer;width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 50%;border: 2px solid white;color:white;stroke:white;">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>
      </div>
      <div style="text-align: center">
        <h2>Listă exporturi texte lungi</h2>
        <a data-ws-toggle="#exportModal" style="text-decoration: none;cursor: pointer; color: orangered;text-transform: uppercase">Faceți clic aici pentru a crea un nou MP3 din text</a>
        <p>Faceți clic pe un fișier pentru descărcare. Asigurați-vă că îl salvați pe dispozitivul dvs. cât mai curând posibil, deoarece fișierele vor fi șterse automat după 30 de zile.</p>
      </div>
      <br/>
      <div id="exportsRowsContainer">
        <!-- rows inserted here -->
        <p style="text-align: center">Nimic aici încă. Exportați textele în MP3. Dacă textul este lung, MP3-ul generat va fi salvat pe serverele noastre pentru 30 de zile pentru confortul dvs.</p>
      </div>

      <template id="exportsListItemTemplate">
        <a class="job-download-link" style="text-decoration: none;"><div class="job-row">
          <span class="job-date"></span>
          <span class="job-preview"></span>
          <span class="voice-lang Flag-font" title="Language & accent">🇬🇧</span>
          <span class="voice-name">David</span>&nbsp;X
          <span class="job-rate" style="padding-left: 0"></span>
          <span class="job-state" style="font-weight: bold;border: 1px solid yellow; padding: 0;"></span>
          <span class="job-download-btn"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg></span>
        </div></a>
      </template>
    </div>
  </div>

  <div id="newUpgradeModal" class="Sliding-In-Modal hidden">
      <iframe></iframe>
  </div>






  <div id="onboardingModal" class="wideModal" style="display: none;" dir="">
    <!-- Step 1: Welcome Message -->
    <div data-ws-step="1" class="modal-step" style="background: url('/images/anima2.webp') no-repeat center;background-size: cover;">
      <div style="flex:1"></div>
      <h1>Bine ai venit la <span style="color:darkred;">TTS</span>Reader 3<!-- Welcome to <span style="color:darkred;">TTS</span>Reader 3 --></h1>
      <h2 style="font-size: smaller; font-weight: normal">Text la vorbire în română și alte limbi</h2>
      <p>Dă viață textului cu voci AI realiste<!-- Bring text to life with realistic AI voices --></p>
      <br/>
      <button class="primary" onclick="nextStep(this)" style="margin: auto;">Să începem<!-- Let's Start --></button>
      <br/><br/>
      <div data-nosnippet class="theme-toggle">
        <span class="label">🌞 Deschis<!-- 🌞 Light --></span>
        <label class="switch">
          <input type="checkbox" class="themeSwitch">
          <span class="slider"></span>
        </label>
        <span class="label">🌙 Întunecat<!-- 🌙 Dark --></span>
      </div>
      <br/>
      <p style="font-size: smaller"><i>By continuing you agree to our <a href="/docs/legal/terms/" target="_blank">terms</a> & <a href="/docs/legal/privacy/" target="_blank">privacy policy</a></i></p>
      <p data-ws-show-if-state="isSignedIn=false">Deja aveți un cont?&nbsp;<button class="secondary" onclick="signIn()">Autentificare cu Google</button></p>
      <div style="flex:1;" ></div>
    </div>

    <!-- Step 2: Language Selector -->
    <div data-ws-step="2" class="modal-step" style="display: none">
      <div class="modal-content">
        <div style="flex:1"></div>
        <p style="font-size: larger;">Selectează limba de lectură<!-- Select Your Reading Language --></p>
        <select class="Language-selector Flag-font" data-ws-onChange="handleLanguageChange" data-ws-value-state="selectedLanguageCode" style="font-size: 1.1em;"></select>
        <p>Îl poți schimba oricând mai târziu.<!-- You can always change it later. --></p>
        <br/>
        <div>
          <button class="primary" onclick="nextStep(this)">Înainte<!-- Next --></button>
        </div>
        <br/>
        <div style="flex:0.67"></div>
        <div data-nosnippet class="theme-toggle">
          <span class="label">🌞 Deschis<!-- 🌞 Light --></span>
          <label class="switch">
            <input type="checkbox" class="themeSwitch">
            <span class="slider"></span>
          </label>
          <span class="label">🌙 Întunecat<!-- 🌙 Dark --></span>
        </div>
        <div style="flex:0.33"></div>
      </div>

      <div data-ws-show-if-state="ttsReady=false" style="position: absolute;top:0;bottom:0;right:0;left:0;text-align: center;">
        <div style="width: 100%;height: 100%;display: flex;flex-direction: column;background-color: white;">
          <div style="flex: 1"></div>
          <div class="voice-loader-container">
            <div class="wave-loader">
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
            </div>
            <br/>
            <div class="loading-text">
              <p style="font-size: larger;">Se încarcă vocile...<!-- Loading voices... --></p>
              <p>Va dura doar un moment<!-- This will only take a moment --></p>
            </div>
          </div>
          <div style="flex: 1"></div>
        </div>
      </div>
    </div>

    <!-- Step 3: Voice Selector -->
    <div data-ws-step="3" class="modal-step" style="display: none">
      <!--<div class="modal-header">
        <span>Selectează vocea preferată&lt;!&ndash; Select Your Preferred Voice &ndash;&gt;</span><br/>
        <span style="font-size: 16px;opacity: 0.8;">Dă clic pe o voce pentru a auzi cum sună. Când ești gata, atinge <a style="color: orangered;cursor: pointer" onclick="nextStep(this)">Înainte</a>.&lt;!&ndash; Click a voice to hear how it sounds. When ready, tap <a style="color: orangered;cursor: pointer" onclick="nextStep(this)">Next</a>. &ndash;&gt;</span>
      </div>-->
      <div class="modal-content">
        <p>Selectați vocea preferată. Îl poți schimba oricând mai târziu.<!-- You can always change it later. --></p>
        <div style="flex:1"></div>
        <div class="Voices-Gallery" style="max-width: 1000px; margin: auto;margin-top: -15px;">
          <h2>Voci AI Premium (Test gratuit necesită autentificare, fără plată)</h2>
          <div class="Gallery-Container Voices-Gallery-Container-Premium"></div>
          <br/>
          <h2>Voci gratuite și nelimitate - Nu necesită autentificare</h2>
          <div class="Gallery-Container Voices-Gallery-Container-Free"></div>

        </div>
        <template id="voiceTileTemplate">
          <div class="voice-tile" data-ws-voiceURI="ttsreader.gcp.standard-A" data-ws-audio-src="https://ttsreader.com/player/audio/Christopher.mp3" style="font-size: larger; position: relative;">
            <div>
              <span class="voice-name">David</span>
            </div>
            <div class="Voice-Icons">
              <span class="voice-gender-male" title="Male">👨</span>
              <span class="voice-gender-female" title="Female">👩</span>
              <span class="voice-lang Flag-font">🇬🇧</span>
              <span class="voice-premium" title="Premium Voice">🌟</span>
              <span class="voice-publishing" title="Allowed for Publishing for Premium Users">
                <svg style="width:1em;height:1em;position: relative;top:3px;" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1phnduy" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
                  <path d="M14 12c0 .74-.4 1.38-1 1.72V22h-2v-8.28c-.6-.35-1-.98-1-1.72 0-1.1.9-2 2-2s2 .9 2 2m-2-6c-3.31 0-6 2.69-6 6 0 1.74.75 3.31 1.94 4.4l1.42-1.42C8.53 14.25 8 13.19 8 12c0-2.21 1.79-4 4-4s4 1.79 4 4c0 1.19-.53 2.25-1.36 2.98l1.42 1.42C17.25 15.31 18 13.74 18 12c0-3.31-2.69-6-6-6m0-4C6.48 2 2 6.48 2 12c0 2.85 1.2 5.41 3.11 7.24l1.42-1.42C4.98 16.36 4 14.29 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 2.29-.98 4.36-2.53 5.82l1.42 1.42C20.8 17.41 22 14.85 22 12c0-5.52-4.48-10-10-10"></path>
                </svg>&nbsp;
              </span>
            </div>
            <div class="checkmark">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-circle-check">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z" />
              </svg>
            </div>
          </div>
        </template>
        <div style="flex:2"></div>
      </div>
      <div data-ws-show-if-state="isSignedIn=false">
        <div class="modal-footer" style="display: flex">
          <button class="secondary" style="flex: 1" onclick="prevStep(this)">Înapoi<!-- Back --></button>
          <button data-ws-show-if-state="isVoicePremium=true" class="primary" style="flex: 2" onclick="signIn()">Autentificare cu Google</button>
          <button data-ws-show-if-state="isVoicePremium=false" class="primary hidden" style="flex: 2" onclick="closeOnboarding()">Hai să mergem</button>
        </div>
      </div>
      <div data-ws-show-if-state="isSignedIn=true">
        <div class="modal-footer" style="display: flex">
          <button class="secondary" style="flex: 1" onclick="prevStep(this)">Înapoi<!-- Back --></button>
          <button class="primary" style="flex: 2" onclick="closeOnboarding()">Hai să mergem</button>
        </div>
      </div>
    </div>

    <!-- Step 4: Finish Onborading - Not active -->
    <div data-ws-step="4" class="modal-step" style="display: none;">
      <div style="flex:1"></div>
      <h1>Ești pregătit<!-- You're all set --></h1>
      <p style="max-width: 600px; margin: auto;">În următoarea vedere vei avea o casetă de text, unde poți introduce propriul text sau selecta un fișier folosind butoanele de sus. Când ești gata, dă clic pe butonul 'play' de la bază și bucură-te de ascultare.<!-- In the next view you'll have a text box, where you can input your own text or select a file using the buttons at the top. When ready, click the 'play' button at the bottom and enjoy listening. --></p>
      <br/>
      <button class="primary" onclick="closeOnboarding()" style="margin: auto;">Hai să mergem<!-- Let's Go --></button>
      <div style="flex:2"></div>

      <!-- Sign in overlay if premium voice -->
      <div data-ws-show-if-state="isSignedIn=false">
        <div data-ws-show-if-state="isVoicePremium=true" class="hidden">
          <div class="modal-step-overlay" style="display:flex;position: absolute;top:0;bottom:0;left:0;right:0;flex-direction: column">
            <div style="flex:1.5"></div>
            <p style="max-width: 600px; margin: auto;font-size: larger;">
              Vocea pe care ai selectat-o <span data-ws-label-state="voiceLabel"></span>&nbsp; este o alegere excelentă! Deoarece este o voce premium, este necesară autentificarea.<br/><br/>Te rugăm să te autentifici în siguranță cu Google pentru a continua.<!-- The voice you selected <span data-ws-label-state="voiceLabel"></span>&nbsp; is an excellent choice! As it is a premium voice, sign-in is required. -->
            </p>
            <br/><br/>
            <button onclick="signIn();" class="primary" style="margin: auto;border: 1px solid;border-radius: 10px;width: 500px;max-width: 90%;">Autentificare cu Google<!-- Sign In with Google --></button>
            <br/>
            Nu este necesară nicio parolă sau metodă de plată.
            <br/>
            <div style="flex:1"></div>
            <p>Or, if you prefer, you may <a style="text-decoration: underline; cursor: pointer" onclick="prevStep(this)">go back and select a free & unlimited voice.</a></p>
            <div>
              <button class="secondary" onclick="prevStep(this)">Înapoi<!-- Back --></button>
            </div>
            <div style="flex:1"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div data-ws-show-if-state="isSignedIn=false">
  <div class="Modal" id="premiumVoiceSignInModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="flex: 1"></div>
      <p style="font-size: larger;">Vocea pe care ai selectat-o <span data-ws-label-state="voiceLabel"></span>&nbsp; este o alegere excelentă! Deoarece este o voce premium, este necesară autentificarea. Te rugăm să te autentifici în siguranță cu Google pentru a continua.<!-- The voice you selected <span data-ws-label-state="voiceLabel"></span>&nbsp; is an excellent choice! As it is a premium voice, sign-in is required. Please securely sign in with Google to continue. --></p>
      <br/>
      <button onclick="signIn();" class="Full-width-btn" style="background-color: transparent;color: red;border-color: red">Autentificare cu Google<!-- Sign In with Google --></button>
      <div style="flex: 2"></div>
    </div>
    <div style="height:20px;"></div>
  </div>
  </div>

  <div class="Modal" id="voicesModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: 1.2em;">
        <select class="Language-selector Flag-font" data-ws-onChange="handleLanguageChange" data-ws-value-state="selectedLanguageCode" style="font-size: 1.1em;"></select>
      </h4>
      <div style="max-width: 100%; width: 450px; margin: -5px auto 30px; flex: 1;overflow-y: auto;text-align: left">

        <div style="text-align: center;position: relative">
          <div style="position: absolute;left: 0;top: 7px;opacity: 0.7;font-size: smaller;">
            Viteză<!-- Speed --> X
          </div>
          <span data-ws-onClick="slower" style="user-select: none;vertical-align: baseline;border: 1px solid blue;text-align: center;cursor: pointer;display: inline-block; line-height: 16px; font-size: 18px; margin: 5px; width: 20px;height: 20px; border-radius: 10px;background-color: white; color: blue;">-</span>
          <span data-ws-label-state="selectedRate" style="width: 2em;display:inline-block;text-align: center">1</span>
          <span data-ws-onClick="faster" style="user-select: none;vertical-align: baseline;border: 1px solid blue;text-align: center;cursor: pointer;display: inline-block; line-height: 16px; font-size: 18px; margin: 5px; width: 20px;height: 20px; border-radius: 10px;background-color: white; color: blue;">+</span>
          <input type="range" data-ws-value-state="selectedRateSliderValue" style="width: 300px;max-width:90%; margin: auto;display: block;height: 50px;" min="1" max="16" data-ws-onInput="onRateChange">
        </div>
        <div style="text-align: right;opacity: 0.7;margin-bottom: 15px;margin-right: 10px;">
          <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
            <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
          </svg>
          <a href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds" target="_blank" style="text-decoration: none;">
            Copiază<!-- Copy -->
            <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"></path>
              <path d="M11 13l9 -9"></path>
              <path d="M15 4h5v5"></path>
            </svg>
          </a>
        </div>
        <h3 style="text-align: center">Premium AI Voices</h3>
        <div class="Best-voices"></div>
        <h3 style="text-align: center">Free Unlimited Voices</h3>
        <div class="Voices-list"></div>

        <template id="voiceOptionTemplate">
          <div class="Voice-list-element" data-ws-voiceURI="ttsreaderServer.gcp.en-US-Chirp-HD-D" data-ws-voiceName="David" data-ws-select-if-state="selectedVoiceUri=ttsreaderServer.gcp.en-US-Chirp-HD-D" selected="true">
            <span onclick="window.appMethods.selectVoice(this)">
              <span class="voice-lang Flag-font" title="Language & accent">🇬🇧</span>
              <span class="voice-gender-male" title="Male">👨</span>
              <span class="voice-gender-female" title="Female">👩</span>
              <span class="voice-name" title="Click to select voice">David</span>
            </span>
            <span class="voice-publishing" style="color: green"  title="Allowed for publishing for Premium accounts">✓</span>
            <span class="voice-premium" title="Premium Voice">🌟</span>
            <span title="Copy inline voice-setter" onclick="window.appMethods.copyVoice(this)"><svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path></svg></span>
            <span title="Click to test voice" onclick="window.appMethods.testVoice(this)"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></span>
          </div>
        </template>

      </div>
      <!--<select class="Voice-selector" data-ws-onChange="handleVoiceChange" data-ws-value-state="selectedVoiceUri"></select>-->
      <p style="text-align: center">
        <span style="color: green">✓</span> Indică faptul că vocea este permisă pentru publicare pentru utilizatorii premium<!-- Indicates voice is allowed for publishing for premium users --> <span data-ws-show-if-state="isPremium=true" data-ws-toggle="#upgradeModal">ca tine 🏆<!-- as yourself 🏆 --></span><a data-ws-show-if-state="isPremium=false" data-ws-toggle="#upgradeModal" style="cursor: pointer;">- <u>faceți clic aici pentru a face upgrade<!-- click here to upgrade --></u></a>
      </p>
    </div>
  </div>

  <div class="Modal" id="interfaceLangModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: 1.2em;">
        Selectați limba interfeței<!-- Interface Language -->
      </h4>
      <div class="language-selector">
        <!-- Latin Alphabet -->
        <a href="/player/" target="_parent"><img src="https://flagcdn.com/us.svg" alt="English">English</a>
        <a href="/es/" target="_parent"><img src="https://flagcdn.com/es.svg" alt="Español">Español</a>
        <a href="/fr/" target="_parent"><img src="https://flagcdn.com/fr.svg" alt="Français">Français</a>
        <a href="/de/" target="_parent"><img src="https://flagcdn.com/de.svg" alt="Deutsch">Deutsch</a>
        <a href="/it/" target="_parent"><img src="https://flagcdn.com/it.svg" alt="Italiano">Italiano</a>
        <a href="/pt/" target="_parent"><img src="https://flagcdn.com/br.svg" alt="Português">Português</a>
        <a href="/ro/" target="_parent"><img src="https://flagcdn.com/ro.svg" alt="Română">Română</a>
        <a href="/nl/" target="_parent"><img src="https://flagcdn.com/nl.svg" alt="Nederlands">Nederlands</a>

        <!-- Cyrillic Alphabet -->
        <a href="/ru" target="_parent"><img src="https://flagcdn.com/ru.svg" alt="Русский">Русский</a>

        <!-- Indic Alphabet -->
        <a href="/hi/" target="_parent"><img src="https://flagcdn.com/in.svg" alt="हिन्दी">हिन्दी</a>

        <!-- East Asian Scripts -->
        <a href="/zh/" target="_parent"><img src="https://flagcdn.com/cn.svg" alt="中文">中文</a>
        <a href="/ja/" target="_parent"><img src="https://flagcdn.com/jp.svg" alt="日本語">日本語</a>
        <a href="/ko/" target="_parent"><img src="https://flagcdn.com/kr.svg" alt="한국어">한국어</a>

        <!-- Semic Alphabet -->
        <a href="/ar/" target="_parent"><img src="https://flagcdn.com/sa.svg" alt="العربية">العربية</a>
        <a href="/he/" target="_parent"><img src="https://flagcdn.com/il.svg" alt="עברית">עברית</a>

      </div>
    </div>
  </div>

  <div class="Modal" id="openUrlModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <br/>
      <p style="text-align: justify"><b>Lipiți URL-ul paginii web pe care doriți să o ascultați.<!-- Paste the URL of the webpage you would like to listen to. --></b>
        &nbsp;Cum să obțineți URL-ul? Deschideți pagina dorită într-o filă diferită - apoi copiați adresa din bara de adrese.<!-- How to get the URL? Open the desired page in a different tab - then copy its address from the address bar --></p>
      <br/>
      <div class="input-container">
        <input type="text" id="urlInput" class="styled-input" placeholder="https://en.wikipedia.org/wiki/The_Beatles">
        <button class="styled-button" id="urlSubmitButton" data-ws-onClick="onUrlSubmitClick">PORNEȘTE</button>
      </div>

      <br/>
      <p style="text-space: 1.2">Exemple de URL<!-- Examples of valid URLs: --></p>
      <div style="text-align: left; color: orangered; line-height: 1.3em; font-style: italic">
        <p>https://en.wikipedia.org/wiki/The_Beatles</i></p>
        <p>https://www.bbc.com/sport/football/articles/c97dllq4gg1o</p>
      </div>
    </div>
  </div>

  <div class="Modal" id="exportModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4>NOU Exportă text în audio - MP3 / WAV</h4><!-- TODO: replace with:  -->
      <p><strong>Generare instant MP3 / WAV pentru utilizatorii premium. Dețineți drepturile de autor! Folosiți audio-ul generat pentru ORICE scop.</strong></p>
      <div style="text-align: justify; font-size: smaller;">
      <p style="text-align: center">VĂ RUGĂM SĂ REȚINEȚI:</p>
      <ul style="text-align: justify">
        <li><span data-ws-show-if-state="isPremium=true">✅ Premium Account</span><span data-ws-show-if-state="isPremium=false">style="color: red;">✘ Premium.&nbsp;<a href="#" data-ws-toggle="#upgradeModal" style="font-weight: bold">Faceți upgrade la Premium</a></span></li>
        <li><strong>Vă rugăm să redați înainte de export - pentru a vă asigura că totul sună exact așa cum doriți. Editați la perfecțiune. Apoi exportați când sunteți gata.</strong></li>
        <li>Consumă caractere din cota dvs., la fel ca și redarea.</li>
        <li data-ws-show-if-state="isLongerThan200000Chars=true"><span style="color: red;">✘</span> Limited to 200k chars per file. Your current text is too long with <span data-ws-label-state="charsCount"></span> chars.&nbsp;<span style="color:red;">Please split it to smaller chunks, or talk to us at contact@ttsreader.com</span></li>
        <li>Funcționează doar cu voci premium (cele marcate cu stea în galerie).</li>
        <li>Asigurați-vă că vocea și viteza sunt setate corect prin controalele selectorului, deoarece codurile inline sunt ignorate.</li>
        <li style="color: green">Nou: {{pause}} și {{pause:DURATION_IN_MS}} sunt suportate. Asigurați-vă că sunt formatate FĂRĂ spații în interiorul acoladelor {{...}}</li>
      </ul>
      </div>
      <br/>
      <div>
        <button onclick="sendAnalyticsEvent('exportMP3');" class="full-width-button" data-ws-params="mp3" data-ws-onClick="exportToMp3">Creează și descarcă MP3</button>
        <p style="font-weight: bold;color: orangered;cursor: pointer;background-color: lightgoldenrodyellow; padding: 5px; border: 1px solid;" onclick="openOrCloseExportsListModal();" data-ws-toggle="#exportModal">DAȚI CLICK AICI PENTRU PROCESARE / EXPORTURI LONG-FORM PREGĂTITE</p>
        <br/>
        <button onclick="sendAnalyticsEvent('exportWAV');" class="full-width-button" data-ws-params="wav" data-ws-onClick="exportToMp3" style="">Creează și descarcă WAV (NUMAI PENTRU MAI PUȚIN DE 2.000 CARACTERE)</button>
      </div>
      <br/>
      <p><a href="https://docs.google.com/forms/d/e/1FAIpQLSecnm9ZnFje9S6OSSQqP4Ts4av-hSmhAUbuLvQAojWUdckAtg/viewform?usp=sf_link" target="_blank">Cum ne descurcăm? Spuneți-ne, vă rugăm! Link formular feedback</a></p>
    </div>
  </div>

  <div class="Modal" id="uploadModal" style="z-index: 9999; display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4>ÎNCĂRCARE TEXT PENTRU GENERARE VOCE</h4>
      <p><strong>VĂ RUGĂM SĂ MENȚINEȚI ACEASTĂ FILĂ DESCHISĂ</strong></p>
    </div>
  </div>


  <div class="Modal" id="postOnboardingModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: larger">Totul este pregătit! Sfaturi inițiale:</h4>
      <p><strong>Setați limba, vocea și viteza în bara de butoane de sus&nbsp;<img style="display: inline-block; max-height: 45px;margin: 3px; border-radius: 5px; border: 2px solid yellow; vertical-align: middle;max-width: 90%;" src="images/voice_guide.jpg"/></strong></p>
      <p><strong>Lipiți, tastați și editați textul direct în caseta de text.</strong></p>
      <p><strong>Pentru a importa documente și pagini web folosiți butoanele Deschideți & Pagină web din bara de meniu de sus&nbsp;<img style="display: inline-block; max-height: 45px;margin: 3px; border-radius: 5px; border: 2px solid yellow; vertical-align: middle;max-width: 90%;" src="images/open_guide2.jpg"/></strong></p>
      <p><strong>Pentru a EXPORTA MP3 - faceți clic pe butonul EXPORT din dreapta jos</strong></p>
      <img style="max-width: 80%; margin: auto; width: 382px;display: block;" src="images/export_btn_guide.png"/>
      <br/>
      <button data-ws-toggle="#postOnboardingModal" class="full-width-button">Să începem</button>
    </div>
  </div>

  <div class="Modal" id="uploadSuccessModal" style="z-index: 9999; display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4> ✅ ÎNCĂRCARE CU SUCCES</h4>
      <p style="font-size: larger">Fișierul audio este acum redat în fundal de serverul nostru.<br/><br/>Este sigur să continuați să lucrați sau să închideți fila.<br/><br/>Sarcina apare în lista de exporturi și, când este gata, fișierul audio poate fi descărcat făcând clic pe rândul sarcinii.</p>
    </div>
  </div>

  <div class="Modal" id="statsModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <p style="font-weight: bold">
        Număr de cuvinte: <span data-ws-label-state="wordsCount">...</span>
      </p>
      <p style="font-weight: bold">
        Număr de caractere: <span data-ws-label-state="charsCount">...</span>
      </p>
      <p style="font-weight: bold">
        Număr de paragrafe: <span data-ws-label-state="paragraphsCount">...</span>
      </p>
      <p style="font-weight: bold">
        Durată:&nbsp;~<span data-ws-label-state="expectedDuration"></span>&nbsp;<span style="font-weight:normal">(at speed X1)</span>.
      </span>

      <br/>
      <button class="full-width-button" data-ws-onClick="calculateStats">Reîmprospătează</button>
    </div>
  </div>

  <div class="Modal" id="recordModalNonPremium" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px;">
        <h4>Înregistrarea discursului sintetizat<!-- Recording the Synthesized Speech --></h4>
        <div data-ws-show-if-state="isPremium=false">
          <p style="text-align: justify">
            Înregistrarea necesită premium și include licență pentru utilizare comercială și publicare (consultați termenii de publicare<!-- Recording requires premium and includes licensing for commercial use & publishing (see publishing terms --> <a href="https://ttsreader.com/docs/guides/commercial/" target="_blank">aici<!-- here --></a>).
          </p>
          <button data-ws-toggle="#upgradeModal" onclick="signInIfNeeded();" class="Full-width-btn" style="background-color: darkgreen;color: white">Faceți upgrade la Premium<!-- Upgrade to Premium --></button>
          <div data-ws-show-if-state="isSignedIn=false">
            <p style="text-align: center">Deja premium? Autentificare<!-- Already premium? Sign in --></p>
            <button onclick="signIn();" class="Full-width-btn" style="background-color: transparent;color: red;border-color: red">Autentificare cu Google<!-- Sign In with Google --></button>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <p style="text-align: center;font-size: larger;">🏆 🍾🥂 Vă mulțumim pentru upgrade!!!<!-- Thank you for upgrading!!! --> 🎉🚀 🏆 </p>
          <button data-ws-toggle="#recordStartModal" class="Full-width-btn" style="background-color: transparent;color: cornflowerblue;border-color: cornflowerblue">Continuați înregistrarea<!-- Continue with recording --></button>
        </div>
        <br/><br/>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="recordStartModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px 30px;">
        <p style="text-align: justify">Once you click the following button a popup will show. There select the 'Entire Screen' & 'Also share system audio' options. Finally, click 'Share'.</p>
        <button data-ws-onClick="startRecording" class="Full-width-btn" style="background-color: darkgreen;color: white">Începeți înregistrarea<!-- Start Recording --></button>
        <br/>
        <div>
          <img src="images/share_audio.png" style="max-width: 90%; margin: auto;"/>
        </div>
        <p><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/">Learn on generating mp3 files and the different options here.</a></p>
        <!--<p style="text-align: justify">Vizionați acest scurt videoclip pentru a înțelege pașii. Când sunteți gata, faceți clic pe butonul 'Începeți înregistrarea'.&lt;!&ndash; Watch this short video for understanding the steps. When ready - click the 'Start Recording' button. &ndash;&gt;</p>
        <div class="videowrapper">
          <iframe style="display:block" src="https://www.youtube.com/embed/Xq09r01GetQ" title="YouTube video player - Generate audio mp3 files from synthesized speech with TTSReader" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
        <br/>-->
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="upgradeModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;width: 800px;max-width: 90%;margin: auto;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>


      <div data-ws-show-if-state="isPremium=true" style="padding: 20px;text-align: center;">
        <p style="font-size: larger;">Plan Premium</p>
        <p style="font-size: 70px; padding: 20px;margin-block: 0.3em;">🏆</p>
        <p data-ws-show-if-state="subscriptionId=true">
          Prin<!-- Via --> <a style="cursor: pointer;text-decoration: underline" data-ws-toggle="#subscriptionModal">Abonament<!-- Subscription --> - faceți clic aici pentru a vizualiza și gestiona<!-- click here to view & manage --></a>
          <br/>
          Automatically renews on: <span data-ws-label-state="premiumPlanExpirationDateReadable"></span>
        </p>
        <p data-ws-show-if-state="isPremiumPlan=false">
          <a data-ws-toggle="#upgradeModal" style="color: orangered;font-weight: bold;cursor: pointer;text-decoration: none;" onclick="openNewUpgradeModal()">Subscription - Faceți clic aici pentru a face upgrade. 100% satisfacție garantată</a>
        </p>
        <p data-ws-show-if-state="subscriptionId=false">
          <span data-ws-show-if-state="isPremiumPlan=true">
            Expiră la: <span data-ws-label-state="premiumPlanExpirationDateReadable"></span>
          </span>
        </p>
        <hr/>
        <div style="text-align: center">
          <div data-ws-show-if-state="isSignedIn=true">
            <div data-ws-show-if-state="serverData=false">
              <p>Fetching server data...</p>
            </div>
            <div data-ws-show-if-state="serverData=true">
              <p data-ws-show-if-state="isPremium=false">
                FREE PLAN. Voci de bază nelimitate.
                <br/>
                Used <span data-ws-label-state="usageLife"></span> / 5,000 chars of Premium Voices.
              </p>
          <p data-ws-show-if-state="isPremium=true">
                Voci de bază nelimitate.
                <br/>
                <span data-ws-show-if-state="isPremiumPlan=true">
                  Caractere utilizate pentru voci premium în această lună.: <span data-ws-label-state="usedMonthly"></span> / <span data-ws-label-state="monthlyQuotaHuman"></span>
                </span>
                <br/>
                <span data-ws-show-if-state="isPayAsYouGo=true">
                  Remaining premium chars: <span data-ws-label-state="remainingCreditsChars"></span>.
                </span>
                <br/>
                <a data-ws-toggle="#upgradeModal" style="color: orangered;font-weight: bold;cursor: pointer;text-decoration: none;" onclick="openNewUpgradeModal()">Clic pentru a cumpăra caractere premium Pay-As-You-Go</a>
                <br/>
                <hr/>
                <br/>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSc-gAEGNiCixhSjTjkJXu3cYSqDJYEMa9vPzRPKnY6Pei_yrQ/viewform" target="_blank" style="color: orangered;cursor: pointer;text-decoration: none;display: block"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-sos"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2" /><path d="M17 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /><path d="M3 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /></svg>&nbsp;&nbsp;Formular de suport premium</a>
                <br/>
                <span>Sau trimiteți-ne un email la contact@ttsreader.com menționând în subiect că sunteți utilizator premium</span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div style="overflow: auto;padding:10px 30px;" data-ws-show-if-state="isPremium=false">
        <h4>Obțineți mai mult și susțineți echipa 🔥🔥🔥<!-- Get More & Support the Team 🔥🔥🔥 --></h4>
        <br/>
        <div data-ws-show-if-state="isSignedIn=false">
          <button class="styled-btn" onclick="toggleSignIn();">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" width="12" height="12" viewBox="0 0 186.69 190.5">
              <g transform="translate(1184.583 765.171)">
                <path clip-path="none" mask="none" d="M-1089.333-687.239v36.888h51.262c-2.251 11.863-9.006 21.908-19.137 28.662l30.913 23.986c18.011-16.625 28.402-41.044 28.402-70.052 0-6.754-.606-13.249-1.732-19.483z" fill="#4285f4"/>
                <path clip-path="none" mask="none" d="M-1142.714-651.791l-6.972 5.337-24.679 19.223h0c15.673 31.086 47.796 52.561 85.03 52.561 25.717 0 47.278-8.486 63.038-23.033l-30.913-23.986c-8.486 5.715-19.31 9.179-32.125 9.179-24.765 0-45.806-16.712-53.34-39.226z" fill="#34a853"/>
                <path clip-path="none" mask="none" d="M-1174.365-712.61c-6.494 12.815-10.217 27.276-10.217 42.689s3.723 29.874 10.217 42.689c0 .086 31.693-24.592 31.693-24.592-1.905-5.715-3.031-11.776-3.031-18.098s1.126-12.383 3.031-18.098z" fill="#fbbc05"/>
                <path d="M-1089.333-727.244c14.028 0 26.497 4.849 36.455 14.201l27.276-27.276c-16.539-15.413-38.013-24.852-63.731-24.852-37.234 0-69.359 21.388-85.032 52.561l31.692 24.592c7.533-22.514 28.575-39.226 53.34-39.226z" fill="#ea4335" clip-path="none" mask="none"/>
              </g>
            </svg>
            &nbsp;&nbsp;Autentificare cu Google pentru a începe<!-- Sign In with Google to Start -->
          </button>
          <p style="text-transform: uppercase; opacity: 0.7;font-size: 0.7em;">
            Autentificare sigură cu Google<!-- Secure sign in with Google -->
          </p>
        </div>

        <div data-ws-show-if-state="isSignedIn=true" style="box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); padding: 12px; background-color: white; border-radius: 10px;">
          <a data-ws-toggle="#upgradeModal" style="color: orangered;font-weight: bold;cursor: pointer;text-decoration: none;" onclick="openNewUpgradeModal()">Click to select a convenient Premium Subscription, or purchase extra Premium Credits.</a>
        </div>
        <br/>
        <h4 style="text-align: start">&nbsp;&nbsp;&nbsp;Beneficii principale<!-- Main Benefits --></h4>
        <ul style="list-style-type: '\2705   '; list-style-position: outside; margin: 0 0 1em 0; text-align: start">
          <li>Fără reclame<!-- No Ads --></li>
          <li>Încărcare mai rapidă<!-- Faster loading --></li>
          <li>Citire continuă nelimitată - For the non premium voices<!-- Unlimited continuous reading --></li>
          <li>For premium voices: lift limit to 1+ million chars per month or as many as you like via Pay-As-You-Go</li>
          <li>Export to MP3</li>
          <li>Înregistrare activată pe PC-uri Windows<!-- Recording enabled on Windows PC --></li>
          <li>Licență comercială and Publishing<!-- Commercial license --></li>
          <li>Deblocați toate funcțiile<!-- Unlock all features --></li>
          <li>Suport Premium<!-- Premium support --></li>
        </ul>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>


  <div data-ws-show-if-state="subscriptionId=true" style="position: relative">
  <div class="Modal" id="subscriptionModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;">
      <button data-ws-hide-all=".Modal" class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px 30px;text-align: center">
        <h4 style="text-align: center">Gestionați abonamentul<!-- Manage Subscription --></h4>
        <div data-ws-show-if-state="isPremium=true">
          <p style="font-size: 1em;text-align: center">ℹ️ ID abonament<!-- Subscription id -->: <b><span data-ws-label-state="subscriptionId"></span></b></p>
          <p style="line-height: 1.8em;margin: 10px;"><a href="https://docs.google.com/forms/d/e/1FAIpQLSc-gAEGNiCixhSjTjkJXu3cYSqDJYEMa9vPzRPKnY6Pei_yrQ/viewform?usp=sf_link" target="_blank" style="text-decoration: none;">Probleme? Întrebări? Contactați-ne (deschide un formular de contact premium într-o fereastră nouă)<!-- Issues? Questions? Contact us (opens a premium contact form in new window) --></a></p>
          <br/>
          <p style="color: red;line-height: 1.8em;margin: 10px;">ZONĂ DE PERICOL<!-- DANGER ZONE --></p>
          <p style="color: red; cursor: pointer; padding: 5px 10px; border: red 1px solid; border-radius: 20px; line-height: 1.8em;margin: 10px;" onclick="cancelSubscription();">Anulați abonamentul. Făcând clic pe acest buton, veți pierde imediat statutul premium.<!-- Cancel subscription. Clicking this will result in losing your premium status - taking effect immediately. --></p>
        </div>
        <div data-ws-show-if-state="isPremium=false">
          <br/>
          <p style="font-size: 1em;text-align: center">Acum nu sunteți abonat la Premium<!-- You are now not subscribed to Premium --></p>
        </div>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>
  </div>

  <!--<div class="Modal" id="mp3GuideModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h3>Cum să generați fișiere mp3 din text cu TTSReader?&lt;!&ndash; How to generate mp3 files from text with TTSReader? &ndash;&gt;</h3>
      <div class="videowrapper">
        <iframe style="display:block" src="https://www.youtube.com/embed/Xq09r01GetQ" title="YouTube video player - Generate audio mp3 files from synthesized speech with TTSReader" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      </div>
      <br/>
    </div>
    <div style="height:20px;"></div>
  </div>-->

  <div class="Modal" id="helpModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 90vh;">
      <button class="Close-modal"><svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>
      <div>
        <img id="helpImgId" data-src="images/help.png" style="max-width: 95%;
    margin: auto;
    max-height: 90vh;
    border: orangered 2px solid;
    border-radius: 10px;">
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="moreVoices" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow-y: auto;max-height: 90%;text-align: justify;">
        <h3 style="text-align: center">Mai multe voci<!-- More Voices --></h3>

        <p style="text-align: center"><a href="#" onclick="appMethods.showModal('voicesModal');">Click here to preview & select a voice available on your browser</a></p>
        <br/>
        <!--<p style="text-align: center"><b>Other voices on other browsers</b></p>
        <div data-ws-show-if-state="os=win">
          <div data-ws-show-if-state="isChrome=true">
            <p>Mai multe voci sunt disponibile atunci când utilizați TTSReader în browserul Edge. În special - Christopher și Michelle sunt excepționali!&lt;!&ndash; More voices are available when using TTSReader on the Edge browser. Specifically - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
          </div>
          <div data-ws-show-if-state="isChrome=false">
            <p>Mai multe voci sunt disponibile atunci când utilizați TTSReader în browserele Chrome / Edge. În special - în Chrome - Noah este recomandarea noastră. În Edge - Christopher și Michelle sunt amândoi excepționali!&lt;!&ndash; More voices are available when using TTSReader on Chrome / Edge browsers. Specifically - on Chrome - Noah is our recommendation. On Edge - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
          </div>
        </div>
        <div data-ws-show-if-state="os=mac">
          <p>Mai multe voci sunt disponibile atunci când utilizați TTSReader în browserele Chrome / Edge. În special - în Chrome - Noah este recomandarea noastră. În Edge - Christopher și Michelle sunt amândoi excepționali!&lt;!&ndash; More voices are available when using TTSReader on Chrome / Edge browsers. Specifically - on Chrome - Noah is our recommendation. On Edge - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
        </div>
        <div>
          <p style="font-weight: bold">Iată câteva dintre vocile disponibile:&lt;!&ndash; Here are some of the available voices: &ndash;&gt;</p>
          <p><u>Pe Edge:&lt;!&ndash; On Edge: &ndash;&gt;</u></p>
          <div>Christopher: <audio style="vertical-align: middle" controls src="audio/Christopher.mp3" preload="metadata"/></div>
          <br/>
          <div>Michelle: <audio controls src="audio/Michelle.mp3" preload="metadata"/></div>
          <br/>
          <p><u>Pe Chrome:&lt;!&ndash; On Chrome: &ndash;&gt;</u></p>
          <div>Noah: <audio controls src="audio/Noah.mp3" preload="metadata"></audio></div>
          <br/>
          <div>Lily: <audio controls src="audio/Lily.mp3" preload="metadata"></audio></div>
          <br/>
        </div>-->
        <p><b>SAPI5 (custom / locally installed) Voices Supported</b></p>
        <p>Utilizarea vocilor SAPI5 personalizate este posibilă pe Windows folosind browserul Firefox.<!-- Using custom SAPI5 voices is possible on Windows using Firefox browser. --></p>
        <p><a target="_blank" href="/blog/exciting-news-use-custom-sapi5-voices-on-ttsreader/">See how to use SAPI5 voices with TTSReader</a></p>
        <p>Pe dispozitivele mobile, veți găsi mai multe voci folosind aplicațiile noastre mobile text-to-speech<!-- On mobile, you will find more voices using our --> <a href="/mobile/" target="_blank">aplicații mobile text-to-speech<!-- text-to-speech mobile apps --></a></p>
        <p>Lucrăm pentru a face disponibile și mai multe voci pentru utilizatorii Premium<!-- We're working on making even more voices available for Premium users --></p>
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="addPauseModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 100vh;">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow-y: auto;max-height: 90%;text-align: center;">
        <h3>Adăugați cronometru de pauză la citire<!-- Add Pause Reading Timer --></h3>
        <p>Copiați următoarea linie și lipiți-o în text. Editați durata pauzei în milisecunde.<!-- Copy the following line and paste into the text. Edit the duration of the pause in milliseconds. --></p>
        <br/>
        <code>{{pause:1000}}</code>
        <br/>
        <a style="text-decoration: none;" class="Link-btn" data-ws-toggle="#addPauseModal" onclick="navigator.clipboard.writeText('\n{{pause:1000}}\n')">
          <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
            <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
          </svg>&nbsp;Copiază<!-- Copy -->
        </a>
        <br/><br/><br/>
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="shareModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 100vh;">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div>
        <p><a href="https://www.facebook.com/sharer.php?u=https://ttsreader.com/player/" target="_blank">Distribuie pe Facebook<!-- Share on Facebook --></a></p>
        <p><a href="https://twitter.com/intent/tweet?url=https://ttsreader.com/player/" target="_blank">Distribuie pe Twitter<!-- Share on Twitter --></a></p>
        <p><a href="https://api.whatsapp.com/send?text=https://ttsreader.com/player/" target="_blank">Distribuie pe WhatsApp<!-- Share on WhatsApp --></a></p>
        <p><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ttsreader.com/player/" target="_blank">Distribuie pe LinkedIn<!-- Share on LinkedIn --></a></p>
        <p><a href="#" onclick="copy('https://ttsreader.com/player/');">Copiază linkul<!-- Copy link --></a></p>
      </div>
    </div>
  </div>

  <div class="Modal" id="processingModal" style="display: none; flex-direction: column; align-items: center; justify-content: center;">
    <div style="flex: 1"></div>
    <div class="Modal-content" style="max-width: 100%; max-height: 100vh; text-align: center;">
      <p>În procesare... ETA:</p>
      <p id="processingTimer" style="font-size: 1.2em;font-weight: bold">01:00</p>
      <p><b>- VĂ RUGĂM SĂ MENȚINEȚI ACEASTĂ FILĂ DESCHISĂ -</b></p>
    </div>
    <div style="flex: 1"></div>
  </div>

</div>


<script>
  function copy(text) {
    navigator.clipboard.writeText(text).then(function() {
      console.log('Copied!');
    }, function() {
      console.log('Copy error')
    });
  }

  function share() {
    const shareData = {
      title: "TTSReader",
      text: "Listen to any text with TTSReader. AI powered natural sounding voices.",
      url: "https://ttsreader.com/player/",
    };

    navigator.share(shareData)
            .then(() => console.log('Share was successful.'))
            .catch((error) => console.log('Sharing failed', error));
  }

  function loadImages(selector) {
    document.querySelectorAll(selector).forEach((el)=>{
      if (!el.getAttribute('src')) {
        el.setAttribute('src', el.getAttribute('data-src'));
      }
    });
  }

  /*var ce = document.querySelector('[contenteditable]')
  ce.addEventListener('paste', function (e) {
    e.preventDefault()
    var text = e.clipboardData.getData('text/plain')
    document.execCommand('insertText', false, text)
  })*/

  document.querySelectorAll('.Modal').forEach((el)=>{
    el.addEventListener('click',((evt) => {
      if (!evt.target.closest('.Modal-content')) {
        evt.target.closest('.Modal').style.display = "none";
      }
    }));
  });

  document.querySelectorAll('.Close-modal').forEach((el)=>{
    el.addEventListener('click',((evt) => {
      evt.target.closest('.Modal').style.display = "none";
    }));
  });

  if (window.matchMedia( "(hover: none)" ).matches) {
    // hover unavailable
    document.addEventListener('click', ({ target }) => {
      if (!target.closest('.Dropdown-content')) {
        document.querySelectorAll('.Dropdown-content').forEach((el)=>{
          el.style.display = 'none';
          document.querySelector('.Text-box').setAttribute('contentEditable',true);
        })
      }
    });

    document.querySelectorAll('.Dropdown-header').forEach((el)=>{
      if (el instanceof Element) {
        el.addEventListener('click',(ev)=>{
          if (ev.target.closest('.Dropdown-content')) {
            return;
          }
          let child = el.querySelector('.Dropdown-content');
          let textBox = document.querySelector('.Text-box');
          if (getComputedStyle(child).display!=="none") {
            child.style.display = 'none';
            textBox.setAttribute('contentEditable',true);
          } else {
            child.style.display = 'block';
            textBox.removeAttribute('contentEditable');
            ev.preventDefault();
            ev.stopPropagation();
          }
        });
      }
    })
  }

  function sendAnalyticsEvent(name) {
    let pre = "ttsreader_player_";
    if (gtag) {
      gtag('event', pre + name, {'value': "1"});
    }
  }

  function feedback(value) {
    if (gtag) {
      gtag('event', value>0 ? "feedback_good" : "feedback_bad", {
        'value': value>0 ? "good" : "bad"
      });
    }

    if (value<0) {
      window.open("https://docs.google.com/forms/d/e/1FAIpQLSecnm9ZnFje9S6OSSQqP4Ts4av-hSmhAUbuLvQAojWUdckAtg/viewform?usp=sf_link","_blank");
    } else {
      alert('Vă mulțumim pentru feedback ❤️');
    }
  }
</script>

<div id="area" style="height: 0;width: 0; visibility: hidden"></div>

<script>
  /*
  This script is for sign-in and for premium status.
   */
  let currentAudioInJobs = null;
  let currentPlayButtonInJobs = null;
  const exportsRowsContainer = document.getElementById('exportsRowsContainer');
  const rowTemplate = document.getElementById('exportsListItemTemplate');

  const voiceToName = {
    "en-US-AndrewMultilingualNeural": "John",
    "it-IT-MarcelloMultilingualNeural": "Marcello",
    "de-DE-SeraphinaMultilingualNeural": "Seraphina",
  }

  function getNameFromVoiceUri(voiceUri) {
    if (voiceToName[voiceUri]) {
      return voiceToName[voiceUri];
    }

    let parts = voiceUri.split(".");
    // find largest part:
    let largestPart = parts.reduce((a, b) => a.length > b.length ? a : b);
    parts = largestPart.split("-");
    // find largest part again:
    largestPart = parts.reduce((a, b) => a.length > b.length ? a : b);

    largestPart = largestPart.replace("Multilingual","").replace("Neural", "").replace("Standard", "").replace("Premium", "").replace("Expressive", "").replace("Enhanced", "");
    return largestPart;
  }

    // Handle cases like "Google UK

  function getFlagForLocaleCode(code, voiceUri) {
    if (code === undefined || code === "") {
      return "";
    }

    if (code==="i18n") {
      return "🌎";
    }

    if (code.includes("-")) {
      // Handle locale codes like "en-US", "fr-FR", etc.
      code = code.split("-")[1];
    } else if (code.includes("_")) {
      // Handle locale codes like "en_US", "fr_FR", etc.
      code = code.split("_")[1];
    } else {
      // code is only lang, no country - get country from voiceUri
      if (code==="en") {
        if (voiceUri.includes("en-US")) {
          code = "US";
        } else if (voiceUri.includes("en-GB")) {
          code = "GB";
        } else if (voiceUri.includes("en-AU")) {
          code = "AU";
        } else if (voiceUri.includes("en-CA")) {
          code = "CA";
        } else if (voiceUri.includes("en-IN")) {
          code = "IN";
        } else if (voiceUri.includes("en-NZ")) {
          code = "NZ";
        } else if (voiceUri.includes("en-ZA")) {
          code = "ZA";
        } else {
          code = "US"; // Default if no specific country is found
        }
      } else if (code==="fr") {
        if (voiceUri.includes("fr-FR")) {
          code = "FR";
        } else if (voiceUri.includes("fr-CA")) {
          code = "CA";
        } else {
          code = "FR"; // Default if no specific country is found
        }
      } else if (code==="es") {
        if (voiceUri.includes("es-ES")) {
          code = "ES";
        } else if (voiceUri.includes("es-MX")) {
          code = "MX";
        } else if (voiceUri.includes("es-US")) {
          code = "US";
        } else {
          code = "MX"; // Default if no specific country is found
        }
      }
    }

    if (code === null || code.length !== 2) {
      return code ? code.substring(0,3) : "";
    }

    code = code.toUpperCase();

    if (code==="IL") {
      return "🇮🇱";
    }

    if (code==="PS") {
      return "🇵🇸";
    }

    let sb = "";
    const a = String.fromCodePoint(code.codePointAt(0) - 0x41 + 0x1F1E6);
    const b = String.fromCodePoint(code.codePointAt(1) - 0x41 + 0x1F1E6);
    return a + b;
  }

  function startCountdown(row, job) {
    const etaSeconds = job.estimatedTimeInSecs || 10;
    const startTime = job.createdAt;
    const endTime = startTime + etaSeconds * 1000;

    const stateEl = row.querySelector('.job-state');

    function updateCountdown() {
      const now = Date.now();
      let remaining = Math.max(0, Math.floor((endTime - now) / 1000)); // in seconds

      const minutes = String(Math.floor(remaining / 60)).padStart(2, '0');
      const seconds = String(remaining % 60).padStart(2, '0');

      stateEl.textContent = `În procesare. ETA: ${minutes}:${seconds}`;

      if (remaining <= 0) {
        if (timer) {
        clearInterval(timer);
        }
        stateEl.textContent = 'Finalizare...'; // or "Done", depending on your app logic
      }
    }

    const timer = setInterval(updateCountdown, 1000);
  }

  function renderJobRow(job) {
    const clone = rowTemplate.content.cloneNode(true);
    const row = clone.querySelector('.job-row');

    /*
      <div class="job-row">
          <span class="job-date"></span>
          <div class="job-preview flex-fill"></div>
          <span class="voice-lang Flag-font" title="Language & accent">🇬🇧</span>
          <span class="voice-name">David</span>
          <div class="job-rate"></div>
          <span class="job-state"></span>
          <span class="job-download-btn"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg></span>
      </div>
     */
    const downloadLink = clone.querySelector('.job-download-link');
    downloadLink.setAttribute("data-ws-job-id", job.id);
    row.querySelector('.job-date').textContent = new Date(job.createdAt).toLocaleDateString();
    row.querySelector('.job-preview').textContent = job.previewText || '';
    row.querySelector('.voice-lang').textContent = getFlagForLocaleCode(job.lang, job.voiceURI);
    row.querySelector('.voice-name').textContent = getNameFromVoiceUri(job.voiceURI);
    row.querySelector('.job-rate').textContent = job.rate;

    if (job.statusCode==="Done") {
      row.querySelector('.job-state').remove();
    } else {
      row.querySelector('.job-download-btn').remove();
      if (job.statusCode==="Processing") {
        let estimatedTimeInSecs = 10 + Math.floor(job.requestedChars * 70/15000);
        //row.querySelector('.job-state').textContent = "Processing. ETA: " + new Date(job.createdAt + estimatedTimeInSecs * 1000).toLocaleTimeString();
        job.estimatedTimeInSecs = estimatedTimeInSecs;
        startCountdown(row, job);
      } else {
        row.querySelector('.job-state').textContent = job.statusCode;
      }
    }


    if (job.mp3Url) {
      downloadLink.href = job.mp3Url.split('?')[0];
      downloadLink.setAttribute('download', job.fileName || `ttsreader-${job.id}.mp3`);
    } else {
      downloadLink.href ="javascript:alert('Jobul nu este încă gata, vă rugăm să așteptați finalizarea procesării.');";
      downloadLink.removeAttribute('target');
    }

    // If exportsRowsContainer contains a row with [data-ws-job-id] equal to job.id, replace it with the new row.
    // Otherwise, append the new row.

    if (exportsRowsContainer.querySelector(`[data-ws-job-id="${job.id}"]`)) {
      const existingRow = exportsRowsContainer.querySelector(`[data-ws-job-id="${job.id}"]`);
      exportsRowsContainer.replaceChild(clone, existingRow);
      if (job.mp3Url && !existingRow.querySelector('.job-download-btn')) {
        // IE newly available link:
        downloadLink.click();
      }
    } else {
      // 'Append' to be the first child:
      exportsRowsContainer.insertBefore(clone, exportsRowsContainer.firstChild);
    }
  }

  window.getIdToken = async () => null;

  let clockStartedOn = Date.now();
  function stopper() {
    return Math.round((Date.now()-clockStartedOn)/1000) + ": ";
  }

  function fetchJsFile(url, callback) {
    let newEl = document.createElement('script');
    newEl.src=url;
    newEl.onload = function(){
      if (callback) {
        callback();
      }
    };
    document.getElementsByTagName("head")[0].appendChild(newEl);
  }

  if (document.readyState == "loading") {
    // Still loading, no need for optional added scripts. Wait.
    console.log(stopper() + 'Script awaiting to load all DOM');
    addEventListener('DOMContentLoaded', (event) => {
      runPostLoadScript();
    });
  } else {
    console.log(stopper() + 'Loading script right away');
    runPostLoadScript();
  }

  function runPostLoadScript() {

    console.log(stopper() + 'Loading script post DOM');

    let srcs = [
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js",
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js",
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js",
      "https://unpkg.com/mammoth/mammoth.browser.min.js"
    ]

    let loadedScripts = 0;
    function onScriptLoaded() {
      loadedScripts++;
      if (loadedScripts==srcs.length) {
        runDependentScript();
      } else {
        fetchJsFile(srcs[loadedScripts], onScriptLoaded);
      }
    }

    fetchJsFile(srcs[0], onScriptLoaded);

    function runDependentScript() {
      let firebaseConfig = {
        apiKey: "AIzaSyDqtWayB72nqpH81RMSEgUzFDN1ES0hrcY",
        authDomain: "ttsreader.com",
        databaseURL: "https://ttsreader.firebaseio.com",
        projectId: "ttsreader",
        messagingSenderId: "656667743185"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      firebase.auth().onAuthStateChanged(function(user) {
        //window.globalMethods.closeModalById("modalSigninVertical");
        console.log(stopper() + 'user signed ' + (user ? "IN" : "OUT"));

        if (user) {
          window.getIdToken = async () => {
            return await user.getIdToken();
          }

          localStorage.setItem("ttsreader.wasSignedIn", "true");
          // Remove the "data-is-signed-out" attribute from the html tag:
          document.documentElement.removeAttribute("data-is-signed-out");
          closeOnboarding();

          // User is signed in.
          window.updateStateWithParentData({
            wasAuthReceived: true,
            uid: user.uid,
            email: user.email,
            ronenMock: true,
          });
          window.uid = user.uid;
          initDbListeners(user.uid);
        } else {
          // User signed out.
          window.getIdToken = async () => null;
          localStorage.removeItem("ttsreader.wasSignedIn");
          // Set the "data-is-signed-out" attribute to the html tag:
          document.documentElement.setAttribute("data-is-signed-out", "true");

          window.updateStateWithParentData({
            serverData: null,
            isPremium: false,
            wasAuthReceived: false,
            uid:  "",
            email: "",
            ronenMock: {key: true},
          });
          window.uid = null;
          if (window.getAppState && !getAppState().data.isPremium) {
            // injectAds();
          }
        }
      });
    }
  }

  function hashFromString(str) {
    let hash = 0,
            i, chr;
    if (str.length === 0) return hash;
    for (i = 0; i < str.length; i++) {
      chr = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + chr;
      hash |= 0; // Convert to 32bit integer
    }
    return hash;
  }

  async function cancelSubscription() {
    if (!window.subscriptionId) {
      alert('Nu există abonament de anulat. Dacă credeți că este o eroare, vă rugăm să ne contactați prin formular sau la contact@ttsreader.com');
      return;
    }

    if (confirm('Are you sure you want to cancel your subscription?')) {
      let url = "https://us-central1-ttsreader.cloudfunctions.net/cancelPremiumSubscription";  // Production
      //let url = "http://127.0.0.1:5001/ttsreader/us-central1/cancelPremiumSubscription"; // Local testing
      const subId = window.subscriptionId;
      const authToken = await window.getIdToken();

      fetch(url, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${authToken}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ subId })
      })
              .then(async (response) => {
                const text = await response.text();
                if (!response.ok) {
                  alert("Error: " + response.status + " - " + text);
                  throw new Error(text || "Unknown error");
                }
                // Success
                alert("Acțiune finalizată cu succes");
              })
              .catch((error) => {
                // Failure
                console.error("Request failed:", error);
                alert("An error occurred: " + error.message);
              });
    }
  }

  function confirmUploadSucceeded() {
    openOrCloseExportsListModal();
    appMethods.closeModal('uploadModal');
    appMethods.showModal('uploadSuccessModal');
    window.isWaitingForUploadConfirmation = false;
  }

  async function initDbListeners(uid) {

    // Listen to 'users' data: TODO...
    /*firebase.database().ref('/users/' + uid).on('value', (snapshot) => {
      let data = snapshot.val();
      console.log(stopper() + 'got user data from db: ', data);
      // If we need anything from the user data, we can use it here.
      // In the future - this would be the place to sync between devices.
    });*/

    // Listen to the new plans path.
    // If none - then fetch legacy data. If data there - then call sync plans once.
    firebase.database().ref('/users_server_data/' + uid).on('value', async (snapshot) => {
      let data = snapshot.val();
      let wasLegacyPlanFound = false;

      if (!localStorage.getItem('wasBWCompatRun') && (!data || Object.keys(data).length === 0 || !data.currentPremiumPlan || Object.keys(data.currentPremiumPlan).length === 0)) {
        // No new plan found.

        console.log(stopper() + 'No server data found for user: ' + uid);
        // Let's see if there's legacy data to sync:

        const subsSnapshot = await firebase.database().ref('/subs/' + uid).once('value');
        const subsData = subsSnapshot.val();
        if (!subsData || Object.keys(subsData).length === 0) {
          // Continues to 'purchases':
          const purchasesSnapshot = await firebase.database().ref('/purchases/' + uid).once('value');
          const purchasesData = purchasesSnapshot.val();
          if (purchasesData && Object.keys(purchasesData).length > 0) {
            wasLegacyPlanFound = true;
          }
        } else {
          wasLegacyPlanFound = true;
        }
      }

      if (!data || Object.keys(data).length===0) {
        data = true; // A simple flag to indicate that the data was fetched, although empty.
      }
      updateStateWithParentData({serverData: data || true});
      if (wasLegacyPlanFound) {
        // Sync plans:
        setBackwardsCompatibilityQuotas();
      }
    });

    let jobsRef = firebase.database().ref('/exports/' + uid);

    // On child added listener, sort by createdAt descending:
    jobsRef.orderByChild('createdAt').on('child_added', (snapshot) => {
      const jobData = snapshot.val();
      if (!jobData || typeof jobData.createdAt !== 'number') return;

      const job = {
        id: snapshot.key,
        ...jobData
      };

      // Render the new job row:
      renderJobRow(job);
      let createdAt = job.createdAt || 0;
      if (window.isWaitingForUploadConfirmation && job.statusCode === "Processing" && ((Date.now() - createdAt) < (1000*60*5))) {
        // If we are waiting for upload confirmation and the job is done, confirm it:
        confirmUploadSucceeded();
      }
    });

    // Add onchild change listener to update existing jobs:
    jobsRef.on('child_changed', (snapshot) => {
      console.log('Job changed:', snapshot.key);
      const jobData = snapshot.val();
      if (!jobData || typeof jobData.createdAt !== 'number') return;

      const job = {
        id: snapshot.key,
        ...jobData
      };

      // Render the updated job row - it will replace the existing one:
      renderJobRow(job);
    });


    /*firebase.database().ref('/exports/' + uid).on('value',
            async (snapshot) => {
              try {
                const data = snapshot.val();

                if (!data || typeof data !== 'object') {
                  jobs = [];
                  return;
                }

                jobs = Object.entries(data)
                        .map(([jobId, jobData]) => {
                          if (!jobData || typeof jobData.createdAt !== 'number') return null;

                          return {
                            jobId,
                            ...jobData
                          };
                        })
                        .filter(job => job !== null) // remove invalid entries
                        .sort((a, b) => b.createdAt - a.createdAt);

                if (jobs.length>0) {
                  document.getElementById("exportsRowsContainer").innerHTML = ""; // Clear the previous jobs list
                }
                // console.log('Updated jobs list:', jobs);
                // TODO: Update the UI with the new jobs list.
                for (const job of jobs) {
                  renderJobRow(job);
                }
              } catch (err) {
                console.error('Error processing jobs snapshot:', err);
                jobs = [];
              }
            },
            (error) => {
              console.error('Firebase listener error:', error);
            }
    );*/
  }

  async function setBackwardsCompatibilityQuotas() {
    try {
      const user = firebase.auth().currentUser;
      if (!user) {
        return;
      }

      const idToken = await user.getIdToken();

      const response = await fetch("https://us-central1-ttsreader.cloudfunctions.net/functionArrangePastPayments", {
        method: "GET", // Or "POST" if your function expects POST
        headers: {
          "Authorization": `Bearer ${idToken}`
        }
      });

      if (!response.ok) {
        const errText = await response.text();
        return;
      }

      const responseMessage = await response.text();
      console.log("Function response: ", responseMessage);

      localStorage.setItem('wasBWCompatRun', true);
      return responseMessage;
    } catch (err) {
      console.error("Failed to call setBackwardsCompatibilityQuotas:", err);
    }
  }

  function getOs() {
    if (!window.navigator) {
      return "unknown";
    }

    let userAgentLowerCaseString = ("" + navigator.userAgent + " " + navigator.platform + " " + navigator.userAgentData).toLowerCase();

    if (/android/i.test(userAgentLowerCaseString)) {
      return "android";
    }

    if (/mac/i.test(userAgentLowerCaseString) && "ontouchend" in document) {
      return "ios";
    }

    if (/ipad|iphone|ipod|ios/i.test(userAgentLowerCaseString)) {
      return "ios";
    }

    if (/mac/i.test(userAgentLowerCaseString)) {
      return "mac";
    }

    if (/win/i.test(userAgentLowerCaseString)) {
      return "win";
    }

    return "unknown"
  }

  function injectAds() {
    let isSafari = window.safari !== undefined;
    let isIos = getOs() === 'ios';
    let DISABLE_ADS = true;

    if (DISABLE_ADS || isSafari || isIos) {
      // TODO: Inject static images links to amazon, or write about premium advantages with a call to action button...
      return;
    } else {
      // Actually inserting ads:
      document.documentElement.removeAttribute('data-no-ads');
      // Inject Adsense:
      let newScriptEl = document.createElement('script');
      newScriptEl.setAttribute("src", "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626");
      newScriptEl.setAttribute("async", "true");
      newScriptEl.setAttribute("crossorigin", "anonymous");
      document.getElementsByTagName("head")[0].appendChild(newScriptEl);
      (adsbygoogle = window.adsbygoogle || []).push({});
    }
  }

  function toggleSignIn() {
    var user = firebase.auth().currentUser;
    //console.log("user " , user);

    if (user) {
      // User is signed in.
      signOut();
    } else {
      // No user is signed in.
      signIn();
    }
  }

  function signInIfNeeded() {
    /*let uid = firebase.auth().currentUser ? firebase.auth().currentUser.uid : null;
    if (!uid) {
      signIn();
    }*/
  }

  async function sendWelcome() {
    try {
      let idToken = await firebase.auth().currentUser.getIdToken();
      const response = await fetch('https://us-central1-ttsreader.cloudfunctions.net/welcome', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${idToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name: 'value' })
      });

      if (!response.ok) {
        const errorText = await response.text();
        throw new Error(`HTTP ${response.status} – ${errorText}`);
      }

      const data = await response.json();
      console.log('Success:', data);
      return data;
    } catch (err) {
      console.error('Error:', err.message);
      return null;
    }
  }

  function signOut() {
    firebase.auth().signOut();
  }

  function signIn() {
    let provider = new firebase.auth.GoogleAuthProvider();
    provider.setCustomParameters({
      prompt: 'select_account'  // 🔑 This forces the account selection UI
    });
    firebase.auth().signInWithPopup(provider).then(function(result) {
      // This gives you a Google Access Token. You can use it to access the Google API.
      let token = result.credential.accessToken;
      // The signed-in user info.
      let user = result.user;
      let isNewUser = result.additionalUserInfo.isNewUser;
      if (isNewUser) {
        try {
          sendWelcome();
        } catch (err) {
          console.error('Error on isNewUser: ', err.message);
        }
      }
    }).catch(function(error) {
      // Handle Errors here.
      let errorCode = error.code;
      let errorMessage = error.message;
      // The email of the user's account used.
      let email = error.email;
      // The firebase.auth.AuthCredential type that was used.
      let credential = error.credential;
      // ...
    });
  }
</script>

<script>
  function getUrl(url) {
    fetch(url).then(function(response) {
      return response.text();
    }).then(function(data) {
      console.log(data);
    }).catch(function(err) {
      console.log('Fetch Error :-S', err);
    });
  }
</script>

<script>

  let currentAudio = new Audio();

  document.querySelector(".Voices-Gallery").addEventListener('click',(ev) => {
    if (ev.target.closest("[data-ws-voiceURI]")?.getAttribute("data-ws-voiceURI")) {
      ev.stopPropagation();
      let voiceURI = ev.target.closest("[data-ws-voiceURI]")?.getAttribute("data-ws-voiceURI");
      if (!voiceURI) {
        return;
      }

      appMethods.handleVoiceChange({currentTarget: {value: voiceURI}});
      ev.target.closest('.Voices-Gallery').querySelectorAll('.selected').forEach((el)=> {
        el.classList.remove('selected');
      });
      ev.target.closest(".voice-tile").classList.add('selected');
      let audioSrc = ev.target.closest("[data-ws-voiceURI]").getAttribute("data-ws-audio-src");
      console.log(audioSrc);

      console.log(currentAudio.src.endsWith(audioSrc), currentAudio.src)
      console.log(currentAudio.paused)
      console.log(currentAudio.ended)

      let shouldSimplyStop = audioSrc && currentAudio.src.endsWith(audioSrc) && !currentAudio.paused && !currentAudio.ended;
      // Stop:
      currentAudio.currentTime = 0;  // Always restart from beginning
      currentAudio.pause();

      // Potentially play something else:
      if (!shouldSimplyStop) {
        appMethods.testVoice(null, voiceURI);
      }
    }
  });

  function openOnboarding() {
    document.getElementById('onboardingModal').style.display = 'flex';
    localStorage.removeItem("ttsreader.wasOnboarding3");
  }

  function closeOnboarding() {
    document.getElementById('onboardingModal').style.display = 'none';
    if (!localStorage.getItem("ttsreader.wasOnboarding3")) {
      // If we never did the onboarding, set the flag:
      appMethods.showModal("postOnboardingModal");
    }
    localStorage.setItem("ttsreader.wasOnboarding3", "true");
  }

  function isVoicePremium() {
    return appMethods.isVoicePremium();
  }

  function jumpToStep(el, index) {
    let parent = el.closest("[data-ws-step]")?.parentElement;
    if (parent) {
      parent.querySelectorAll("[data-ws-step]").forEach((el)=> {
        if (el.getAttribute("data-ws-step")===index) {
          el.style.display = "flex";
        } else {
          el.style.display = "none";
        }
      });
    }
  }

  function nextStep(el) {
    let currentStep = "" + el.closest("[data-ws-step]")?.getAttribute("data-ws-step");
    jumpToStep(el, "" + (Number.parseInt(currentStep) + 1));
  }

  function prevStep(el) {
    let currentStep = "" + el.closest("[data-ws-step]")?.getAttribute("data-ws-step");
    jumpToStep(el, "" + (Number.parseInt(currentStep) - 1));
  }

  const themeSwitches = document.querySelectorAll('.themeSwitch');
  if (document.documentElement.hasAttribute('data-dark-mode')) {
    themeSwitches.forEach((el)=>{
      el.setAttribute('checked', true);
    });
  }
  themeSwitches.forEach((themeSwitch)=>{
    themeSwitch.addEventListener('change', () => {
      if(themeSwitch.checked) {
        setUiToDarkModeAndBgTheme(true);
      } else {
        setUiToDarkModeAndBgTheme(false);
      }
    });
  });

  if (!localStorage.getItem("ttsreader.wasOnboarding3") && !localStorage.getItem("ttsreader.wasSignedIn")) {
    openOnboarding();
  }
  
  function closeNewUpgradeModal() {
    let modalEl = document.getElementById('newUpgradeModal');
    if (modalEl) {
      modalEl.classList.remove("show");
      modalEl.addEventListener("transitionend", () => {
        //modalEl.classList.add("hidden");
      }, { once: true });
    }
  }

  function openOrCloseExportsListModal(isToClose) {
    let modalEl = document.getElementById('exportsListModal');
    if (isToClose) {
      modalEl.classList.remove("show");
    } else {
      modalEl.classList.add("show");
      modalEl.classList.remove("hidden");
    }
  }

  function openNewUpgradeModal() {
    let uid = firebase?.auth()?.currentUser?.uid;
    if (!uid) {
      alert("Vă rugăm să vă autentificați mai întâi pentru a face upgrade contului.");
      signIn();
      return;
    }
    
    let modalEl = document.getElementById('newUpgradeModal');
    if (!modalEl) {
      console.error("Modal element not found");
      return;
    }
    
    let iframeEl = modalEl.querySelector('iframe');
    if (!iframeEl) {
      console.error("Iframe element not found in modal");
      return;
    }
    let lang = document.documentElement.getAttribute('lang') || 'en';
    let theme = document.documentElement.getAttribute('data-dark-mode') ? 'dark' : 'light';

    iframeEl.onload = function () {
      modalEl.classList.remove("hidden");
      requestAnimationFrame(() => modalEl.classList.add("show"));
    };
    iframeEl.src = `newUpgradeModal.${lang}.html?uid=${uid}&theme=${theme}&lang=${lang}&onClose=closeNewUpgradeModal&isPremiumPlanAlready=${window.getAppState().data.isPremiumPlan}`;
  }

</script>


<!-- JS STRINGS -->
<div id="JS_STRINGS" style="display: none">
  <div data-ws-string-key="alert_file_not_supported" data-ws-string-value="Tipul fișierului nu este suportat. Dacă este o eroare, vă rugăm să ne anunțați la contact@ttsreader.com"></div>
  <div data-ws-string-key="alert_quota_reached" data-ws-string-value="Cota a fost atinsă. Vă rugăm să verificați soldul, să cumpărați mai multe dacă este necesar prin Pay-As-You-Go sau să treceți la una dintre vocile gratuite și nelimitate."></div>
  <div data-ws-string-key="alert_copied" data-ws-string-value="Copiat în clipboard."></div>
  <div data-ws-string-key="alert_missing_credits" data-ws-string-value="Nu sunt suficiente credite pentru a finaliza cererea dvs."></div>
  <div data-ws-string-key="alert_requires_premium" data-ws-string-value="Această funcție nouă necesită premium. Vă rugăm să faceți upgrade mai întâi. Puteți anula oricând și avem o politică de satisfacție garantată 100%."></div>
  <div data-ws-string-key="alert_export_too_long" data-ws-string-value="Text prea lung. Vă rugăm să împărțiți textul în părți, astfel încât fiecare parte să aibă mai puțin de 200k caractere pentru dimensiuni rezonabile ale fișierului audio."></div>
  <div data-ws-string-key="alert_export_limited" data-ws-string-value="Ne pare rău, vocea selectată poate fi exportată până la 6k caractere. Deci, fie scurtați textul la 6k caractere, fie treceți la o voce care suportă exportul pentru texte lungi. Vocile care suportă asta sunt toate premium ** EXCEPȚIE: NOAH, LILLY, OLIVIA. **"></div>
  <div data-ws-string-key="alert_export_premium_voice" data-ws-string-value="Funcția de export este disponibilă doar pentru vocile premium. Vă rugăm să selectați o voce premium (marcată cu o stea ⭐) pentru a continua sau folosiți în schimb butonul 'RECORD ◉'."></div>
  <div data-ws-string-key="alert_no_text_to_export" data-ws-string-value="Caseta de text este goală. Tastați, lipiți sau încărcați mai întâi textul."></div>
  <div data-ws-string-key="alert_paste_to_editor" data-ws-string-value="Lipiți-l în editor, în locul unde doriți să funcționeze."></div>
  <div data-ws-string-key="alert_new_payment_received" data-ws-string-value="Plata a fost primită și înregistrată în contul dvs."></div>
  <div data-ws-string-key="alert_unknown_tts_error" data-ws-string-value="A apărut o eroare în timpul redării textului, astfel am întrerupt redarea. Vă rugăm să verificați conexiunea la internet și să încercați din nou. Dacă problema persistă, încercați să reîmprospătați pagina. Dacă problema persistă, vă rugăm să ne anunțați la contact@ttsreader.com."></div>
  <div data-ws-string-key="alert_remove_setters_to_export" data-ws-string-value="Vă rugăm să eliminați orice setări de voce / viteză din text înainte de export. Acestea nu sunt suportate în fișierul MP3 exportat. Setările sunt în format {{set:...}}."></div>
  <div data-ws-string-key="app_js__processing_finished" data-ws-string-value="Procesarea s-a încheiat. Verificați lista de exporturi. Pentru orice problemă, vă rugăm să ne contactați la contact@ttsreader.com"></div>
  <div data-ws-string-key="app_js__invalid_url" data-ws-string-value="URL invalid"></div>
</div>
<!-- end of JS STRINGS -->

</body>
</html>
