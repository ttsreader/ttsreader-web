<!DOCTYPE html>
<html dir="" lang="ko" data-test-audio-playing="ttsreaderServer.gcp.en-US-Chirp-HD-D" data-dark-mode data-no-ads data-is-signed-out>
<head>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "TTSReader Text to Speech Player V3",
      "description": "Listen to any text with the highest-quality expressive AI voices. TTSReader's Player is a free online text to speech reader that supports multiple languages and voices. It allows you to listen to your text, save it as an audio file, and even share it with others.",
      "applicationCategory": "WebApplication",
      "operatingSystem": "All",
      "browserRequirements": "Requires JavaScript",
      "url": "https://ttsreader.com/player/",
      "datePublished": "2023-05-01T00:00:00+00:00",
      "dateModified": "2026-01-06T16:03:27.557Z",
      "version": "3.10.6",
      "publisher": {
        "@type": "Organization",
        "name": "TTSReader - Text To Speech by WellSource Ltd.",
        "url": "https://ttsreader.com"
      }
    }
  </script>
  <!-- Include Quill stylesheet -->
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />
    <!-- Include the Quill library -->
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
    <link href="widget.css" rel="stylesheet">
    <script src="widget.js"></script>

    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#a51b14" />
  <meta
          name="description"
          content="TTSReader's Player - Free Online Text to Speech Reader"
  />
  <link rel="apple-touch-icon" href="/favicon2.svg" />
  <!--
    manifest.json provides metadata used when your web app is installed on a
    user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
  -->
  <link rel="manifest" href="manifest.json" />
  <!--
    Notice the use of . in the tags above.
    It will be replaced with the URL of the `public` folder during the build.
    Only files inside the `public` folder can be referenced from the HTML.

    Unlike "/favicon.ico" or "favicon.ico", "./favicon.ico" will
    work correctly both with client-side routing and a non-root public URL.
    Learn how to configure a non-root public URL by running `npm run build`.
  -->
  <title>TTSReader V3.10.6 - TTSReaderì˜ í…ìŠ¤íŠ¸ ìŒì„± ë³€í™˜ í”Œë ˆì´ì–´</title><!-- TTSReader's Text to Speech Player -->

  <!-- Google Analytics: -->
  <!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-47292499-3"></script>-->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-47292499-3');
  </script>
  <!-- End of Google Analytics: -->

  <script>
    // Dark mode toggle:
    let storedTheme = localStorage.getItem('theme-player-only');
    let DEFAULT_THEME =  Math.random() < 0.5 ? 'dark-no-bg' : 'light-no-bg';

    if (!storedTheme) {
      let storedBlogTheme = localStorage.getItem('theme');

      if (!storedBlogTheme) {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          storedTheme = 'dark-no-bg';
        } else {
          storedTheme = DEFAULT_THEME;
        }
      } else {
        if (storedBlogTheme === 'dark') {
          storedTheme = 'dark-no-bg';
        } else {
          storedTheme = 'light-no-bg';
        }
      }
    }

    if (storedTheme === 'dark-no-bg') {
      window.setUiToDarkModeAndBgTheme(true, false);
    } else if (storedTheme === 'dark-bg') {
      window.setUiToDarkModeAndBgTheme(true, true);
    } else if (storedTheme === 'light-no-bg') {
      window.setUiToDarkModeAndBgTheme(false, false);
    } else if (storedTheme === 'light-bg') {
      window.setUiToDarkModeAndBgTheme(false, true);
    } else {
      window.setUiToDarkModeAndBgTheme(true, false);
    }

    // Drawer open
    let storedDrawerMode = localStorage.getItem('drawer-mode');
    if (!storedDrawerMode) {
      storedDrawerMode = 'closed'; // Default drawer setting if not set
    }

    if ((storedDrawerMode === 'open' || !storedDrawerMode) && window.matchMedia && window.matchMedia('(min-width: 800px)').matches && window.matchMedia('(min-height: 600px)').matches ) {
      toggleDrawerOpen();
    }

    function setUiToDarkModeAndBgTheme(isDark, isBg) {
      if (isBg===null || isBg===undefined) {
        isBg = document.documentElement.hasAttribute('data-theme-bg');
      }
      if (isDark && isBg) {
        document.documentElement.setAttribute('data-dark-mode','true');
        document.documentElement.setAttribute('data-theme-bg','true');
        localStorage.setItem('theme-player-only','dark-bg');
      } else if (isDark && !isBg) {
        document.documentElement.setAttribute('data-dark-mode','true');
        document.documentElement.removeAttribute('data-theme-bg');
        localStorage.setItem('theme-player-only','dark-no-bg');
      } else if (!isDark && isBg) {
        document.documentElement.removeAttribute('data-dark-mode');
        document.documentElement.setAttribute('data-theme-bg','true');
        localStorage.setItem('theme-player-only','light-bg');
      } else {
        document.documentElement.removeAttribute('data-dark-mode');
        document.documentElement.removeAttribute('data-theme-bg');
        localStorage.setItem('theme-player-only','light-no-bg');
      }
    }

    function toggleDrawerOpen() {
      let isOpen = document.documentElement.getAttribute('data-drawer-open')==='true';
      if (isOpen) {
        document.documentElement.removeAttribute('data-drawer-open');
        localStorage.setItem('drawer-mode','closed');
      } else {
        document.documentElement.setAttribute('data-drawer-open','true');
        localStorage.setItem('drawer-mode','open');
      }
    }

    function toggleTheme() {
      if (!window.setUiToDarkModeAndBgTheme) {
        console.log('no window.setUiToDarkModeAndBgTheme');
        return;
      }

      // dark -> dark+bg -> light -> light+bg -> dark
      let isDark = document.documentElement.getAttribute('data-dark-mode')==='true';
      let isBgImage = document.documentElement.getAttribute('data-theme-bg')==='true';

      if (isDark && isBgImage) {
        setUiToDarkModeAndBgTheme(false, false);
      } else if (isDark && !isBgImage) {
        setUiToDarkModeAndBgTheme(true, true);
      } else if (!isDark && !isBgImage) {
        setUiToDarkModeAndBgTheme(false, true);
      } else {
        setUiToDarkModeAndBgTheme(true, false);
      }
    }

    function getAddContentDropdownParts() {
      const dropdown = document.getElementById('addContentDropdown');
      if (!dropdown) return {};
      const trigger = dropdown.querySelector('.add-content-dropdown-trigger');
      const menu = dropdown.querySelector('.add-content-dropdown-menu');
      const items = menu ? Array.from(menu.querySelectorAll('[data-dropdown-item]')) : [];
      return { dropdown, trigger, menu, items };
    }

    function toggleAddContentDropdown() {
      const { menu } = getAddContentDropdownParts();
      if (!menu) return;
      const isOpen = menu.classList.contains('show');
      setAddContentDropdownVisibility(!isOpen);
    }

    function setAddContentDropdownVisibility(isOpen) {
      const { trigger, menu } = getAddContentDropdownParts();
      if (!menu || !trigger) return;

      menu.classList.toggle('show', isOpen);
      menu.hidden = !isOpen;
      trigger.setAttribute('aria-expanded', isOpen ? 'true' : 'false');

      if (isOpen) {
        // Delay to ensure current click does not immediately close.
        setTimeout(() => {
          document.addEventListener('click', handleAddContentClickOutside, true);
          document.addEventListener('focusin', handleAddContentFocusOutside, true);
          document.addEventListener('keydown', handleAddContentKeydown, true);
        }, 0);
        focusFirstAddContentItem();
      } else {
        document.removeEventListener('click', handleAddContentClickOutside, true);
        document.removeEventListener('focusin', handleAddContentFocusOutside, true);
        document.removeEventListener('keydown', handleAddContentKeydown, true);
      }
    }

    function openAddContentDropdown() {
      closeAllDropdowns();
      setAddContentDropdownVisibility(true);
    }

    function closeAddContentDropdown() {
      setAddContentDropdownVisibility(false);
    }

    function closeAllDropdowns() {
      const allDropdownMenus = document.querySelectorAll('.add-content-dropdown-menu');
      allDropdownMenus.forEach(menu => {
        menu.classList.remove('show');
        menu.hidden = true;
      });
      document.removeEventListener('click', handleAddContentClickOutside, true);
      document.removeEventListener('focusin', handleAddContentFocusOutside, true);
      document.removeEventListener('keydown', handleAddContentKeydown, true);

      const { trigger } = getAddContentDropdownParts();
      if (trigger) {
        trigger.setAttribute('aria-expanded', 'false');
      }
    }

    function handleAddContentClickOutside(event) {
      const { dropdown } = getAddContentDropdownParts();
      if (!dropdown || dropdown.contains(event.target)) return;
      closeAddContentDropdown();
    }

    function handleAddContentFocusOutside(event) {
      const { dropdown } = getAddContentDropdownParts();
      if (!dropdown || dropdown.contains(event.target)) return;
      closeAddContentDropdown();
    }

    function handleAddContentKeydown(event) {
      if (event.key === 'Escape') {
        closeAddContentDropdown();
        const { trigger } = getAddContentDropdownParts();
        if (trigger) trigger.focus();
      }
    }

    function handleDropdownAction(action) {
      closeAddContentDropdown();

      switch(action) {
        case 'openFile':
          // The file input will handle the file selection
          break;
        case 'importWebsite':
          console.log('Import website clicked');
          break;
        case 'clearText':
          console.log('Clear text clicked');
          if (window.clearTextArea) {
            window.clearTextArea();
          }
          break;
        default:
          console.log('Unknown action:', action);
      }
    }

    function handleDropdownItemActivation(event) {
      const targetItem = event.target.closest('[data-dropdown-item]');
      if (!targetItem) return;
      closeAddContentDropdown();
    }

    function handleDropdownItemKeydown(event) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        event.target.click();
      }
    }

    function focusFirstAddContentItem() {
      const { items } = getAddContentDropdownParts();
      if (items && items.length) {
        items[0].focus();
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const { trigger, menu, items } = getAddContentDropdownParts();

      if (menu) {
        menu.hidden = true;
        if (!menu.id) {
          menu.id = 'addContentDropdownMenu';
        }
        menu.setAttribute('role', 'menu');
        menu.addEventListener('click', handleDropdownItemActivation);
        menu.addEventListener('keydown', handleDropdownItemKeydown);
      }

      if (trigger) {
        trigger.setAttribute('type', 'button');
        trigger.setAttribute('aria-haspopup', 'true');
        trigger.setAttribute('aria-expanded', 'false');
        trigger.setAttribute('aria-controls', 'addContentDropdownMenu');
      }

      if (items && items.length) {
        items.forEach(item => {
          item.setAttribute('role', 'menuitem');
          item.setAttribute('tabindex', '-1');
        });
      }
    });
  </script>

  <style>

    .Toolbar-Button {
      stroke: black;
      color: black;
    }

    [data-dark-mode] .Toolbar-Button {
      stroke: white;
      color: white;
    }

    [data-dark-mode][data-theme-bg] .Toolbar-Button {
      stroke: black;
      color: black;
    }

    .css-container {
      container-type: inline-size;
    }

    .actions {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1.5rem auto;
      flex-direction: row; /* default: 3 in a row */
    }

    .action-card {
      width: 30%;
      max-width: 200px;
      aspect-ratio: 1 / 1;
      border-color: #60a5fa;
      border-radius: 16px;
      background: white;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      font-size: 1rem;
      text-align: center;
      transition: all 0.2s ease;
      color: #3b82f6;
    }

    .action-card .emoji {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .action-card:hover {
      background: #f5f9ff;
      border-color: orangered;
      box-shadow: 0 4px 12px rgba(255,99,0,0.3);
    }

    /* ğŸ‘‡ When the container (or viewport) is too narrow for all three side by side */
    @container (max-width: 500px) {
      .actions {
        flex-direction: column; /* stack all vertically */
      }
      .action-card {
        width: 90%;
        margin: auto;
        max-width: unset;
        aspect-ratio: unset;
      }
    }

    .TabsContainer .TabTitlesContainer {
      display: flex;
      margin-bottom: 0;
    }

    .TabsContainer .TabTitlesContainer > div {
      cursor: pointer;
      padding: 10px 16px;
      border: 1px solid #ccc;
      border-bottom: 2px solid gray;
      border-radius: 8px 8px 0 0;
      margin-right: -1px;
      font-weight: 600;
      transition: background-color 0.2s ease;
      opacity: 0.8;
      flex: 1;
    }

    .TabsContainer .TabTitlesContainer > div:hover {
      opacity: 1;
      color: #007bff;
    }

    .TabsContainer .TabTitlesContainer > div.active {
      opacity: 1;
      color: #007bff;
      background-color: white;
      border: 2px solid gray;
      border-bottom: 2px solid transparent;
      z-index: 2;
      position: relative;
    }

    .TabsContainer .TabContentsContainer > div {
      display: none;
      border-top: none;
    }

/*    [data-is-signed-out] #top-banner {
      display: none;
    }*/

    .job-download-link a {
      color: orange;
    }

    .job-download-link a:hover {
      color: greenyellow;
    }

    [data-is-signed-out] [data-ws-show-if-state="isSignedIn=true"] {
      display: none;
    }

    .highlight {
      background-color: #ff0;
      color: black;
    }
    .modal-step {
      background: url('./images/anima2_transparent_white.webp') no-repeat center;
      background-size: cover;
    }
    [data-dark-mode] .modal-step {
      background: url('./images/anima2_transparent_black.webp') no-repeat center;
      background-size: cover;
    }
    .modal-step-overlay {
      background: url('./images/anima2_transparent_white.webp') no-repeat center;
      background-size: cover;
    }
    [data-dark-mode] .modal-step-overlay {
      background: url('./images/anima2_transparent_black.webp') no-repeat center;
      background-size: cover;
    }
    body {
      transition: background 0.3s, color 0.3s;
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
      font-size: 16px;
      margin: auto;
    }

    .theme-toggle .label {
      cursor: pointer;
    }

    .theme-toggle .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 28px;
    }

    .theme-toggle .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .theme-toggle .slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background-color: #bbb;
      transition: 0.3s;
      border-radius: 30px;
    }

    .theme-toggle .slider::before {
      content: "";
      position: absolute;
      width: 22px;
      height: 22px;
      left: 3px;
      top: 3px;
      background-color: #fff;
      border-radius: 50%;
      transition: 0.3s;
    }

    .theme-toggle input:checked + .slider {
      background-color: #3b82f6;
    }

    .theme-toggle input:checked + .slider::before {
      transform: translateX(32px);
    }

    /* Quill styles */
    .ql-toolbar.ql-snow {
      border: none !important;
      position: relative !important;
    }
    .Sliding-In-Modal.hidden {
      visibility: hidden;
      opacity: 0;
      pointer-events: none;
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .loading-overlay .spinner {
      width: 60px;
      height: 60px;
      border: 6px solid #ccc;
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1.5s linear infinite;
    }

    .loading-overlay .loading-text {
      margin-top: 20px;
      color: white;
      font-size: 18px;
      font-family: sans-serif;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .isPlaying .wave-container {
      display: flex;
    }

    .wave-container {
      display: none;
      align-items: flex-end;
      gap: 4px;
      height: 20px; /* You can change this to any height you want */
      width: fit-content;
    }

    .wave-bar {
      width: 4px;
      background-color: #3b82f6;
      animation: waveAnim 1s infinite ease-in-out;
      animation-delay: calc(var(--i) * 0.1s);
    }

    /* Assign individual delays using custom properties */
    .wave-bar:nth-child(1) { --i: 1; }
    .wave-bar:nth-child(2) { --i: 2; }
    .wave-bar:nth-child(3) { --i: 3; }
    .wave-bar:nth-child(4) { --i: 4; }
    .wave-bar:nth-child(5) { --i: 3; }
    .wave-bar:nth-child(6) { --i: 2; }

    @keyframes waveAnim {
      0%, 100% {
        height: 20%;
      }
      50% {
        height: 100%;
      }
    }

    .ql-editor {
      text-align: start;
    }

    /* Default state: hide 2nd child SVG */
    .play-test-btn svg:nth-child(2) {
      display: none;
    }

    /* When inside an .isPlaying container: */
    .isPlaying .play-test-btn svg:nth-child(1) {
      display: none; /* hide the play icon */
    }

    .isPlaying .play-test-btn svg:nth-child(2) {
      display: inline; /* show the pause icon */
    }

    /* Podcast description collapse/expand styles */
    .podcast-description-collapsed {
      max-height: 1.5em; /* Approximately 2 lines */
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-height: 1.4;
      transition: max-height 0.3s ease;
    }

    .podcast-description-container.expanded .podcast-description-collapsed {
      max-height: none;
      -webkit-line-clamp: none;
      display: block;
    }

    .podcast-description-toggle {
      transition: color 0.2s ease;
    }

    .podcast-description-toggle:hover {
      color: #66BB6A !important;
    }

    .ql-editor {
      min-width: 0;
      overflow-wrap: anywhere;
      overflow-x: hidden;
    }

    /* ---------- Add Content Dropdown Styles ---------- */
    .add-content-dropdown {
      position: relative;
      display: inline-block;
    }

    .add-content-dropdown-trigger {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border: 1px solid gray;
      background: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #1d1d1f;
    }

    .add-content-dropdown-trigger:hover {
      background-color: #454547;
    }

    .add-content-dropdown-trigger:active {
      background-color: #e8e8ea;
      transform: scale(0.95);
    }

    .add-content-dropdown-menu {
      max-height: 70vh;
      overflow-y: auto;
      position: absolute;
      display: none;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.08);
      border: 0.5px solid #e5e5e7;
      z-index: 1000;
      transition: all 0.2s ease;
      margin-top: 8px;
      min-width: 320px;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .add-content-dropdown-menu.show {
      display: block;
      pointer-events: auto;
    }

    .add-content-dropdown-item {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      cursor: pointer;
      transition: background-color 0.15s ease;
      border-bottom: 0.5px solid #f0f0f0;
      position: relative;
    }

    .add-content-dropdown-item:first-child {
      border-radius: 12px 12px 0 0;
    }

    .add-content-dropdown-item:last-child {
      border-bottom: none;
      border-radius: 0 0 12px 12px;
    }

    .add-content-dropdown-item:only-child {
      border-radius: 12px;
    }

    .add-content-dropdown-item:hover {
      background-color: #f9f9fb;
    }

    .add-content-dropdown-item:active {
      background-color: #f0f0f2;
    }

    .add-content-dropdown-item:focus-visible {
      outline: 2px solid #007aff;
      outline-offset: -2px;
      background-color: #f0f6ff;
    }

    .add-content-dropdown-item-icon {
      width: 20px;
      height: 20px;
      color: #007aff;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .add-content-dropdown-item span {
      font-size: 16px;
      font-weight: 500;
      color: #1d1d1f;
      flex: 1;
    }

    .add-content-file-input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }
  </style>
  <style>
    /* ---------- Base layout ---------- */
    .sign-in-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 460px;
      margin: auto;
      max-width: 90%;
    }

    /* ---------- Shared button style ---------- */
    .styled-sign-in-btn-google,
    .styled-sign-in-btn-apple {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border-radius: 6px;
      font-size: 15px;
      font-weight: 500;
      padding: 10px 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
      transform: translateY(0);
    }

    .styled-sign-in-btn-google:hover,
    .styled-sign-in-btn-apple:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
    }

    .styled-sign-in-btn-google:active,
    .styled-sign-in-btn-apple:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    }

    /* ---------- Google button ---------- */
    .styled-sign-in-btn-google {
      border: 1px solid #dadce0;
      background: #fff;
      color: #202124;
      padding-top: 12px;
      padding-bottom: 12px;
    }

    .styled-sign-in-btn-google:hover {
      background: #f8f9fa;
    }

    /* ---------- Apple button ---------- */
    .styled-sign-in-btn-apple {
      background: #000;
      color: #fff;
      border: 1px solid #000;
    }

    .styled-sign-in-btn-apple:hover {
      background: #333;
    }

    /* ---------- Dark mode overrides ---------- */
    [data-dark-mode] body {
      background: #121212;
    }

    [data-dark-mode] .styled-sign-in-btn-google {
      background: #1f1f1f;
      border-color: #3c4043;
      color: #e8eaed;
    }

    [data-dark-mode] .styled-sign-in-btn-google:hover {
      background: #2b2b2b;
    }

    [data-dark-mode] .styled-sign-in-btn-apple {
      background: #e8eaed;
      color: #111;
      border-color: #e8eaed;
    }

    [data-dark-mode] .styled-sign-in-btn-apple:hover {
      background: #fff;
    }

    /* ---------- Icon sizing ---------- */
    .google-icon {
      width: 18px;
      height: 18px;
      display: inline-block;
    }
    .apple-icon {
      width: 22px;
      height: 22px;
      display: inline-block;
      position: relative;
      top: -2px;
    }
  </style>

  <template id="sign-in-buttons-template">
    <div class="sign-in-container">
      <!-- Google Sign-in Button -->
      <button class="styled-sign-in-btn-google">
      <span class="google-icon">
        <!-- Google G logo SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 533.5 544.3">
          <path fill="#4285f4" d="M533.5 278.4c0-17.4-1.6-34.1-4.7-50.3H272.1v95.1h147.2c-6.4 34.5-25 63.8-53.3 83.4l85.9 66.8c50.2-46.2 81.6-114.2 81.6-194.9z"/>
          <path fill="#34a853" d="M272.1 544.3c72.4 0 133.2-23.9 177.5-64.9l-85.9-66.8c-23.9 16.1-54.5 25.6-91.6 25.6-70.4 0-130.1-47.4-151.4-111.1H31.9v69.7c44.3 87.6 134.9 147.5 240.2 147.5z"/>
          <path fill="#fbbc04" d="M120.7 327.1c-10.9-32.6-10.9-67.9 0-100.5V156.9H31.9c-43.5 86.9-43.5 189.6 0 276.5l88.8-69.6z"/>
          <path fill="#ea4335" d="M272.1 107.7c39.4 0 74.8 13.6 102.7 40.3l76.6-76.6C405.3 24.4 344.5 0 272.1 0 166.8 0 76.2 59.9 31.9 147.5l88.8 69.7C142 155.1 201.7 107.7 272.1 107.7z"/>
        </svg>
      </span>
        <span>Googleë¡œ ê³„ì†</span>
      </button>

      <!-- Apple Sign-in Button -->
      <button class="styled-sign-in-btn-apple">
      <span class="apple-icon">
        <!-- Apple logo SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-brand-apple"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15.079 5.999l.239 .012c1.43 .097 3.434 1.013 4.508 2.586a1 1 0 0 1 -.344 1.44c-.05 .028 -.372 .158 -.497 .217a4.15 4.15 0 0 0 -.722 .431c-.614 .461 -.948 1.009 -.942 1.694c.01 .885 .339 1.454 .907 1.846c.208 .143 .436 .253 .666 .33c.126 .043 .426 .116 .444 .122a1 1 0 0 1 .662 .942c0 2.621 -3.04 6.381 -5.286 6.381c-.79 0 -1.272 -.091 -1.983 -.315l-.098 -.031c-.463 -.146 -.702 -.192 -1.133 -.192c-.52 0 -.863 .06 -1.518 .237l-.197 .053c-.575 .153 -.964 .226 -1.5 .248c-2.749 0 -5.285 -5.093 -5.285 -9.072c0 -3.87 1.786 -6.92 5.286 -6.92c.297 0 .598 .045 .909 .128c.403 .107 .774 .26 1.296 .508c.787 .374 .948 .44 1.009 .44h.016c.03 -.003 .128 -.047 1.056 -.457c1.061 -.467 1.864 -.685 2.746 -.616l-.24 -.012z" /><path d="M14 1a1 1 0 0 1 1 1a3 3 0 0 1 -3 3a1 1 0 0 1 -1 -1a3 3 0 0 1 3 -3z" /></svg>
      </span>
        <span>Appleë¡œ ê³„ì†</span>
      </button>
    </div>
  </template>
  <script>
    class SignInButtons extends HTMLElement {
      connectedCallback() {
        this.innerHTML = document.getElementById("sign-in-buttons-template").innerHTML;
      }
    }
    customElements.define("sign-in-buttons", SignInButtons);
  </script>

<script defer src="./static/js/main.a34f52d0.js"></script><link href="./static/css/main.2a0d9aa1.css" rel="stylesheet"></head>
<body>
<div id="root" style="display: flex;flex-direction: column; flex: 1;">

    <div class="Go-premium-banner" style="display: none;text-align: center;text-transform: uppercase;
      color: white;
      font-weight: bold;
      font-size: smaller;
      background-color: darkgreen;"><a style="cursor: pointer; text-decoration: none;color: white;display: block; padding: 10px;" onclick="openNewUpgradeModal()">
      ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”. 100% ë§Œì¡± ë³´ì¥<!-- Click here to upgrade. 100% satisfaction guaranteed -->
    </a></div>

  <div style="flex: 1; display: flex;max-height: 100%;overflow: hidden;">
    <drawer style="overflow: hidden;max-height: 100%;">
      <div style="position: absolute;top:10px;right:10px;padding: 10px;cursor: pointer;" onclick="toggleDrawerOpen();">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>
      </div>
      <div style="padding: 10px;margin-top: 50px;overflow-x: hidden;overflow-y: auto;padding-bottom: 100px;">
        <div>
          <a title="Text To Speech Solutions"  aria-label="Text To Speech Solutions" class="Menu-list-element" href="https://ttsreader.com" target="_blank" style="text-decoration:none;display: flex;align-items: center">
            <svg  class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l-2 0l9 -9l9 9l-2 0" /><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" /></svg>&nbsp;&nbsp;<strong style="display: block"><span style="color: darkred">TTS</span>Reader Text To Speech</strong>
          </a>
        </div>
        <div data-ws-show-if-state="isSignedIn=false">
          <a class="Menu-list-element" data-ws-toggle="#signinModal" style="text-decoration: none;display: block"><svg class="Top-btn-svg"><path d="M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"></path></svg>&nbsp;&nbsp;ë¡œê·¸ì¸ / ê°€ì…<!-- Sign in / Sign up --></a>
        </div>
        <div data-ws-show-if-state="isSignedIn=true" >
          <div style="display: flex;align-items: center;">
            <p data-ws-show-if-state="isSignedIn=true" style="text-decoration: none;padding-left:10px; display: block;flex:1"><i><span data-ws-label-state="email"></span></i></p>
            <a class="Menu-list-element" onclick="toggleSignIn();" style="padding: 10px;" title="ë¡œê·¸ì•„ì›ƒ" aria-label="ë¡œê·¸ì•„ì›ƒ">
              <svg class="Top-btn-svg"><path d="m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"></path></svg>
            </a>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=false">
          <div>
            <a class="Menu-list-element" onclick="openNewUpgradeModal()" style="cursor: pointer;text-decoration: none;display: block">ğŸ†&nbsp;&nbsp;&nbsp;í”„ë¦¬ë¯¸ì—„ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ<!-- Go Premium -->&nbsp;&nbsp;&nbsp;</a>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <a class="Menu-list-element" data-ws-toggle="#upgradeModal" style="cursor: pointer;text-decoration: none;display: block">-&nbsp;&nbsp;<svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>&nbsp;&nbsp;í”„ë¦¬ë¯¸ì—„ ğŸ† ìƒíƒœ<!-- Premium ğŸ† Status --></a>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <a class="Menu-list-element" href="https://docs.google.com/forms/d/e/1FAIpQLSc-gAEGNiCixhSjTjkJXu3cYSqDJYEMa9vPzRPKnY6Pei_yrQ/viewform" target="_blank" style="cursor: pointer;text-decoration: none;display: block">-&nbsp;&nbsp;<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-sos"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2" /><path d="M17 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /><path d="M3 15c.345 .6 1.258 1 2 1a2 2 0 1 0 0 -4a2 2 0 1 1 0 -4c.746 0 1.656 .394 2 1" /></svg>&nbsp;&nbsp;í”„ë¦¬ë¯¸ì—„ ì§€ì› ì–‘ì‹</a>
        </div>
        <div data-ws-show-if-state="isSignedIn=true">
          <a href="https://ttsreader.com/account/" rel="nofollow" target="_blank" class="Menu-list-element" style="text-decoration: none;display: block">-&nbsp;&nbsp;<svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855" /></svg>&nbsp;&nbsp;ê³„ì • ê´€ë¦¬</a>
        </div>

        <div class="Menu-list-element" style="position: relative;">
          <input style="position: absolute;display: block;opacity: 0; right:0;left:0;top:0;bottom:0; cursor: pointer" type="file" accept=".csv, .json, .txt, .rtf, .pdf, .epub, .docx, .html, .htm" data-ws-onChange="handleFileSelect">
          <a onclick="gtag('event','import_file_click_player_drawer',{value:'1'})"  data-ws-onClick="openFile" style="text-decoration:none;display: flex;align-items: center">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-word"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" /><path d="M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5" /></svg>&nbsp;&nbsp;<span style="display: block;flex: 1;">íŒŒì¼ ê°€ì ¸ì˜¤ê¸° (DOCX, TXT, PDF, EPUB, etc.)</span>
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="gtag('event','stats_click_player_drawer',{value:'1'})" data-ws-onClick="calculateStats" data-ws-toggle="#statsModal" style="text-decoration:none;">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-analytics"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 17l0 -5" /><path d="M12 17l0 -1" /><path d="M15 17l0 -3" /></svg>&nbsp;&nbsp;ë¬¸ì„œ í†µê³„ <!-- Document Stats -->
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="gtag('event','mp3_export_click_player_drawer',{value:'1'})" data-ws-onClick="calculateStats" data-ws-toggle="#exportModal" style="text-decoration:none;">
            <svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M11 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 16l0 -5l2 1" /></svg>&nbsp;&nbsp;mp3 ì˜¤ë””ì˜¤ íŒŒì¼ ë‹¤ìš´ë¡œë“œ<!-- Download mp3 audio file -->
          </a>
        </div>
        <div>
          <a class="Menu-list-element" onclick="openOrCloseExportsListModal()" style="text-decoration:none;">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>&nbsp;&nbsp;ìƒì„±ëœ ì˜¤ë””ì˜¤
          </a>
        </div>
        <div>
          <a class="Menu-list-element" data-ws-toggle="#apiModal" style="text-decoration:none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-code"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 8l-4 4l4 4" /><path d="M17 8l4 4l-4 4" /><path d="M14 4l-4 16" /></svg>&nbsp;&nbsp;API ì•¡ì„¸ìŠ¤
          </a>
        </div>
        <a class="Menu-list-element" data-ws-onclick="handleVoiceLabelClick">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>&nbsp;&nbsp;ë” ë§ì€ ìŒì„±ì´ í•„ìš”í•©ë‹ˆë‹¤<!-- Need more voices -->
        </a>
        <div>
          <a href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds" target="_blank" class="Menu-list-element" onclick="gtag('event','drawer_click_multivoices',{value:'1'})" style="text-decoration:none;">
            <svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M16 19h6" /><path d="M19 16v6" /></svg>&nbsp;&nbsp;ë‹¤ì¤‘ ìŒì„± ëŒ€í™”
          </a>
        </div>

        <a class="Menu-list-element" href="/docs/guides/quick-start-new-player/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-file-info"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M11 14h1v4h1" /><path d="M12 11h.01" /></svg>&nbsp;&nbsp;ì‚¬ìš©ì ë§¤ë‰´ì–¼<!-- User manual -->
        </a>
        <a class="Menu-list-element" data-ws-toggle="#helpModal" onclick="loadImages('#helpImgId');">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-help"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 17l0 .01" /><path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" /></svg>&nbsp;&nbsp;ë„ì›€ë§ ì˜¤ë²„ë ˆì´<!-- Help overlay -->
        </a>
        <a class="Menu-list-element" onclick="openOnboarding(true);">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-progress-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 20.777a8.942 8.942 0 0 1 -2.48 -.969" /><path d="M14 3.223a9.003 9.003 0 0 1 0 17.554" /><path d="M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592" /><path d="M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305" /><path d="M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356" /><path d="M9 12l2 2l4 -4" /></svg>&nbsp;&nbsp;ì˜¨ë³´ë”©
        </a>


        <a class="Menu-list-element" href="/docs/guides/commercial/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-video"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z" /><path d="M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" /></svg>&nbsp;&nbsp;ìƒì—… ì¶œíŒ<!-- Commercial & publishing -->
        </a>
        <!--<a class="Menu-list-element" href="https://speechnotes.co/files/webm_to_mp3/" target="_blank" style="text-decoration: none;display: block">Convert webm to mp3</a>-->
        <!--<a class="Menu-list-element" href="/mobile/" target="_blank" style="text-decoration: none;display: block">
          ëª¨ë°”ì¼ ë²„ì „&lt;!&ndash; Mobile versions &ndash;&gt;
        </a>-->
        <a class="Menu-list-element" href="https://docs.google.com/forms/d/e/1FAIpQLSecnm9ZnFje9S6OSSQqP4Ts4av-hSmhAUbuLvQAojWUdckAtg/viewform?usp=sf_link" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-message-circle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1" /></svg>&nbsp;&nbsp;í”¼ë“œë°± ì–‘ì‹<!-- Feedback form -->
        </a>
        <a class="Menu-list-element" href="https://ttsreader.com/contact/" target="_blank" style="text-decoration: none;display: block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>&nbsp;&nbsp;ë¬¸ì˜í•˜ê¸°<!-- Contact us -->
        </a>
        <div data-ws-show-if-state="isShareSupported=true">
          <a class="Menu-list-element" onclick="share();"><svg style="vertical-align: middle" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-share" width="27" height="27" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M8.7 10.7l6.6 -3.4"></path>
            <path d="M8.7 13.3l6.6 3.4"></path>
          </svg>&nbsp;&nbsp;ê³µìœ í•˜ê¸°</a>
        </div>
        <div data-ws-show-if-state="isShareSupported=false">
          <a class="Menu-list-element" data-ws-toggle="#shareModal"><svg style="vertical-align: middle" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-share" width="27" height="27" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
            <path d="M8.7 10.7l6.6 -3.4"></path>
            <path d="M8.7 13.3l6.6 3.4"></path>
          </svg>&nbsp;&nbsp;ê³µìœ í•˜ê¸°</a>
        </div>
        <div class="Menu-list-element" >
          <a class="Menu-list-element" href="/versions/" target="_blank" style="display: block; text-decoration: none">
          <b>V3.10.6</b> Build 2026-01-06T16:03:27.557Z
          <br/><span style="margin-top: 10px;display: block">ëª¨ë“  ë²„ì „ <svg style="vertical-align: bottom;" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-external-link"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6" /><path d="M11 13l9 -9" /><path d="M15 4h5v5" /></svg></span></a>
        </div>
        <div style="margin: 20px auto; text-align: center;">
          <b>ë³´ì¡° ìœ í‹¸ë¦¬í‹°</b>
        </div>
        <div>
          <a class="Menu-list-element" href="https://speechnotes.co/dictate/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-microphone"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z" /><path d="M5 10a7 7 0 0 0 14 0" /><path d="M8 21l8 0" /><path d="M12 17l0 4" /></svg>&nbsp;&nbsp;ìŒì„± â†’ í…ìŠ¤íŠ¸
          </a>
        </div>
        <div>
          <a class="Menu-list-element" href="https://speechnotes.co/transcribe/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-device-audio-tape"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M3 17l4 -3h10l4 3" /><circle cx="7.5" cy="9.5" r=".5" fill="currentColor" /><circle cx="16.5" cy="9.5" r=".5" fill="currentColor" /></svg>&nbsp;&nbsp;ìë™ AI ì „ì‚¬
          </a>
        </div>
        <div>
          <a class="Menu-list-element" href="/sounds/" target="_blank" style="text-decoration: none;display: block">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-bell-ringing"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 5a2 2 0 0 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" /><path d="M9 17v1a3 3 0 0 0 6 0v-1" /><path d="M21 6.727a11.05 11.05 0 0 0 -2.794 -3.727" /><path d="M3 6.727a11.05 11.05 0 0 1 2.792 -3.727" /></svg>&nbsp;&nbsp;ì‚ ì†Œë¦¬ ìƒì„±ê¸°
          </a>
        </div>
        <div style="margin: 20px auto; text-align: center;">
          ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© ê°€ëŠ¥ ì–¸ì–´:
        </div>
        <div>
          <a class="interface-lang-link" target="_parent" href="/en/">English</a>
          <a class="interface-lang-link" target="_parent" href="/es/">EspaÃ±ol</a>
          <a class="interface-lang-link" target="_parent" href="/fr/">FranÃ§ais</a>
          <a class="interface-lang-link" target="_parent" href="/ar/">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
          <a class="interface-lang-link" target="_parent" href="/he/">×¢×‘×¨×™×ª</a>
          <a class="interface-lang-link" target="_parent" href="/ja/">æ—¥æœ¬èª</a>
          <a class="interface-lang-link" target="_parent" href="/de/">Deutsch</a>
          <a class="interface-lang-link" target="_parent" href="/it/">Italiano</a>
          <a class="interface-lang-link" target="_parent" href="/zh/">ä¸­æ–‡</a>
          <a class="interface-lang-link" target="_parent" href="/ko/">í•œêµ­ì–´</a>
          <a class="interface-lang-link" target="_parent" href="/pt/">PortuguÃªs</a>
          <a class="interface-lang-link" target="_parent" href="/ru/">Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
          <a class="interface-lang-link" target="_parent" href="/ro/">RomÃ¢nÄƒ</a>
          <a class="interface-lang-link" target="_parent" href="/hi/">à¤¹à¤¿à¤¨à¥à¤¦à¥€</a>
          <a class="interface-lang-link" target="_parent" href="/nl/">Nederlands</a>
        </div>
      </div>

    </drawer>
    <div style="display: flex; flex-direction: column; flex: 1;max-width: 100%;min-width: 38vw">

      <div class="Buttons-bar" style="display: flex">
        <button title="Open / close main drawer" aria-label="Open / close main drawer" style="" onclick="toggleDrawerOpen();">
          <svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>
        </button>
        <!--<a class="Hide-on-narrow-screens" href="https://ttsreader.com" alt="TTSReader Home" title="TTSReader Home" style="background-image: url('favicon2.svg');background-size: contain;width: 40px;height: 40px; border-radius: 10px;"></a>-->
        <!-- Add Content Dropdown -->
        <div class="add-content-dropdown" id="addContentDropdown" style="">
          <button class="add-content-dropdown-trigger" type="button" title="Add content" aria-label="Add content" aria-expanded="false" aria-haspopup="true" aria-controls="addContentDropdownMenu" onclick="toggleAddContentDropdown()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>
          </button>

          <div class="add-content-dropdown-menu" id="addContentDropdownMenu" role="menu" hidden>
            <!-- Open File -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item onclick="handleDropdownAction('openFile')" data-action="openFile">
              <svg class="add-content-dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14.5 2H6a2 2 0 0 0 -2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                <polyline points="14,2 14,8 20,8"/>
              </svg>
              <span>
                <span>ì—´ê¸°</span>
                <br/><span style="font-size: small; color: darkgray">DOCX, TXT, PDF, EPUB ebooks, & more</span>
              </span>
              <input class="add-content-file-input" type="file" accept=".csv, .json, .txt, .rtf, .pdf, .epub, .docx, .html, .htm" data-ws-onChange="handleFileSelect">
            </div>

            <!-- Import Website -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item data-ws-toggle="#openUrlModal" data-action="importWebsite">
              <svg class="add-content-dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19.5 7a9 9 0 0 0-7.5-4a8.991 8.991 0 0 0-7.484 4"/>
                <path d="M11.5 3a16.989 16.989 0 0 0-1.826 4"/>
                <path d="M12.5 3a16.989 16.989 0 0 1 1.828 4"/>
                <path d="M19.5 17a9 9 0 0 1-7.5 4a8.991 8.991 0 0 1-7.484-4"/>
                <path d="M11.5 21a16.989 16.989 0 0 1-1.826-4"/>
                <path d="M12.5 21a16.989 16.989 0 0 0 1.828-4"/>
                <path d="M2 10l1 4l1.5-4l1.5 4l1-4"/>
                <path d="M17 10l1 4l1.5-4l1.5 4l1-4"/>
                <path d="M9.5 10l1 4l1.5-4l1.5 4l1-4"/>
              </svg>
              <span>Import website</span>
            </div>

            <!-- Clear Text -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item data-ws-onClick="clearContent" data-action="clearText">
              <svg class="add-content-dropdown-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3,6 5,6 21,6"/>
                <path d="m19,6v14c0,1-1,2-2,2H7c-1,0-2-1-2-2V6m3,0V4c0-1,1-2,2-2h4c1,0,2,1,2,2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
              </svg>
              <span>Clear text area</span>
            </div>

            <!-- Add Pause -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item data-ws-toggle="#addPauseModal">
              <svg xmlns="http://www.w3.org/2000/svg" class="add-content-dropdown-item-icon" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M20.942 13.018a9 9 0 1 0 -7.909 7.922"></path>
                <path d="M12 7v5l2 2"></path>
                <path d="M17 17v5"></path>
                <path d="M21 17v5"></path>
              </svg>
              <span>Add pause in playback</span>
            </div>

            <!-- Add Comment -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item data-ws-toggle="#addCommentModal">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="add-content-dropdown-item-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9h8" /><path d="M8 13h6" /><path d="M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5" /><path d="M16 19h6" /><path d="M19 16v6" /></svg>
              <span>
                <span>Add comment</span>
                <br/><span style="font-size: small; color: darkgray">Text content ignored by player</span>
              </span>
            </div>

            <hr/>

            <!-- Export -->
            <div class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item data-ws-onclick="calculateStats" data-ws-toggle="#exportModal">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="add-content-dropdown-item-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
              <span>
                <span>Export text to MP3</span>
                <br/><span style="font-size: small; color: darkgray">Download / listen offline / share / listen later / podcast / publish, etc.</span>
              </span>
            </div>

            <hr data-ws-show-if-state="isPremium=false"/>

            <!-- Upgrade to Premium -->
            <div  data-ws-show-if-state="isPremium=false" class="add-content-dropdown-item" role="menuitem" tabindex="-1" data-dropdown-item onclick="openNewUpgradeModal()">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="add-content-dropdown-item-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M5 8v-3a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5" /><path d="M6 14m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M4.5 17l-1.5 5l3 -1.5l3 1.5l-1.5 -5" /></svg>
              <span>
                <span>ğŸ‘‘ Upgrade</span>
                <br/><span style="font-size: small; color: darkgray">Enjoy AI voices & more. Premium is required for businesses, commercial licenses, publishing and copyrights on your exported audio. <b>View plans.</b></span>
              </span>
            </div>
          </div>
        </div>
        &nbsp;
        <button class="Hide-on-narrow-screens" style="align-content: center; position: relative; cursor: pointer;">
          <svg class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="pointer-events: none;">
            <path d="M14.5 2H6a2 2 0 0 0 -2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
            <polyline points="14,2 14,8 20,8"/>
          </svg>
          <input class="add-content-file-input" type="file" accept=".csv, .json, .txt, .rtf, .pdf, .epub, .docx, .html, .htm" data-ws-onChange="handleFileSelect" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;">
        </button>
        <span class="Hide-on-narrow-screens">&nbsp;</span>
        <button onclick="openOrCloseExportsListModal()" class="btn btn-link" type="button" aria-label="Open personal long-audio archive" title="Open personal long-audio archive">
          <svg style="    position: relative;
    top: 2px;
    width: 28px;
    height: 28px;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>
        </button>
        <span class="Hide-on-narrow-screens">&nbsp;&nbsp;</span>
        <button data-ws-onclick="clearContent" class="Hide-on-narrow-screens btn btn-link" type="button" aria-label="Open personal long-audio archive" title="Open personal long-audio archive">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="Top-btn-svg icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>
        </button>

        <span style="display: inline-block;flex: 1"></span>

        <button title="Select language, voice and speed" aria-label="Select language, voice and speed" style="overflow: hidden;" data-ws-onclick="handleVoiceLabelClick">
          <span class="Voice-label Flag-font" data-ws-label-state="voiceLabel"></span>
          <span data-ws-label-state="selectedRate"></span>X
        </button>

        <span style="flex: 1"></span>
        <button data-ws-show-if-state="isPremium=false" class="Hide-on-narrow-screens" style="text-align: center; text-wrap:nowrap;" onclick="openNewUpgradeModal()">
          <span style="border-radius: 10px; padding: 7px 16px; background-color: green; font-weight: bold;">ğŸ‘‘ Upgrade</span>
        </button>
        <span class="Hide-on-narrow-screens">&nbsp;</span>
        <div class="Dropdown-header" style="display: inline-block; vertical-align: middle;cursor: pointer;position: relative;align-content: center;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-text-size"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7v-2h13v2" /><path d="M10 5v14" /><path d="M12 19h-4" /><path d="M15 13v-1h6v1" /><path d="M18 12v7" /><path d="M17 19h2" /></svg>
          <div class="Dropdown-content" style="left:0;width:120px; translate: -40px;">
            <span data-ws-onClick="fontDecrease" style="display: inline-block; line-height: 20px; font-size: 18px; margin: 5px; padding: 5px; border-radius: 50%;background-color: white; color: blue;fill:blue;"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"></path></svg></span>
            <span data-ws-onClick="fontIncrease" style="display: inline-block; line-height: 20px; font-size: 18px; margin: 5px; padding: 5px; border-radius: 50%;background-color: white; color: blue;fill:blue;"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"></path></svg></span>
          </div>
        </div>
        <button onclick="toggleTheme();" class="btn btn-link" type="button" aria-label="Toggle user interface mode">
          <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg></span><span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
        </button>
        <button title="Text analytics - word counter & more" aria-label="Text analytics - word counter & more" style="" data-ws-onClick="calculateStats" data-ws-toggle="#statsModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-google-analytics"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 9m0 1.105a1.105 1.105 0 0 1 1.105 -1.105h1.79a1.105 1.105 0 0 1 1.105 1.105v9.79a1.105 1.105 0 0 1 -1.105 1.105h-1.79a1.105 1.105 0 0 1 -1.105 -1.105z" /><path d="M17 3m0 1.105a1.105 1.105 0 0 1 1.105 -1.105h1.79a1.105 1.105 0 0 1 1.105 1.105v15.79a1.105 1.105 0 0 1 -1.105 1.105h-1.79a1.105 1.105 0 0 1 -1.105 -1.105z" /><path d="M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /></svg>
        </button>
        <button title="Player Settings" aria-label="Player Settings" style="" data-ws-onClick="toggleSettingsSidebar">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
        </button>
        <!--<button title="Interface Language Selector" aria-label="Interface Language Selector" style="" data-ws-toggle="#interfaceLangModal">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-language"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7" /><path d="M9 3v2c0 4.418 -2.239 8 -5 8" /><path d="M5 9c0 2.144 2.952 3.908 6.7 4" /><path d="M12 20l4 -9l4 9" /><path d="M19.1 18h-6.2" /></svg>
        </button>-->
      </div>

      <div class="main-app-container" style="display: flex;flex: 1;overflow: hidden;">

        <div class="main-content-area" style="flex: 1;display: flex;flex-direction: column;overflow: hidden;">
          <div class="App"  style="flex: 1;position: relative;display: flex;flex-direction: column">
            <button id="fr-icon" class="Toolbar-Button" style="position: absolute; top: 12px; right: 16px; z-index: 9; background: none; border: none; cursor: pointer;">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>
            </button>
            <div class="Book-bar" data-ws-show-if-state="isBook=true" style="text-align: center">
              <span data-ws-label-state="bookTitle"></span>&nbsp;-&nbsp;
              <button data-ws-onClick="loadPrevChapter" title="Load Previous Chapter" aria-label="Load Previous Chapter"><b>&lArr;</b></button>
              <span data-ws-label-state="currentChapterLabel"></span> / <span data-ws-label-state="totalChapters"></span>
              <button data-ws-onClick="loadNextChapter" title="Load Next Chapter" aria-label="Load Next Chapter"><b>&rArr;</b></button>
            </div>
            <div class="Text-box-container" style="position: relative;" data-ws-style-state="font-size=selectedFontSize">
              <!-- Create the toolbar container -->
              <!--<div id="toolbar"></div>-->
              <!-- Create the editor container -->
              <div style="width: 95%; max-width: 800px; margin: 0 auto;position: relative;">
                <!-- if we want to align items to the text box's top -->
              </div>
              <div id="editor" class="Text-box Text-box-quill" style="font-size: 1em;">
              </div>

              <!-- Initialize Quill editor -->
              <script>

                // âœ… Define the custom highlight blot
                const Inline = Quill.import('blots/inline');
                class HighlightBlot extends Inline {
                  static create(value) {
                    return super.create();
                  }
                  static formats(node) {
                    return true;
                  }
                }
                HighlightBlot.blotName = 'highlight';
                HighlightBlot.tagName = 'span';
                HighlightBlot.className = 'Highlight';
                Quill.register(HighlightBlot);

                class BlinkBlot extends Inline {
                  static create(value) {
                    return super.create();
                  }
                  static formats(node) {
                    return true;
                  }
                }
                BlinkBlot.blotName = 'blink';
                BlinkBlot.tagName = 'span';
                BlinkBlot.className = 'Blink';
                Quill.register(BlinkBlot);

                const quill = new Quill('#editor', {
                  modules: {
                    toolbar: [
                      [{ header: [1, 2, 3, 4, false] }],
                      ['bold', 'underline', 'italic'],
                      ['clean'] // remove formatting button
                    ]
                  },
                  formats: [
                    'highlight',
                    'background',
                    'blink',        // Custom blink format
                    'link',
                    'header',      // h1, h2, ...
                    'bold',        // <strong>
                    'underline',   // <u>
                    'italic',       // <em>
                    'strike'       // <strike>
                  ],
                  theme: 'snow',
                  placeholder: 'ì´ ìƒìì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ë¶™ì—¬ë„£ê³  ì¬ìƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì œê°€ í¬ê²Œ ì½ì–´ë“œë¦´ê²Œìš”. ì›¹ í˜ì´ì§€ë¥¼ ì½ìœ¼ë ¤ë©´ - URLì„ ë¶™ì—¬ë„£ê³  ì¬ìƒì„ í´ë¦­í•˜ì„¸ìš”. íŒŒì¼ ì—…ë¡œë“œ, ìŒì„± ë³€ê²½, í…Œë§ˆ, ê¸€ê¼´ í¬ê¸° ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' // Placeholder text
                });

                window.quill = quill; // Make Quill accessible globally
                const sentenceBreakRegex = /[.?!â€¦]+[\s\n]+|[\n]+/g;

                function getCaretIndexOrHighlightEnd() {
                  const highlight = quill.root.querySelector('span.highlight');
                  const fullText = quill.getText();
                  if (highlight) {
                    const highlightedText = highlight.innerText;
                    const start = fullText.indexOf(highlightedText);
                    if (start !== -1) return start + highlightedText.length;
                  }
                  const sel = quill.getSelection();
                  return sel ? sel.index : 0;
                }

                function findNextSentence(caretIndex) {
                  const text = quill.getText();
                  sentenceBreakRegex.lastIndex = caretIndex;

                  const breakMatch = sentenceBreakRegex.exec(text);
                  if (!breakMatch) return null;

                  const sentenceStart = sentenceBreakRegex.lastIndex;
                  const nextBreak = sentenceBreakRegex.exec(text);
                  const sentenceEnd = nextBreak ? nextBreak.index : text.length;

                  return { start: sentenceStart, end: sentenceEnd };
                }

                function findPreviousSentence(caretIndex) {
                  const text = quill.getText();
                  let lastBreak = 0;
                  let nextBreak;

                  sentenceBreakRegex.lastIndex = 0;

                  while ((nextBreak = sentenceBreakRegex.exec(text)) !== null) {
                    if (nextBreak.index >= caretIndex) break;
                    lastBreak = sentenceBreakRegex.lastIndex;
                  }

                  const sentenceStart = lastBreak;
                  const sentenceEnd = caretIndex;

                  return sentenceStart < sentenceEnd ? { start: sentenceStart, end: sentenceEnd } : null;
                }

                function highlightRange(start, end) {
                  quill.formatText(0, quill.getLength(), 'highlight', false); // clear previous
                  quill.formatText(start, end - start, 'highlight', true);

                  const el = quill.root.querySelector('span.highlight');
                  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }

                /*document.getElementById('nextBtn').addEventListener('click', () => {
                  console.log('Previous button clicked');
                  const caret = getCaretIndexOrHighlightEnd();
                  const range = findNextSentence(caret);
                  if (range) highlightRange(range.start, range.end);
                });

                document.getElementById('prevBtn').addEventListener('click', () => {
                  console.log('Previous button clicked');
                  const caret = getCaretIndexOrHighlightEnd();
                  const range = findPreviousSentence(caret);
                  if (range) highlightRange(range.start, range.end);
                });*/

              </script>

              <!--<div class="Text-box" contentEditable="plaintext-only" data-ws-style-state="font-size=selectedFontSize" data-ws-onPaste="onPaste" data-ws-onInput="onInput" placeholder="ì´ ìƒìì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ë¶™ì—¬ë„£ê³  ì¬ìƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì œê°€ í¬ê²Œ ì½ì–´ë“œë¦´ê²Œìš”. ì›¹ í˜ì´ì§€ë¥¼ ì½ìœ¼ë ¤ë©´ - URLì„ ë¶™ì—¬ë„£ê³  ì¬ìƒì„ í´ë¦­í•˜ì„¸ìš”. íŒŒì¼ ì—…ë¡œë“œ, ìŒì„± ë³€ê²½, í…Œë§ˆ, ê¸€ê¼´ í¬ê¸° ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." placeholder2="ì´ í”Œë ˆì´ì–´ëŠ” ì ê·¹ì ìœ¼ë¡œ ê°œë°œ ì¤‘ì´ë©°, ë§¤ì¼ ë” ë‚˜ì•„ì§€ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. â¤ï¸ ì¦ê²ê²Œ ë“¤ìœ¼ì„¸ìš”! ğŸ§"></div>-->
            </div>
            <div class="Playback-buttons-bar" style="direction: ltr;">
          <span>
            <button data-ws-show-if-state="isRepeatMode=false" title="Loop" aria-label="Loop"                              data-ws-onClick="toggleRepeatMode"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"></path><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"></path></svg></button>
            <button data-ws-show-if-state="isRepeatMode=true" title="Loop" aria-label="Loop" style="color: cornflowerblue" data-ws-onClick="toggleRepeatMode"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"></path><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"></path></svg></button>
            <button class="Hide-on-narrow-screens" data-ws-show-if-state="isRecordingSupported=true" title="Go to beginning" aria-label="Go to beginning" data-ws-onClick="goToStart"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"></path></svg></button>
            <button title="Jump backwards" aria-label="Jump backwards" data-ws-onClick="rewind"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6 8.5 6V6l-8.5 6z"></path></svg></button>
            <span style="display: inline-block; width: 80px;"></span>
            <button title="Jump forward" aria-label="Jump forward" data-ws-onClick="forward"><svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="m4 18 8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"></path></svg></button>
            <button class="Hide-on-narrow-screens" title="Toggle recording" aria-label="Toggle recording" data-ws-show-if-state="isRecordingSupported=true" data-ws-onClick="toggleRecord">
              <svg data-ws-show-if-state="isRecordingOn=false" class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
              <svg data-ws-show-if-state="isRecordingOn=true"  class="hidden Blinking-record-btn Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
            </button>
            <button title="Export to audio file" aria-label="Click to generate downloadable audio file" data-ws-onClick="calculateStats" data-ws-toggle="#exportModal">
              <svg  class="Top-btn-svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
            </button>
            <button id="Play-btn" data-ws-onClick="togglePlay" title="Play / Pause" aria-label="Play / Pause">
              <span data-ws-show-if-state="isPlayingOn=true" class="hidden"><svg class="Play-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></span>
              <span data-ws-show-if-state="isPlayingOn=false"><svg class="Play-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></span>
            </button>
          </span>
            </div>
          </div>

          <div data-ws-show-if-state="isSignedIn=false" class="remaining-chars-line" style="text-align: center; cursor: pointer; padding: 2px 10px;" onclick="signIn()">
            <p data-ws-show-if-state="isSignedIn=false">
              ë¡œê·¸ì¸ / ê°€ì…
            </p>
          </div>
          <div data-ws-show-if-state="isSignedIn=true" class="remaining-chars-line hidden Hide-on-narrow-screens" style="text-align: center; cursor: pointer; padding: 2px 10px;" onclick="openNewUpgradeModal()" >
            <!--Old version:
            <p>
              ì‚¬ìš©ëœ&lt;!&ndash; Used &ndash;&gt;
              <b>
                <span data-ws-label-state="charsUsedToday"></span>&nbsp;/&nbsp;
                <span data-ws-label-state="dailyCharsLimit"></span>
              </b>
              ì¼ì¼ ë¬´ë£Œ ë¬¸ì. ì œí•œì„ ì œê±°í•˜ë ¤ë©´ í´ë¦­í•˜ì„¸ìš”.&lt;!&ndash; free chars per day. Click to remove limit. &ndash;&gt;
            </p>-->
            <!-- New version: -->

              <div data-ws-show-if-state="serverData=false">
                <p>Fetching server data...</p>
              </div>
              <div data-ws-show-if-state="serverData=true">
                <p data-ws-show-if-state="isPremium=false">
                  ì‚¬ìš©ë¨<!--Used--> <span data-ws-label-state="usageLife"></span> / í”„ë¦¬ë¯¸ì—„ ìŒì„±ìš© 5,000ì.&nbsp;ë” ë³´ë ¤ë©´ í´ë¦­í•˜ì„¸ìš”.<!-- 5,000 chars for premium voices.&nbsp;Click for more.-->
                </p>
                <p data-ws-show-if-state="isPremium=true">
                  ğŸ† í”„ë¦¬ë¯¸ì—„<!--Premium-->&nbsp;
                  <span data-ws-show-if-state="isPremiumPlan=true">
                    <span data-ws-label-state="usedMonthly"></span> / <span data-ws-label-state="monthlyQuotaHuman"></span> / ì›”<!--month-->.
                  </span>
                  &nbsp;
                  <span data-ws-show-if-state="isPayAsYouGo=true">
                    + <span data-ws-label-state="remainingCreditsChars"></span>.
                  </span>
                  &nbsp;
                  + ë” ì¶”ê°€<!--ADD MORE-->
                </p>
              </div>

          </div>
          <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626"
                  crossorigin="anonymous"></script>-->
          <!-- ResponsiveHorizontal20230518 -->
          <!--<ins class="adsbygoogle Ad Ad-bottom-banner"
               data-ad-client="ca-pub-5434274073094626"
               data-ad-slot="8622089184" data-ws-show-if-state="isPremium=false"></ins>
          -->
          <div class="Bottom-lift-up" style="height: 0;width: 100%;"></div>
        </div>

        <!-- ResponsiveVertical20230518 -->
        <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626"
                crossorigin="anonymous"></script>-->
        <!--<ins class="adsbygoogle Ad Ad-right-banner"
             data-ad-client="ca-pub-5434274073094626"
             data-ad-slot="1642597928" data-ws-show-if-state="isPremium=false"></ins>-->

      </div>

    </div>
    <!-- Right Settings Sidebar -->
    <div id="settingsSidebar" class="settings-sidebar" data-ws-show-if-state="isSettingsSidebarOpen=true">
      <div class="settings-sidebar-overlay" data-ws-onClick="closeSettingsSidebar"></div>
      <div class="settings-sidebar-content">
        <div class="settings-sidebar-header">
          &nbsp;
          <button class="settings-sidebar-close-btn" data-ws-onClick="closeSettingsSidebar" aria-label="Close Settings">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-eye-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.585 10.587a2 2 0 0 0 2.829 2.828" /><path d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87" /><path d="M3 3l18 18" /></svg>
          </button>
        </div>

        <div class="settings-sidebar-body">
          <!-- Header Overlays for Stacking -->
          <div class="settings-headers-top-overlay"></div>
          <div class="settings-headers-bottom-overlay"></div>

          <div class="settings-sidebar-scrollable">
            <!-- Language Selection Section -->
            <div class="settings-section" data-title="">
                <div class="settings-section-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="settings-section-icon">
                    <path d="M4 5h7" />
                    <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
                    <path d="M5 9c0 2.144 2.952 3.908 6.7 4" />
                    <path d="M12 20l4 -9l4 9" />
                    <path d="M19.1 18h-6.2" />
                  </svg>
                  <span class="settings-section-title"></span>
                  <span class="settings-section-value" data-ws-label-state="selectedLanguageFlag"></span>
                </div>
                <div class="settings-control">
                  <div class="unified-language-selector" id="unifiedLanguageSelector">
                    <!-- Closed state: shows selected language -->
                    <div class="language-selector-closed" data-ws-onClick="openLanguageSelector">
                      <span class="selected-language-display Flag-font" data-ws-label-state="selectedLanguageDisplay">ğŸ‡ºğŸ‡¸ English</span>
                      <svg class="language-selector-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 9l6 6l6-6" />
                      </svg>
                    </div>

                    <!-- Open state: search input + dropdown -->
                    <div class="language-selector-open hidden">
                      <input type="text" class="language-search-input" placeholder="Search languages..." data-ws-onInput="filterUnifiedLanguages" autocomplete="off">
                      <div class="language-dropdown" id="languageDropdown">
                        <!-- Language options will be populated here -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Playback Rate Section -->
              <div class="settings-section" data-title="">
            <div class="settings-section-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="settings-section-icon">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12,6 12,12 16,14" />
              </svg>
              <span class="settings-section-title"></span>
              <span class="settings-section-value" data-ws-label-state="selectedRate">1.0</span>
            </div>
            <div class="settings-control">
              <div class="speed-control">
                <button class="speed-btn speed-btn-decrease" data-ws-onClick="slower" aria-label="Decrease speed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14" />
                  </svg>
                </button>
                <input type="range" class="speed-slider" data-ws-value-state="selectedRateSliderValue" min="1" max="16" data-ws-onInput="onRateChange" aria-label="Playback speed">
                <button class="speed-btn speed-btn-increase" data-ws-onClick="faster" aria-label="Increase speed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 5v14" />
                    <path d="M5 12h14" />
                  </svg>
                </button>
              </div>
              <div class="speed-labels">
                <span>0.5x</span>
                <span>1.0x</span>
                <span>2.0x</span>
              </div>
            </div>
          </div>

              <!-- Voice Selection Section -->
              <div class="settings-section" data-title="">
            <div class="settings-section-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="settings-section-icon">
                <circle cx="9" cy="9" r="4" />
                <path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                <path d="M17.76 5.36l1.68 1.69c2.02 2.02 2.02 5.07 0 7.27l-1.68-1.69c.84-1.18.84-2.71 0-3.89z" />
                <path d="M20.07 2l1.63 1.63c3.91 3.91 3.91 9.95 0 14l-1.63-1.63c2.77-3.02 2.77-7.56 0-10.74z" />
              </svg>
              <span class="settings-section-title"></span>
              <div class="voice-filter-controls">
                <button class="voice-filter-btn active" data-filter="all" data-ws-onClick="filterVoices">All</button>
                <button class="voice-filter-btn" data-filter="premium" data-ws-onClick="filterVoices">Premium</button>
                <button class="voice-filter-btn" data-filter="basic" data-ws-onClick="filterVoices">Basic</button>
              </div>
            </div>
            <div class="settings-control">
              <div id="sidebarVoicesList" class="sidebar-voices-list">
                <!-- Voices will be populated here -->
              </div>
            </div>
          </div>


            <!-- More Voices Section -->
            <div class="settings-section" data-title="More Voices (+600)">
              <div class="settings-section-header">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="settings-section-icon">
                  <circle cx="9" cy="9" r="4" />
                  <path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                  <path d="M17.76 5.36l1.68 1.69c2.02 2.02 2.02 5.07 0 7.27l-1.68-1.69c.84-1.18.84-2.71 0-3.89z" />
                  <path d="M20.07 2l1.63 1.63c3.91 3.91 3.91 9.95 0 14l-1.63-1.63c2.77-3.02 2.77-7.56 0-10.74z" />
                </svg>
                <span class="settings-section-title">More Voices (+600)</span>
              </div>
              <div class="settings-control">
                <p>You can select ANY neural voice from <a style="color: #0a84ff;text-decoration: underline;" href="https://speech.azure.cn/portal/voicegallery" target="_blank">Azure's Voice Gallery</a> paste its name into the input box - and click 'Use Azure Voice'</p>
                <div id="" class="">
                  <input id="azureVoiceInput" type="text" placeholder="Azure Voice Name..." style="width: 100%; margin-bottom: 8px;">
                  <button onclick="appMethods.setVoiceUriDirectly('azure.' + document.getElementById('azureVoiceInput').value)" style="width: 100%; background-color: #0a84ff; color: white; border: none; border-radius: 6px; padding: 10px 16px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease;">Use Azure Voice</button>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- Removed: overlay containers moved inside sidebar body -->
      </div>
    </div>


  </div>







  <div id="exportsListModal" class="Sliding-In-Modal hidden">
    <div class="Sliding-In-Modal-Content" style="background-color: darkred; color: white; overflow-y: auto;position: relative;">
      <div onclick="openOrCloseExportsListModal(true);" style="position: absolute; right: 10px; top: 10px; cursor: pointer;width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 50%;border: 2px solid white;color:white;stroke:white;">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>
      </div>
      <div style="text-align: center">
        <h2>
          <svg style="vertical-align: middle;" xmlns="http://www.w3.org/2000/svg"  width="30"  height="30"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>
          &nbsp;
          ìƒì„±ëœ ì˜¤ë””ì˜¤ í´ë”
        </h2>
        <p style="text-align: center">ìƒì„±ëœ ì˜¤ë””ì˜¤ íŒŒì¼<sup>*</sup>ì„ ë‚˜ì—´í•˜ì—¬ ë‚˜ì¤‘ì— ë‹¤ìš´ë¡œë“œ, ê³µìœ  ë˜ëŠ” ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <p style="font-size: 0.7em;font-weight: bold; opacity: 0.8; margin-top: -10px;"><sup>*</sup>&nbsp;MP3 ë‚´ë³´ë‚´ê¸°ì˜ ê²½ìš°, 2kìë³´ë‹¤ ê¸´ ê²ƒ. í”„ë¦¬ë¯¸ì—„ ê³„ì •ì´ ìˆëŠ” ë™ì•ˆ ì—¬ê¸° ì €ì¥ë©ë‹ˆë‹¤.</p>
        <div style="text-align: center">
          <button onclick="openOrCloseExportsListModal(true);" data-ws-toggle="#exportModal" style="text-decoration: none;cursor: pointer; color: white;background-color: darkgreen;text-transform: uppercase" class="Full-width-btn">+ í…ìŠ¤íŠ¸ë¡œ ìƒˆ MP3 ìƒì„±í•˜ë ¤ë©´ í´ë¦­</button>
        </div>
        <!-- Podcast Channel URL Section -->
        <div data-ws-show-if-state="podcast_main_channel_url=true" style="margin: 20px 0; padding: 15px; background-color: rgba(255,255,255,0.1); border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);">
          <h3 style="margin: 0 0 10px 0; color: #fff; font-size: 16px;">
            <svg style="vertical-align: middle;margin: 0 4px 5px;" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-building-broadcast-tower"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M16.616 13.924a5 5 0 1 0 -9.23 0" /><path d="M20.307 15.469a9 9 0 1 0 -16.615 0" /><path d="M9 21l3 -9l3 9" /><path d="M10 19h4" /></svg>
            ê°œì¸ íŒŸìºìŠ¤íŠ¸ ì±„ë„&nbsp;&nbsp;<a style="font-size: smaller; color: lightgoldenrodyellow; text-decoration: none; text-transform: uppercase" href="https://ttsreader.com/docs/guides/create-podcasts/" target="_blank">Learn more</a>
          </h3>
          <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
            <span data-ws-label-state="podcast_main_channel_url" style="flex: 1; min-width: 200px; font-family: monospace; background-color: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; word-break: break-all; color: #fff;"></span>
            <button onclick="copyPodcastUrl(this)" style="background-color: #4CAF50; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 5px; font-size: 12px; text-transform: uppercase;" title="URL ë³µì‚¬">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
                <path d="M4 16c-1.1 0 -2 -.9 -2 -2V4c0 -1.1 .9 -2 2 -2h10c1.1 0 2 .9 2 2"></path>
              </svg>
              URL ë³µì‚¬
            </button>
          </div>
        </div>

        <!-- Podcast Channel Info (when no URL) -->
        <div data-ws-show-if-state="podcast_main_channel_url=false" style="margin: 20px 0; padding: 15px; background-color: rgba(255,255,255,0.1); border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);">
          <h3 style="margin: 0 0 10px 0; color: #fff; font-size: 16px;">
            <svg style="vertical-align: middle;margin: 0 4px 5px;" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-building-broadcast-tower"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M16.616 13.924a5 5 0 1 0 -9.23 0" /><path d="M20.307 15.469a9 9 0 1 0 -16.615 0" /><path d="M9 21l3 -9l3 9" /><path d="M10 19h4" /></svg>
            ê°œì¸ íŒŸìºìŠ¤íŠ¸ ì±„ë„&nbsp;<a style="font-size: smaller; color: lightgoldenrodyellow; text-decoration: none; text-transform: uppercase" href="https://ttsreader.com/docs/guides/create-podcasts/" target="_blank">Learn more</a>
          </h3>
          <div class="podcast-description-container" style="position: relative;">
            <div class="podcast-description-collapsed" style="overflow: hidden; line-height: 1.4;">
              <span class="podcast-description-text">TTSReaderëŠ” ìƒì„±ëœ ìŒì„±ì„ í˜¸ìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ê°œì¸ íŒŸìºìŠ¤íŠ¸ ì±„ë„ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„ í˜¸í•˜ëŠ” íŒŸìºìŠ¤íŠ¸ ì•±ì—ì„œ ì§ì ‘ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì±„ë„ì„ ê³µìœ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìœ„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì˜¤ë””ì˜¤ë¥¼ ìƒì„±í•˜ì„¸ìš” - ì±„ë„ì„ ë§Œë“¤ê¸° ìœ„í•´ íŒŸìºìŠ¤íŠ¸ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.</span>
            </div>
            <button onclick="togglePodcastDescription(this)" class="podcast-description-toggle" style="background: none; border: none; color: #4CAF50; cursor: pointer; text-decoration: underline; font-size: 12px; margin-top: 5px; padding: 0;">
              <span class="toggle-text">ë” ë³´ê¸°</span>
            </button>
          </div>
        </div>
      </div>
      <br/>
      <div id="exportsRowsContainer">
        <!-- rows inserted here -->


        <h3 style="text-align: center">Demo Generated Files</h3>
        <div id="demoExportsRowsContainer"></div>
      </div>

      <template id="exportsListItemTemplate">
        <div class="job-download-link" style="text-decoration: none;"><div class="job-row">
          <span class="job-date"></span>
          <span class="job-preview"></span>
          <span class="voice-lang Flag-font" title="Language & accent">ğŸ‡¬ğŸ‡§</span>
          <span class="voice-name">David</span>&nbsp;X
          <span class="job-rate" style="padding-left: 0"></span>
          <span class="job-state" style="font-weight: bold;border: 1px solid yellow; padding: 0;"></span>
          <a href="somehreftofile" download="ttsreader.mp3">
            <span class="job-download-btn"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg></span>
          </a>
        </div></div>
      </template>
    </div>
  </div>

  <div id="newUpgradeModal" class="Sliding-In-Modal hidden" style="z-index: 9999999">
      <iframe></iframe>
  </div>

  <div id="renderedModal" class="Sliding-In-Modal hidden">
      <iframe></iframe>
  </div>






  <div id="onboardingModal" class="wideModal" style="display: none;" dir="">
    <!-- Step 1: Welcome Message -->
    <div data-ws-step="1" class="modal-step" style="background: url('/images/anima2.webp') no-repeat center;background-size: cover;">
      <div style="flex:1"></div>
      <h1><span style="color:darkred;">TTS</span>Reader 3ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤<!-- Welcome to <span style="color:darkred;">TTS</span>Reader 3 --></h1>
      <h2 style="font-size: smaller; font-weight: normal">í•œêµ­ì–´ ë° ê¸°íƒ€ ì–¸ì–´ì˜ í…ìŠ¤íŠ¸ ìŒì„± ë³€í™˜</h2>
      <p>ì‹¤ê°ë‚˜ëŠ” AI ëª©ì†Œë¦¬ë¡œ í…ìŠ¤íŠ¸ì— ìƒëª…ì„ ë¶ˆì–´ë„£ìœ¼ì„¸ìš”<!-- Bring text to life with realistic AI voices --></p>
      <br/>
      <button class="primary" onclick="nextStep(this)" style="margin: auto;">ì‹œì‘í•˜ê¸°<!-- Let's Start --></button>
      <br/><br/>
      <div data-nosnippet class="theme-toggle">
        <span class="label">ğŸŒ ë¼ì´íŠ¸<!-- ğŸŒ Light --></span>
        <label class="switch">
          <input type="checkbox" class="themeSwitch">
          <span class="slider"></span>
        </label>
        <span class="label">ğŸŒ™ ë‹¤í¬<!-- ğŸŒ™ Dark --></span>
      </div>
      <br/>
      <p style="font-size: smaller"><i>By continuing you agree to our <a href="/docs/legal/terms/" target="_blank">terms</a> & <a href="/docs/legal/privacy/" target="_blank">privacy policy</a></i></p>
      <p data-ws-show-if-state="isSignedIn=false">
        ì´ë¯¸ ê³„ì •ì´ ìˆë‚˜ìš”?
        <br/>
        <sign-in-buttons></sign-in-buttons>
      </p>
      <div style="flex:1;" ></div>
    </div>

    <!-- Step 2: Language Selector -->
    <div data-ws-step="2" class="modal-step" style="display: none">
      <div class="modal-content">
        <div style="flex:1"></div>
        <p style="font-size: larger;">ì½ê¸° ì–¸ì–´ ì„ íƒ<!-- Select Your Reading Language --></p>
        <select class="Language-selector Flag-font" data-ws-onChange="handleLanguageChange" data-ws-value-state="selectedLanguageCode" style="font-size: 1.1em;"></select>
        <p>ë‚˜ì¤‘ì— ì–¸ì œë“ ì§€ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<!-- You can always change it later. --></p>
        <br/>
        <div>
          <button class="primary" onclick="nextStep(this)">ë‹¤ìŒ<!-- Next --></button>
        </div>
        <br/>
        <div style="flex:0.67"></div>
        <div data-nosnippet class="theme-toggle">
          <span class="label">ğŸŒ ë¼ì´íŠ¸<!-- ğŸŒ Light --></span>
          <label class="switch">
            <input type="checkbox" class="themeSwitch">
            <span class="slider"></span>
          </label>
          <span class="label">ğŸŒ™ ë‹¤í¬<!-- ğŸŒ™ Dark --></span>
        </div>
        <div style="flex:0.33"></div>
      </div>

      <div data-ws-show-if-state="ttsReady=false" style="position: absolute;top:0;bottom:0;right:0;left:0;text-align: center;">
        <div style="width: 100%;height: 100%;display: flex;flex-direction: column;background-color: white;">
          <div style="flex: 1"></div>
          <div class="voice-loader-container">
            <div class="wave-loader">
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
            </div>
            <br/>
            <div class="loading-text">
              <p style="font-size: larger;">ëª©ì†Œë¦¬ ë¡œë”© ì¤‘...<!-- Loading voices... --></p>
              <p>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”<!-- This will only take a moment --></p>
            </div>
          </div>
          <div style="flex: 1"></div>
        </div>
      </div>
    </div>

    <!-- Step 3: Voice Selector -->
    <div data-ws-step="3" class="modal-step" style="display: none">
      <!--<div class="modal-header">
        <span>ì„ í˜¸í•˜ëŠ” ëª©ì†Œë¦¬ ì„ íƒ&lt;!&ndash; Select Your Preferred Voice &ndash;&gt;</span><br/>
        <span style="font-size: 16px;opacity: 0.8;">ëª©ì†Œë¦¬ë¥¼ í´ë¦­í•˜ì—¬ ì–´ë–»ê²Œ ë“¤ë¦¬ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì¤€ë¹„ë˜ë©´ <a style="color: orangered;cursor: pointer" onclick="nextStep(this)">ë‹¤ìŒ</a>ì„ ëˆ„ë¥´ì„¸ìš”.&lt;!&ndash; Click a voice to hear how it sounds. When ready, tap <a style="color: orangered;cursor: pointer" onclick="nextStep(this)">Next</a>. &ndash;&gt;</span>
      </div>-->
      <div class="modal-content">
        <p>ì„ í˜¸í•˜ëŠ” ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”. ë‚˜ì¤‘ì— ì–¸ì œë“ ì§€ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<!-- You can always change it later. --></p>
        <div style="flex:1"></div>
        <div class="Voices-Gallery TabsContainer" style="max-width: 1000px; margin: auto;">
          <div class="TabTitlesContainer">
            <div class="active">í”„ë¦¬ë¯¸ì—„ AI ìŒì„± (ë¬´ë£Œ ì²´í—˜ì€ ë¡œê·¸ì¸ í•„ìš”, ê²°ì œ ì—†ìŒ)</div>
            <div>ë¬´ë£Œ ë° ë¬´ì œí•œ ìŒì„± - ë¡œê·¸ì¸ ë¶ˆí•„ìš”</div>
          </div>
          <div class="TabContentsContainer">
            <div style="display: block" class="Gallery-Container Voices-Gallery-Container-Premium"></div>
            <div style="display: none" class="Gallery-Container Voices-Gallery-Container-Free"></div>
          </div>
        </div>
        <template id="voiceTileTemplate">
          <div class="voice-tile" data-ws-voiceURI="ttsreader.gcp.standard-A" data-ws-audio-src="https://ttsreader.com/player/audio/Christopher.mp3" style="font-size: larger; position: relative;">
            <div>
              <span class="voice-name">David</span>
            </div>
            <div class="Voice-Icons">
              <span class="voice-gender-male" title="Male">ğŸ‘¨</span>
              <span class="voice-gender-female" title="Female">ğŸ‘©</span>
              <span class="voice-lang Flag-font">ğŸ‡¬ğŸ‡§</span>
              <span class="voice-premium" title="Premium Voice">ğŸŒŸ</span>
              <span class="voice-publishing" title="Allowed for Publishing for Premium Users">
                <svg style="width:1em;height:1em;position: relative;top:3px;" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1phnduy" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
                  <path d="M14 12c0 .74-.4 1.38-1 1.72V22h-2v-8.28c-.6-.35-1-.98-1-1.72 0-1.1.9-2 2-2s2 .9 2 2m-2-6c-3.31 0-6 2.69-6 6 0 1.74.75 3.31 1.94 4.4l1.42-1.42C8.53 14.25 8 13.19 8 12c0-2.21 1.79-4 4-4s4 1.79 4 4c0 1.19-.53 2.25-1.36 2.98l1.42 1.42C17.25 15.31 18 13.74 18 12c0-3.31-2.69-6-6-6m0-4C6.48 2 2 6.48 2 12c0 2.85 1.2 5.41 3.11 7.24l1.42-1.42C4.98 16.36 4 14.29 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 2.29-.98 4.36-2.53 5.82l1.42 1.42C20.8 17.41 22 14.85 22 12c0-5.52-4.48-10-10-10"></path>
                </svg>&nbsp;
              </span>
            </div>
            <div class="checkmark">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-circle-check">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z" />
              </svg>
            </div>
            <div style="position: absolute; bottom: 0; right: 0;">
              <div class="wave-container">
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
              </div>
            </div>
          </div>
        </template>
        <div style="flex:2"></div>
      </div>
      <!--<div data-ws-show-if-state="isSignedIn=false">
        <div class="modal-footer" style="display: flex">
          <button class="secondary" style="flex: 1" onclick="prevStep(this)">ë’¤ë¡œ&lt;!&ndash; Back &ndash;&gt;</button>
          <button data-ws-show-if-state="isVoicePremium=true" class="primary" style="flex: 2" onclick="signIn()">Googleë¡œ ë¡œê·¸ì¸</button>
          <button data-ws-show-if-state="isVoicePremium=false" class="primary hidden" style="flex: 2" onclick="closeOnboarding()">ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>-->
      <div>
        <div class="modal-footer" style="display: flex">
          <button class="secondary" style="flex: 1" onclick="prevStep(this)">ë’¤ë¡œ<!-- Back --></button>
          <button class="primary" style="flex: 2" onclick="closeOnboarding();appMethods.stopAnyTestOrOtherPlay();">ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>
    </div>

    <!-- Step 4: Finish Onborading - Not active -->
    <div data-ws-step="4" class="modal-step" style="display: none;">
      <div style="flex:1"></div>
      <h1>ëª¨ë“  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤<!-- You're all set --></h1>
      <p style="max-width: 600px; margin: auto;">ë‹¤ìŒ í™”ë©´ì—ëŠ” í…ìŠ¤íŠ¸ ìƒìê°€ ìˆì–´ ìƒë‹¨ì˜ ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ íŒŒì¼ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤€ë¹„ë˜ë©´ í•˜ë‹¨ì˜ 'ì¬ìƒ' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²­ì·¨ë¥¼ ì¦ê¸°ì„¸ìš”.<!-- In the next view you'll have a text box, where you can input your own text or select a file using the buttons at the top. When ready, click the 'play' button at the bottom and enjoy listening. --></p>
      <br/>
      <button class="primary" onclick="closeOnboarding()" style="margin: auto;">ì‹œì‘í•˜ê¸°<!-- Let's Go --></button>
      <div style="flex:2"></div>

      <!-- Sign in overlay if premium voice -->
      <div data-ws-show-if-state="isSignedIn=false">
        <div data-ws-show-if-state="isVoicePremium=true" class="hidden">
          <div class="modal-step-overlay" style="display:flex;position: absolute;top:0;bottom:0;left:0;right:0;flex-direction: column">
            <div style="flex:1.5"></div>
            <p style="max-width: 600px; margin: auto;font-size: larger;">
              ì„ íƒí•œ ìŒì„± <span data-ws-label-state="voiceLabel"></span>&nbsp; ì€(ëŠ”) í›Œë¥­í•œ ì„ íƒì…ë‹ˆë‹¤!<!-- The voice you selected <span data-ws-label-state="voiceLabel"></span>&nbsp; is an excellent choice! As it is a premium voice, sign-in is required. -->
            </p>
            <br/><br/>
            <button onclick="signIn();" class="primary" style="margin: auto;border: 1px solid;border-radius: 10px;width: 500px;max-width: 90%;">Googleë¡œ ë¡œê·¸ì¸<!-- Sign In with Google --></button>
            <br/>
            ë¹„ë°€ë²ˆí˜¸ë‚˜ ê²°ì œ ìˆ˜ë‹¨ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            <br/>
            <div style="flex:1"></div>
            <p>Or, if you prefer, you may <a style="text-decoration: underline; cursor: pointer" onclick="prevStep(this)">go back and select a free & unlimited voice.</a></p>
            <div>
              <button class="secondary" onclick="prevStep(this)">ë’¤ë¡œ<!-- Back --></button>
            </div>
            <div style="flex:1"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div data-ws-show-if-state="isSignedIn=false">
  <div class="Modal" id="premiumVoiceSignInModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="flex: 1"></div>
      <p style="font-size: larger;">ì„ íƒí•œ ìŒì„± <span data-ws-label-state="voiceLabel"></span>&nbsp; ì€(ëŠ”) í›Œë¥­í•œ ì„ íƒì…ë‹ˆë‹¤!<!-- The voice you selected <span data-ws-label-state="voiceLabel"></span>&nbsp; is an excellent choice! As it is a premium voice, sign-in is required. Please securely sign in with Google to continue. --></p>
      <br/>
      <sign-in-buttons></sign-in-buttons>
      <button style="margin:60px auto 30px; width: unset;" onclick='window.AppAnalytics.sendEvent("premiumVoiceSignInModal_free_voice");appMethods.closeModal("premiumVoiceSignInModal");appMethods.handleVoiceLabelClick();' class="Full-width-btn">ë˜ëŠ” ê¸°ë³¸ ìŒì„±ìœ¼ë¡œ ì „í™˜<!--Or, Select a Non Premium Voice--></button>
      <div style="flex: 2"></div>
    </div>
    <div style="height:20px;"></div>
  </div>
  </div>

  <div class="Modal" id="emptyTextModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px;">
        <h3 class="Modal-title">
          í…ìŠ¤íŠ¸ ì†ŒìŠ¤ ì„ íƒ
        </h3>
        <p class="Modal-p" style="text-align: center">
          ì„¤ì •ë˜ë©´ - í…ìŠ¤íŠ¸ë¥¼ í¸ì§‘í•˜ê³ , ë“£ê¸° ìœ„í•´ ì¬ìƒí•˜ê³ , ì˜¤ë””ì˜¤ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª©ì†Œë¦¬ì™€ ì†ë„ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì„ íƒí•˜ë ¤ë©´ <a style='color: orangered; text-decoration:none;cursor: pointer;' title='Open voice gallery' data-ws-toggle='#voicesModal' href='#'>ëª©ì†Œë¦¬ ê°¤ëŸ¬ë¦¬</a>ë¥¼ ë°©ë¬¸í•˜ì„¸ìš”.
        </p>
        <div class="css-container">
          <div class="actions">
            <button class="action-card" onclick="quill.focus();" data-ws-toggle="#emptyTextModal">
              <div class="emoji">âœï¸</div>
              <div class="label">í…ìŠ¤íŠ¸ í¸ì§‘ê¸°ì—ì„œ ì§ì ‘ í¸ì§‘</div>
            </button>
            <button class="action-card" data-ws-toggle="#emptyTextModal" onclick="document.querySelector('input[type=file]').click()" >
              <div class="emoji">ğŸ“–</div>
              <div class="label">íŒŒì¼ ì—´ê¸° (PDF, DOCX, EPUB, TXT, ...)</div>
            </button>
            <button class="action-card" data-ws-toggle="#openUrlModal" onclick="closeSelf(event);">
              <div class="emoji">ğŸŒ</div>
              <div class="label">ì›¹í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°</div>
            </button>
          </div>
        </div>
        <br/><br/>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="signinModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;width: fit-content">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px;">
        <p class="Modal-title">
          ë¡œê·¸ì¸ / ê°€ì…
        </p>
        <br/>
        <sign-in-buttons></sign-in-buttons>
      </div>
      <div style="height:40px;"></div>
    </div>

  </div>

  <div class="Modal" id="voicesModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: 1.2em;">
        <select class="Language-selector Flag-font" data-ws-onChange="handleLanguageChange" data-ws-value-state="selectedLanguageCode" style="font-size: 1.1em;"></select>
      </h4>
      <div style="max-width: 100%; width: 450px; margin: -5px auto 30px; flex: 1;overflow-y: auto;text-align: left">

        <div style="text-align: center;position: relative">
          <div style="position: absolute;left: 0;top: 7px;opacity: 0.7;font-size: smaller;">
            ì†ë„<!-- Speed --> X
          </div>
          <span data-ws-onClick="slower" style="user-select: none;vertical-align: baseline;border: 1px solid blue;text-align: center;cursor: pointer;display: inline-block; line-height: 16px; font-size: 18px; margin: 5px; width: 20px;height: 20px; border-radius: 10px;background-color: white; color: blue;">-</span>
          <span data-ws-label-state="selectedRate" style="width: 2em;display:inline-block;text-align: center">1</span>
          <span data-ws-onClick="faster" style="user-select: none;vertical-align: baseline;border: 1px solid blue;text-align: center;cursor: pointer;display: inline-block; line-height: 16px; font-size: 18px; margin: 5px; width: 20px;height: 20px; border-radius: 10px;background-color: white; color: blue;">+</span>
          <input type="range" data-ws-value-state="selectedRateSliderValue" style="width: 300px;max-width:90%; margin: auto;display: block;height: 50px;" min="1" max="16" data-ws-onInput="onRateChange">
        </div>
        <div style="text-align: right;opacity: 0.7;margin-bottom: 15px;margin-right: 10px;">
          <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
            <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
          </svg>
          <a href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds" target="_blank" style="text-decoration: none;">
            ë³µì‚¬&nbsp;to combine voices<!-- Copy -->
            <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"></path>
              <path d="M11 13l9 -9"></path>
              <path d="M15 4h5v5"></path>
            </svg>
          </a>
        </div>
        <div class="TabsContainer">
          <div class="TabTitlesContainer">
            <div style="text-align: center" class="active">í”„ë¦¬ë¯¸ì—„ AI ìŒì„± (ë¬´ë£Œ ì²´í—˜ì€ ë¡œê·¸ì¸ í•„ìš”, ê²°ì œ ì—†ìŒ)</div>
            <div style="text-align: center">ë¬´ë£Œ ë° ë¬´ì œí•œ ìŒì„± - ë¡œê·¸ì¸ ë¶ˆí•„ìš”</div>
          </div>
          <div class="TabContentsContainer" style="padding-top: 16px;">
            <div style="display: block" class="Best-voices"></div>
            <div style="display: none" class="Voices-list"></div>
          </div>
        </div>

        <template id="voiceOptionTemplate">
          <div class="Voice-list-element" data-ws-voiceURI="ttsreaderServer.gcp.en-US-Chirp-HD-D" data-ws-voiceName="David" data-ws-select-if-state="selectedVoiceUri=ttsreaderServer.gcp.en-US-Chirp-HD-D" selected="true">
            <span onclick="window.appMethods.selectVoice(this)">
              <span class="voice-lang Flag-font" title="Language & accent">ğŸ‡¬ğŸ‡§</span>
              <span class="voice-gender-male" title="Male">ğŸ‘¨</span>
              <span class="voice-gender-female" title="Female">ğŸ‘©</span>
              <span class="voice-name" title="Click to select voice">David</span>
            </span>
            <span class="voice-publishing" style="color: green"  title="Allowed for publishing for Premium accounts">âœ“</span>
            <span class="voice-premium" title="Premium Voice">ğŸŒŸ</span>
            <span title="Copy inline voice-setter" onclick="window.appMethods.copyVoice(this)"><svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path></svg></span>
            <span class="play-test-btn" title="Click to test voice" onclick="window.appMethods.testVoice(this)">
              <svg class="Top-btn-svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>
              <svg style="height: 22px;" xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="currentColor" class="Top-btn-svg icon icon-tabler icons-tabler-filled icon-tabler-player-pause"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /><path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" /></svg>
            </span>
          </div>
        </template>

        <template id="sidebarVoiceOptionTemplate">
          <div class="sidebar-voice-item" data-ws-voiceURI="ttsreaderServer.gcp.en-US-Chirp-HD-D" data-ws-voiceName="David" data-ws-select-if-state="selectedVoiceUri=ttsreaderServer.gcp.en-US-Chirp-HD-D" data-voice-type="premium"  onclick="window.appMethods.selectVoice(this)">
            <div class="sidebar-voice-avatar" onclick="window.appMethods.selectVoice(this)">
              <canvas class="voice-avatar-canvas" width="40" height="40"></canvas>
            </div>
            <div class="sidebar-voice-info" onclick="window.appMethods.selectVoice(this)">
              <div class="sidebar-voice-name">David</div>
              <div class="sidebar-voice-meta">
                <span class="voice-lang Flag-font" title="Language & accent">ğŸ‡¬ğŸ‡§</span>
                <span class="voice-gender-male" title="Male">ğŸ‘¨</span>
                <span class="voice-gender-female" title="Female">ğŸ‘©</span>
                <span class="voice-type-badge" title="Voice Type"></span>
              </div>
            </div>
            <div class="sidebar-voice-actions">
              <button class="sidebar-voice-btn" title="Test voice" onclick="window.appMethods.testVoice(this)" aria-label="Test voice">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="5,3 19,12 5,21" />
                </svg>
              </button>
              <button class="sidebar-voice-btn" title="Copy voice settings" onclick="window.appMethods.copyVoice(this);event.stopPropagation();" aria-label="Copy voice settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                </svg>
              </button>
            </div>
          </div>
        </template>

      </div>
      <br/>
      <!--<select class="Voice-selector" data-ws-onChange="handleVoiceChange" data-ws-value-state="selectedVoiceUri"></select>-->
      <!--<p style="text-align: center">
        <span style="color: green">âœ“</span> í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìì—ê²Œ ê²Œì‹œê°€ í—ˆìš©ëœ ìŒì„±ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤&lt;!&ndash; Indicates voice is allowed for publishing for premium users &ndash;&gt; <span data-ws-show-if-state="isPremium=true" data-ws-toggle="#upgradeModal">ë³¸ì¸ìœ¼ë¡œì„œ ğŸ†&lt;!&ndash; as yourself ğŸ† &ndash;&gt;</span><a data-ws-show-if-state="isPremium=false" data-ws-toggle="#upgradeModal" style="cursor: pointer;">- <u>ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”&lt;!&ndash; click here to upgrade &ndash;&gt;</u></a>
      </p>-->
    </div>
  </div>


  <div class="Modal" id="simpleUpgradeModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: 1.2em;">
        Select Your Subscription or Package
      </h4>
      <div style="max-width: 100%; margin: -5px auto 30px; flex: 1;overflow-y: auto;text-align: left">
        <!-- TTSReader Plans (inline-styled, modern look) -->
        <div style="font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; max-width: 900px; margin: 32px auto; color: #0f172a;">
          <h2 style="margin: 0 0 16px 0; font-size: 26px; letter-spacing: .2px;">Choose Your Plan</h2>
          <div style="font-size:14px; color:#475569; margin-bottom:18px;">
            Flexible options for creators and power users. Premium characters count toward high-quality voices.
          </div>

          <div style="background:#ffffff; border:1px solid #e2e8f0; border-radius:16px; overflow:hidden; box-shadow:0 8px 24px rgba(2,6,23,.08);">
            <div style="background:linear-gradient(180deg,#f8fafc, #ffffff); border-bottom:1px solid #e2e8f0; padding:14px 18px; display:flex; gap:12px; align-items:center;">
              <div style="font-weight:700; font-size:13px; width:34%;">Plan</div>
              <div style="font-weight:700; font-size:13px; width:20%;">Price</div>
              <div style="font-weight:700; font-size:13px; width:36%;">What you get</div>
              <div style="font-weight:700; font-size:13px; width:10%; text-align:right;">&nbsp;</div>
            </div>

            <!-- Row 1 -->
            <div style="display:flex; gap:12px; align-items:center; padding:18px; border-bottom:1px solid #eef2f7;">
              <div style="width:34%; display:flex; align-items:center; gap:10px;">
                <span style="display:inline-block; padding:6px 10px; font-size:11px; font-weight:700; color:#1e293b; background:#e2e8f0; border-radius:999px;">Monthly</span>
                <span style="color:#334155; font-weight:600;">Subscription</span>
              </div>
              <div style="width:20%; font-weight:700; color:#0f172a;">$10.99<span style="font-weight:500; color:#64748b;">/mo</span></div>
              <div style="width:36%; color:#334155;">Quota: <strong>1,000,000</strong> premium characters <span style="color:#64748b;">every month</span></div>
              <div style="width:10%; text-align:right;">
                <a href="#" style="display:inline-block; background:#2563eb; color:#fff; text-decoration:none; padding:10px 14px; border-radius:10px; font-weight:700; font-size:13px; box-shadow:0 6px 14px rgba(37,99,235,.25); transition:transform .15s ease, box-shadow .15s ease;"
                   onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 18px rgba(37,99,235,.32)';"
                   onmouseout="this.style.transform=''; this.style.boxShadow='0 6px 14px rgba(37,99,235,.25)';">BUY</a>
              </div>
            </div>

            <!-- Row 2 -->
            <div style="display:flex; gap:12px; align-items:center; padding:18px; border-bottom:1px solid #eef2f7; background:linear-gradient(180deg,#fbfdff,#ffffff);">
              <div style="width:34%; display:flex; align-items:center; gap:10px;">
                <span style="display:inline-block; padding:6px 10px; font-size:11px; font-weight:700; color:#065f46; background:#d1fae5; border-radius:999px;">Annual</span>
                <span style="color:#334155; font-weight:600;">Subscription</span>
                <span style="margin-left:8px; padding:4px 8px; font-size:10px; font-weight:800; color:#fff; background:#10b981; border-radius:8px;">Save 25%+</span>
              </div>
              <div style="width:20%; font-weight:700; color:#0f172a;">$99<span style="font-weight:500; color:#64748b;">/yr</span></div>
              <div style="width:36%; color:#334155;">Quota: <strong>1,000,000</strong> premium characters <span style="color:#64748b;">every month</span></div>
              <div style="width:10%; text-align:right;">
                <a href="#" style="display:inline-block; background:#0ea5e9; color:#fff; text-decoration:none; padding:10px 14px; border-radius:10px; font-weight:700; font-size:13px; box-shadow:0 6px 14px rgba(14,165,233,.25); transition:transform .15s ease, box-shadow .15s ease;"
                   onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 18px rgba(14,165,233,.32)';"
                   onmouseout="this.style.transform=''; this.style.boxShadow='0 6px 14px rgba(14,165,233,.25)';">BUY</a>
              </div>
            </div>

            <!-- Row 3 -->
            <div style="display:flex; gap:12px; align-items:center; padding:18px;">
              <div style="width:34%; display:flex; align-items:center; gap:10px;">
                <span style="display:inline-block; padding:6px 10px; font-size:11px; font-weight:700; color:#7c2d12; background:#ffedd5; border-radius:999px;">Credits</span>
                <span style="color:#334155; font-weight:600;">One-time (non-recurring)</span>
              </div>
              <div style="width:20%; font-weight:700; color:#0f172a;">$32<span style="font-weight:500; color:#64748b;"> / 1M chars</span></div>
              <div style="width:36%; color:#334155;">Valid for <strong>1 year</strong> from purchase</div>
              <div style="width:10%; text-align:right;">
                <a href="#" style="display:inline-block; background:#ef4444; color:#fff; text-decoration:none; padding:10px 14px; border-radius:10px; font-weight:700; font-size:13px; box-shadow:0 6px 14px rgba(239,68,68,.25); transition:transform .15s ease, box-shadow .15s ease;"
                   onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 18px rgba(239,68,68,.32)';"
                   onmouseout="this.style.transform=''; this.style.boxShadow='0 6px 14px rgba(239,68,68,.25)';">BUY</a>
              </div>
            </div>
          </div>

          <div style="margin-top:12px; font-size:12px; color:#64748b;">
            Prices in USD. â€œPremium charactersâ€ apply to neural/high-quality voices. Taxes may apply in some regions.
          </div>
        </div>
      </div>
  </div>
  </div>

  <div class="Modal" id="upgradeModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;width: 600px;max-width: 90%;margin: auto;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div data-ws-show-if-state="isPremium=true"  style="text-align: center;overflow: auto;padding:10px;">
        <p style="font-size: 1.5em; padding: 20px;margin-block: 0.3em;">ğŸ† í”„ë¦¬ë¯¸ì—„ ìƒíƒœ ë° ê´€ë¦¬<!--Premium Status & Management--></p>
        <p data-ws-show-if-state="subscriptionId=true">
          êµ¬ë…ì„ í†µí•´<!-- Via --> <a style="cursor: pointer;text-decoration: underline" data-ws-toggle="#subscriptionModal">êµ¬ë…<!-- Subscription --> - ë³´ê¸° ë° ê´€ë¦¬í•˜ë ¤ë©´ ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”<!-- click here to view & manage --></a>
        </p>
        <p data-ws-show-if-state="isPremiumPlan=true" style="">
          ì›”ë³„ ì‚¬ìš©ëœ í”„ë¦¬ë¯¸ì—„ ë¬¸ì <!--Monthly Premium-Chars used --><span style="font-weight: bold;" data-ws-label-state="usedMonthly"></span> / <span style="font-weight: bold;" data-ws-label-state="monthlyQuotaHuman"></span>
        </p>
        <p data-ws-show-if-state="isPayAsYouGo=true" style="">
          + ì¶”ê°€ í¬ë ˆë”§ ì‚¬ìš© ê°€ëŠ¥<!--Additional Credits available-->: <span style="font-weight: bold;" data-ws-label-state="remainingCreditsChars"></span>
        </p>
        <p data-ws-show-if-state="isPremiumPlan=true">
          <span data-ws-show-if-state="subscriptionId=false">
              êµ¬ë…ì´ ìë™ ê°±ì‹ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤, ë§Œë£Œ:<!--Your subscription will NOT auto renew, expires on-->&nbsp;<span data-ws-label-state="premiumPlanExpirationDateReadable"></span>.
          </span>
        </p>
        <br/>
        <div>
          <button class="full-width-button" onclick="openNewUpgradeModal()">ì¶”ê°€ í¬ë ˆë”§/í”Œëœ êµ¬ë§¤<!--Purchase Additional Credits / Plan--></button>
        </div>
        <br/>
      </div>
      <div data-ws-show-if-state="isPremium=false" style="overflow: auto;padding:10px;">
        <h4>ë” ë§ì´ ë°›ê³  íŒ€ì„ ì§€ì›í•˜ì„¸ìš” ğŸ”¥ğŸ”¥ğŸ”¥<!-- Get More & Support the Team ğŸ”¥ğŸ”¥ğŸ”¥ --><br/>í”„ë¦¬ë¯¸ì—„ AI ìŒì„±, ë‚´ë³´ë‚´ê¸°, ìƒì—…ì  ë° ì¶œíŒ <!-- Premium AI Voices, Export, Commercial & Publishing --></h4>
        <!--<p style="margin-top: 38px;text-transform: uppercase; opacity: 1;font-size: 0.99em;">
          í•©ë¦¬ì ì¸ êµ¬ë… ë° ì¼íšŒì„± ê²°ì œ íŒ¨í‚¤ì§€ &lt;!&ndash; Affordable Subscriptions and One-Time Payment Packages &ndash;&gt;
        </p>-->
        <br/>
        <div data-ws-show-if-state="isSignedIn=false">
          <p style="opacity: 0.8;">ë‹¤ë¥¸ ê³„íšë“¤ì„ íƒìƒ‰í•˜ë ¤ë©´ ë¡œê·¸ì¸ <!-- Login to explore the different plans --></p>
          <sign-in-buttons></sign-in-buttons>
        </div>
        <div data-ws-show-if-state="isSignedIn=true">
          <button class="full-width-button" onclick="openNewUpgradeModal()">í”„ë¦¬ë¯¸ì—„ ê³„íš ë³´ê¸° <!-- View Premium Plans --></button>
        </div>
        <br/><br/>
        <!--<ul style="list-style-type: '\2705   '; list-style-position: outside; margin: 1em 20px; text-align: start">
          <li>í”„ë¦¬ë¯¸ì—„ ìŒì„± &lt;!&ndash; Premium voices &ndash;&gt;</li>
          <li><strong>ì¤‘ë‹¨ ì—†ëŠ” ì—°ì† ì¬ìƒ &lt;!&ndash; Uninterrupted continuous playback &ndash;&gt;</strong></li>
          <li>ë¬´ì œí•œ ì—°ì† ì½ê¸°&lt;!&ndash; Unlimited continuous reading &ndash;&gt;</li>
          <li><strong>MP3 ë° WAVë¡œ ë‚´ë³´ë‚´ê¸° &lt;!&ndash; Export to MP3 & WAV &ndash;&gt;</strong></li>
          <li>ë‚˜ë§Œì˜ íŒŸìºìŠ¤íŠ¸ ì±„ë„ &lt;!&ndash; Your own podcast channel &ndash;&gt;</li>
          <li><strong>ì‚¬ìš© ë° ì¶œíŒì„ ìœ„í•œ ìƒì—…ì  ë¼ì´ì„ ìŠ¤! &lt;!&ndash; Commercial license for Usage & Publishing! &ndash;&gt;</strong></li>
          <li><strong>ì €ì‘ê¶Œ ë¬´ë£Œ</strong> í”„ë¦¬ë¯¸ì—„ AI ìŒì„± ë° ì„ íƒëœ ê¸°ë³¸ ìŒì„±ìš© &lt;!&ndash; <strong>Copyrights free</strong> for Premium AI voices and select basic voices &ndash;&gt;</li>
          <li>ê´‘ê³  ì—†ìŒ&lt;!&ndash; No Ads &ndash;&gt;</li>
          <li>ë” ë¹ ë¥¸ ë¡œë”©&lt;!&ndash; Faster loading &ndash;&gt;</li>
          <li>í”„ë¦¬ë¯¸ì—„ ì§€ì›, ê¸°ëŠ¥ ìš”ì²­ &lt;!&ndash; Premium support, features requests &ndash;&gt;</li>
          <li>ëª¨ë“  ê¸°ëŠ¥ ì ê¸ˆ í•´ì œ&lt;!&ndash; Unlock all features &ndash;&gt;</li>
        </ul>-->
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="interfaceLangModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: 1.2em;">
        ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´ ì„ íƒ<!-- Interface Language -->
      </h4>
      <div class="language-selector">
        <!-- Latin Alphabet -->
        <a href="/player/" target="_parent"><img src="https://flagcdn.com/us.svg" alt="English">English</a>
        <a href="/es/" target="_parent"><img src="https://flagcdn.com/es.svg" alt="EspaÃ±ol">EspaÃ±ol</a>
        <a href="/fr/" target="_parent"><img src="https://flagcdn.com/fr.svg" alt="FranÃ§ais">FranÃ§ais</a>
        <a href="/de/" target="_parent"><img src="https://flagcdn.com/de.svg" alt="Deutsch">Deutsch</a>
        <a href="/it/" target="_parent"><img src="https://flagcdn.com/it.svg" alt="Italiano">Italiano</a>
        <a href="/pt/" target="_parent"><img src="https://flagcdn.com/br.svg" alt="PortuguÃªs">PortuguÃªs</a>
        <a href="/ro/" target="_parent"><img src="https://flagcdn.com/ro.svg" alt="RomÃ¢nÄƒ">RomÃ¢nÄƒ</a>
        <a href="/nl/" target="_parent"><img src="https://flagcdn.com/nl.svg" alt="Nederlands">Nederlands</a>

        <!-- Cyrillic Alphabet -->
        <a href="/ru" target="_parent"><img src="https://flagcdn.com/ru.svg" alt="Ğ ÑƒÑÑĞºĞ¸Ğ¹">Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>

        <!-- Indic Alphabet -->
        <a href="/hi/" target="_parent"><img src="https://flagcdn.com/in.svg" alt="à¤¹à¤¿à¤¨à¥à¤¦à¥€">à¤¹à¤¿à¤¨à¥à¤¦à¥€</a>

        <!-- East Asian Scripts -->
        <a href="/zh/" target="_parent"><img src="https://flagcdn.com/cn.svg" alt="ä¸­æ–‡">ä¸­æ–‡</a>
        <a href="/ja/" target="_parent"><img src="https://flagcdn.com/jp.svg" alt="æ—¥æœ¬èª">æ—¥æœ¬èª</a>
        <a href="/ko/" target="_parent"><img src="https://flagcdn.com/kr.svg" alt="í•œêµ­ì–´">í•œêµ­ì–´</a>

        <!-- Semic Alphabet -->
        <a href="/ar/" target="_parent"><img src="https://flagcdn.com/sa.svg" alt="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
        <a href="/he/" target="_parent"><img src="https://flagcdn.com/il.svg" alt="×¢×‘×¨×™×ª">×¢×‘×¨×™×ª</a>

      </div>
    </div>
  </div>

  <div class="Modal" id="openUrlModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <br/>
      <p style="text-align: justify"><b>ë“£ê³  ì‹¶ì€ ì›¹ í˜ì´ì§€ì˜ URLì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.<!-- Paste the URL of the webpage you would like to listen to. --></b>
        &nbsp;URLì„ ì–´ë–»ê²Œ ì–»ë‚˜ìš”? ë‹¤ë¥¸ íƒ­ì—ì„œ ì›í•˜ëŠ” í˜ì´ì§€ë¥¼ ì—´ê³  ì£¼ì†Œ í‘œì‹œì¤„ì—ì„œ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ì„¸ìš”.<!-- How to get the URL? Open the desired page in a different tab - then copy its address from the address bar --></p>
      <br/>
      <div class="input-container">
        <input type="text" id="urlInput" class="styled-input" placeholder="https://en.wikipedia.org/wiki/The_Beatles">
        <button class="styled-button" id="urlSubmitButton" data-ws-onClick="onUrlSubmitClick">ì‹œì‘</button>
      </div>

      <br/>
      <p style="text-space: 1.2">URL ì˜ˆì‹œ<!-- Examples of valid URLs: --></p>
      <div style="text-align: left; color: orangered; line-height: 1.3em; font-style: italic">
        <p>https://en.wikipedia.org/wiki/The_Beatles</i></p>
        <p>https://www.bbc.com/sport/football/articles/c97dllq4gg1o</p>
      </div>
    </div>
  </div>

  <div class="Modal" id="uploadModal" style="z-index: 9999; display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4>ìŒì„± ìƒì„±ì„ ìœ„í•œ í…ìŠ¤íŠ¸ ì—…ë¡œë“œ ì¤‘</h4>
      <p><strong>ì´ íƒ­ì„ ì—´ì–´ ë‘ì„¸ìš”</strong></p>
    </div>
  </div>


  <div class="Modal" id="postOnboardingModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4 style="font-size: larger">ì¤€ë¹„ ì™„ë£Œ! ì‹œì‘ íŒ:</h4>
      <p><strong>ìƒë‹¨ ë²„íŠ¼ ë°”ì—ì„œ ì–¸ì–´, ìŒì„± ë° ì†ë„ ì„¤ì •&nbsp;<img style="display: inline-block; max-height: 45px;margin: 3px; border-radius: 5px; border: 2px solid yellow; vertical-align: middle;max-width: 90%;" src="images/voice_guide.jpg"/></strong></p>
      <p><strong>í…ìŠ¤íŠ¸ ë°•ìŠ¤ì— ì§ì ‘ ë¶™ì—¬ë„£ê¸°, ì…ë ¥ ë° í¸ì§‘</strong></p>
      <p><strong>ë¬¸ì„œ ë° ì›¹í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°ëŠ” ìƒë‹¨ ë©”ë‰´ ë°”ì˜ ì—´ê¸° ë° ì›¹í˜ì´ì§€ ë²„íŠ¼ ì‚¬ìš©&nbsp;<img style="display: inline-block; max-height: 45px;margin: 3px; border-radius: 5px; border: 2px solid yellow; vertical-align: middle;max-width: 90%;" src="images/open_guide2.jpg"/></strong></p>
      <p><strong>MP3 ë‚´ë³´ë‚´ê¸°ëŠ” ìš°ì¸¡ í•˜ë‹¨ì˜ ë‚´ë³´ë‚´ê¸° ë²„íŠ¼ í´ë¦­</strong></p>
      <img style="max-width: 80%; margin: auto; width: 382px;display: block;" src="images/export_btn_guide.png"/>
      <br/>
      <button data-ws-toggle="#postOnboardingModal" class="full-width-button">ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>

  <div class="Modal" id="uploadSuccessModal" style="z-index: 9999; display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4> âœ… ì—…ë¡œë“œ ì„±ê³µ</h4>
      <p style="font-size: larger">ì˜¤ë””ì˜¤ íŒŒì¼ì´ ì„œë²„ì—ì„œ ë°±ê·¸ë¼ìš´ë“œë¡œ ë Œë”ë§ ì¤‘ì…ë‹ˆë‹¤.<br/><br/>ì‘ì—…ì„ ê³„ì†í•˜ê±°ë‚˜ íƒ­ì„ ë‹«ì•„ë„ ì•ˆì „í•©ë‹ˆë‹¤.<br/><br/>ì‘ì—…ì€ ë‚´ë³´ë‚´ê¸° ëª©ë¡ì— í‘œì‹œë˜ë©°, ì¤€ë¹„ë˜ë©´ ëª©ë¡ì—ì„œ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="Modal" id="statsModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4>í˜„ì¬ í…ìŠ¤íŠ¸ë¥¼ ìˆ«ìë¡œ <!-- Your Current Text in Numbers --></h4>
      <p style="font-weight: bold">
        ë‹¨ì–´ ìˆ˜: <span data-ws-label-state="wordsCount">...</span>
      </p>
      <p style="font-weight: bold">
        ë¬¸ì ìˆ˜: <span data-ws-label-state="charsCount">...</span>
      </p>
      <p style="font-weight: bold">
        ë‹¨ë½ ìˆ˜: <span data-ws-label-state="paragraphsCount">...</span>
      </p>
      <p style="font-weight: bold">
        ì¬ìƒ ì‹œê°„:&nbsp;~<span data-ws-label-state="expectedDuration"></span>&nbsp;<span style="font-weight:normal">(at speed X1)</span>.
      </p>

      <br/>
      <button class="full-width-button" data-ws-onClick="calculateStats">ìƒˆë¡œê³ ì¹¨</button>
    </div>
  </div>

  <div class="Modal" id="recordModalNonPremium" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px;">
        <h4>ì˜¤ë””ì˜¤ ë‚´ë³´ë‚´ê¸°ëŠ” í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ì…ë‹ˆë‹¤<!-- Recording the Synthesized Speech --></h4>
        <div data-ws-show-if-state="isPremium=false">
          <p style="text-align: justify">
            í”„ë¦¬ë¯¸ì—„ì—ëŠ” ì¸ìŠ¤í„´íŠ¸ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ MP3 ë° WAV ë Œë”ë§, ë‚˜ì¤‘ì— ë“£ê¸°, ìƒì—… ë° ì¶œíŒ ë¼ì´ì„ ìŠ¤(í”„ë¦¬ë¯¸ì—„ ëª©ì†Œë¦¬ì˜ ê²½ìš°), ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ìš”ê¸ˆì œëŠ” ë§¤ìš° ì €ë ´í•˜ë©° êµ¬ë… ìœ í˜•ê³¼ ì¼íšŒì„± êµ¬ë§¤ ëª¨ë‘ë¥¼ í¬í•¨í•˜ì—¬ ê·€í•˜ì˜ ìš”êµ¬ì— ê°€ì¥ ì˜ ë§ìŠµë‹ˆë‹¤. ë§Œì¡± ë³´ì¥.<!-- Recording requires premium and includes licensing for commercial use & publishing (see publishing terms -->
          </p>
          <div data-ws-show-if-state="isSignedIn=false">
            <button onclick="openNewUpgradeModal();" class="Full-width-btn" style="background-color: darkgreen;color: white">ê³„íšì„ ë³´ë ¤ë©´ ë¡œê·¸ì¸<!-- Upgrade to Premium --></button>
            <p style="text-align: center">ì´ë¯¸ í”„ë¦¬ë¯¸ì—„ì…ë‹ˆê¹Œ? ë¡œê·¸ì¸<!-- Already premium? Sign in --></p>
            <sign-in-buttons></sign-in-buttons>
          </div>
          <div data-ws-show-if-state="isSignedIn=true">
            <button onclick="openNewUpgradeModal();" class="Full-width-btn" style="background-color: darkgreen;color: white">í”„ë¦¬ë¯¸ì—„ ìš”ê¸ˆì œ ë³´ê¸°<!-- Upgrade to Premium --></button>
          </div>
        </div>
        <div data-ws-show-if-state="isPremium=true">
          <p style="text-align: center;font-size: larger;">ğŸ† ğŸ¾ğŸ¥‚ ì—…ê·¸ë ˆì´ë“œí•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!!!<!-- Thank you for upgrading!!! --> ğŸ‰ğŸš€ ğŸ† </p>
          <button data-ws-toggle="#recordOrExportModal" class="Full-width-btn" style="background-color: transparent;color: cornflowerblue;border-color: cornflowerblue">ë…¹ìŒ ê³„ì†í•˜ê¸°<!-- Continue with recording --></button>
        </div>
        <br/><br/>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="notificationModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px;">
        <h4 class="Modal-title" style="text-transform: capitalize">Some Placeholder</h4>
          <p class="Modal-p" style="text-align: justify">
            Some Placeholder 2
          </p>
          <button class="styled-btn Modal-OK-button" data-ws-toggle="#notificationModal" onclick="console.log('clicked')" style="background-color: darkgreen;color: white">í™•ì¸<!-- Upgrade to Premium --></button>
        <br/><br/>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="recordOrExportModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px 30px;">
        <h3 style="text-align: center">ì¸ìŠ¤í„´íŠ¸ ë‚´ë³´ë‚´ê¸° ë˜ëŠ” ë¼ì´ë¸Œ ë…¹ìŒ ì„ íƒ</h3>
        <button data-ws-toggle="#exportModal" onClick='window.appMethods.closeModal("recordOrExportModal");' class="Full-width-btn" style="background-color: darkgreen;color: white">ì¸ìŠ¤í„´íŠ¸ ë‚´ë³´ë‚´ê¸° (ëŒ€ë¶€ë¶„ì—ê²Œ ê¶Œì¥)</button>
        <br/>
        <button data-ws-toggle="#recordStartModal" class="Full-width-btn" style="">ìŠ¤íŠ¸ë¦¼ ë…¹ìŒ (ë‚´ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ëª©ì†Œë¦¬ì— ì¢‹ìŒ)</button>
        <br/>
        <h3>Did you know? Learn more on:</h3>
        <ul style="text-align: start; line-height: 1.7em;">
          <li><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds">Create Dialogs with multiple voices</a></li>
          <li><a target="_blank" href="https://ttsreader.com/blog/new-single-click-export-text-to-audio-feature/">Export, download & share your MP3 & text</a></li>
          <li><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/">Recording on-the-fly</a></li>
        </ul>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="recordStartModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px 30px;">
        <p style="text-align: justify">ë‹¤ìŒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ íŒì—…ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ê±°ê¸°ì„œ 'ì „ì²´ í™”ë©´' ë° 'ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤ë„ ê³µìœ ' ì˜µì…˜ì„ ì„ íƒí•˜ì„¸ìš”. ë§ˆì§€ë§‰ìœ¼ë¡œ 'ê³µìœ 'ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>
        <button data-ws-onClick="startRecording" class="Full-width-btn" style="background-color: darkgreen;color: white">ë…¹ìŒ ì‹œì‘<!-- Start Recording --></button>
        <br/>
        <div>
          <img src="images/share_audio.png" style="max-width: 90%; margin: auto;"/>
        </div>
        <p><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/">Learn on generating mp3 files and the different options here.</a></p>
        <!--<p style="text-align: justify">ë‹¨ê³„ë¥¼ ì´í•´í•˜ë ¤ë©´ ì´ ì§§ì€ ë¹„ë””ì˜¤ë¥¼ ì‹œì²­í•˜ì„¸ìš”. ì¤€ë¹„ê°€ ë˜ë©´ 'ë…¹ìŒ ì‹œì‘' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.&lt;!&ndash; Watch this short video for understanding the steps. When ready - click the 'Start Recording' button. &ndash;&gt;</p>
        <div class="videowrapper">
          <iframe style="display:block" src="https://www.youtube.com/embed/Xq09r01GetQ" title="YouTube video player - Generate audio mp3 files from synthesized speech with TTSReader" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
        <br/>-->
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="exportModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: auto;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h4>í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ëŒ€ìƒ ì¦‰ì‹œ MP3 / WAV ìƒì„±. ì €ì‘ê¶Œì€ ì‚¬ìš©ì ì†Œìœ ! ìƒì„±ëœ ì˜¤ë””ì˜¤ë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì„¸ìš”.</h4>
      <div>
        <div data-ws-show-if-state="isPremium=true">
          í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìë¡œì„œ - ë‚´ë³´ë‚¸ ì˜¤ë””ì˜¤ íŒŒì¼ì˜ ì €ì‘ê¶Œì„ ì†Œìœ í•˜ë©° ìƒì—…ì  ëª©ì  ë° ì¶œíŒì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ <!-- As a Premium user - you own the copyrights to the exported audio files and can use them for commercial purposes and publishing -->&nbsp;ğŸš€
        </div>
        <div data-ws-show-if-state="isSignedIn=true">
          <div data-ws-show-if-state="isPremium=false">
            <span style="font-size: 1.3em;color: red;">ìƒì—…ì  ì‚¬ìš© ë° ì¶œíŒì—ëŠ” í”„ë¦¬ë¯¸ì—„ì´ í•„ìš”í•©ë‹ˆë‹¤.<!-- Commercial use and publishing requires Premium.--></span>
            <button onclick="window.AppAnalytics.sendEvent('premiumVoiceSignInModal_sign_in');openNewUpgradeModal();" class="Full-width-btn" style="background-color: transparent;color: red;border-color: red">í”„ë¦¬ë¯¸ì—„ ìš”ê¸ˆì œ ë³´ê¸°</button>
          </div>
        </div>
      </div>
      <div style="text-align: justify; font-size: smaller;">
        <p style="text-align: center">ì•Œë ¤ë“œë¦½ë‹ˆë‹¤:</p>
        <ul style="text-align: justify">
          <!--<li><span data-ws-show-if-state="isPremium=true">âœ… Premium Account</span><span data-ws-show-if-state="isPremium=false" style="color: red;">âœ˜ Premium.&nbsp;<a href="#" onclick="openNewUpgradeModal()" style="font-weight: bold">ê³„íšì„ ë³´ë ¤ë©´ ë¡œê·¸ì¸</a></span></li>-->
          <li><strong>ë‚´ë³´ë‚´ê¸° ì „ ë°˜ë“œì‹œ ì¬ìƒí•˜ì—¬ ì›í•˜ëŠ” ëŒ€ë¡œ ë“¤ë¦¬ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì™„ë²½í•˜ê²Œ í¸ì§‘ í›„ ë‚´ë³´ë‚´ê¸°.</strong></li>
          <li>í”„ë¦¬ë¯¸ì—„ ë¬¸ì í• ë‹¹ëŸ‰ ë˜ëŠ” í¬ë ˆë”§ì—ì„œ ë¬¸ìë¥¼ ì†Œë¹„í•©ë‹ˆë‹¤.</li>
          <li data-ws-show-if-state="isLongerThan200000Chars=true"><span style="color: red;">âœ˜</span> Limited to 200k chars per file. Your current text is too long with <span data-ws-label-state="charsCount"></span> chars.&nbsp;<span style="color:red;">Please split it to smaller chunks, or talk to us at contact@ttsreader.com</span></li>
          <li>í”„ë¦¬ë¯¸ì—„ ìŒì„±(ëª©ì†Œë¦¬ ê°¤ëŸ¬ë¦¬ì—ì„œ ë³„ í‘œì‹œëœ ê²ƒ)ë§Œ ì§€ì›í•©ë‹ˆë‹¤.</li>
          <li>ì‹ ê·œ ì§€ì›: {{pause}} ë° {{pause:DURATION_IN_MS}}. ì¤‘ê´„í˜¸ {{...}} ë‚´ë¶€ì— ê³µë°± ì—†ì´ ì‘ì„±í•˜ì„¸ìš”.</li>
          <li>ì¢‹ì•„í•˜ëŠ” íŒŸìºìŠ¤íŠ¸ ì•±ìœ¼ë¡œ ì´ë™ ì¤‘ ë‚´ë³´ë‚´ê¸°ë¥¼ ë“£ê¸° ìœ„í•´ ê°œì¸ íŒŸìºìŠ¤íŠ¸ ì±„ë„ì„ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. <!-- You can also create your personal podcast channel to listen to your exports on the go with your favorite podcast app. --></li>
        </ul>
      </div>
      <br/>
      <div style="margin: 10px auto; text-align: center;" data-ws-show-if-state="isLongerThan2000Chars=true">
        <label style="align-items: center; gap: 8px; cursor: pointer;">
          <input type="checkbox" id="sendToPodcastCheckbox" />
          <span>ë‚´ ê°œì¸ íŒŸìºìŠ¤íŠ¸ ì±„ë„ì— ì¶”ê°€</span>&nbsp;<span><a href="https://ttsreader.com/docs/guides/create-podcasts/" target="_blank">Learn more</a></span>
        </label>
      </div>
      <div data-ws-show-if-state="isSignedIn=false">
        <sign-in-buttons></sign-in-buttons>
      </div>
      <div data-ws-show-if-state="isSignedIn=true">
      <div>
        <button onclick="sendAnalyticsEvent('exportMP3');" class="full-width-button" data-ws-params="mp3" data-ws-onClick="exportToMp3">MP3 ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</button>
        <p style="text-align: center; font-size: smaller;">Need a specific audio format? Use our simple <a href="https://ttsreader.com/convert2wav/" target="_blank" rel="nofollow" style="color: dodgerblue">MP3 to WAV converter</a>.</p>
      </div>
      </div>
      <p style="margin: 30px auto">ì´ì „ ë‚´ë³´ë‚´ê¸°ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆê¹Œ?&nbsp;<a style="cursor: pointer; color: orangered;" onclick="openOrCloseExportsListModal();"><svg style="vertical-align: middle; margin-bottom: 4px;" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-music"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /><path d="M9 17v-13h10v13" /><path d="M9 8h10" /></svg>&nbsp; ì˜¤ë””ì˜¤ í´ë” ì—´ê¸°</a></p>
      <h3>Did you know? Learn more on:</h3>
      <ul style="text-align: start; line-height: 1.7em;">
        <li><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/#new-mix-languages-voices--speeds">- Create Dialogs with multiple voices</a></li>
        <li><a target="_blank" href="https://ttsreader.com/blog/new-single-click-export-text-to-audio-feature/">- Export, download & share your MP3 & text</a></li>
        <li><a target="_blank" href="https://ttsreader.com/docs/guides/voiceover/">- Recording on-the-fly</a></li>
        <li><a href="https://ttsreader.com/docs/guides/create-podcasts/" target="_blank">- Create your personal podcast channel</a></li>
      </ul>
    </div>
  </div>




  <div data-ws-show-if-state="subscriptionId=true" style="position: relative">
    <div class="Modal" id="subscriptionModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;">
      <button data-ws-hide-all=".Modal" class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow: auto;padding:10px 30px;text-align: center">
        <h4 style="text-align: center">êµ¬ë… ê´€ë¦¬<!-- Manage Subscription --></h4>
        <div data-ws-show-if-state="isPremium=true">
          <p style="font-size: 1em;text-align: center">â„¹ï¸ êµ¬ë… ID<!-- Subscription id -->: <b><span data-ws-label-state="subscriptionId"></span></b></p>
          <p style="line-height: 1.8em;margin: 10px;"><a href="https://docs.google.com/forms/d/e/1FAIpQLSc-gAEGNiCixhSjTjkJXu3cYSqDJYEMa9vPzRPKnY6Pei_yrQ/viewform?usp=sf_link" target="_blank" style="text-decoration: none;">ë¬¸ì œ? ì§ˆë¬¸? ë¬¸ì˜í•˜ì„¸ìš” (ìƒˆ ì°½ì—ì„œ í”„ë¦¬ë¯¸ì—„ ë¬¸ì˜ ì–‘ì‹ ì—´ê¸°)<!-- Issues? Questions? Contact us (opens a premium contact form in new window) --></a></p>
          <br/>
          <p style="color: red;line-height: 1.8em;margin: 10px;">ìœ„í—˜ êµ¬ì—­<!-- DANGER ZONE --></p>
          <p style="color: red; cursor: pointer; padding: 5px 10px; border: red 1px solid; border-radius: 20px; line-height: 1.8em;margin: 10px;" onclick="cancelSubscription();">êµ¬ë… ì·¨ì†Œ<!-- Cancel subscription. Clicking this will result in losing your premium status - taking effect immediately. --></p>
        </div>
        <div data-ws-show-if-state="isPremium=false">
          <br/>
          <p style="font-size: 1em;text-align: center">í˜„ì¬ í”„ë¦¬ë¯¸ì—„ì— ê°€ì…ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤<!-- You are now not subscribed to Premium --></p>
        </div>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>
  </div>

  <!--<div class="Modal" id="mp3GuideModal" style="display: none">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="display: flex; line-height: 1.5em; flex-direction: column;border: orangered 1px solid;">
      <button class="Close-modal">
        <svg style="width: 26px;height: 26px;position: relative;top: 2px;" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <h3>TTSReaderë¡œ í…ìŠ¤íŠ¸ì—ì„œ mp3 íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë°©ë²•?&lt;!&ndash; How to generate mp3 files from text with TTSReader? &ndash;&gt;</h3>
      <div class="videowrapper">
        <iframe style="display:block" src="https://www.youtube.com/embed/Xq09r01GetQ" title="YouTube video player - Generate audio mp3 files from synthesized speech with TTSReader" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      </div>
      <br/>
    </div>
    <div style="height:20px;"></div>
  </div>-->

  <!-- API Modal -->
  <div class="Modal" id="apiModal" style="display: none;">
    <div style="height:20px;"></div>
    <div class="Modal-content" style="padding: 20px; overflow: hidden; max-height: 80vh; max-width: 1000px; width: 90%;">
      <button class="Close-modal" style="z-index: 999">
        <svg focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>

      <div style="overflow: auto; margin: 30px 0;max-height: 75vh;">
        <!-- API Key Section -->
        <div style="background: var(--card-background); padding: 20px; border-radius: 8px; margin-bottom: 30px; border: 1px solid var(--border-color);">
          <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
            ê·€í•˜ì˜ API í‚¤
          </h3>

          <div data-ws-show-if-state="isSignedIn=false" style="text-align: center; padding: 20px; color: var(--text-color-secondary);">
            <sign-in-buttons></sign-in-buttons>
          </div>

          <div data-ws-show-if-state="isSignedIn=true">
            <!-- Premium required message -->
            <div data-ws-show-if-state="isPremium=false" style="background: #fff3cd; border: 1px solid #ffecb5; padding: 15px; border-radius: 6px; margin-bottom: 15px;">
              <p style="color: #856404; margin-bottom: 10px;">API ì•¡ì„¸ìŠ¤ì—ëŠ” Premium êµ¬ë…ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
              <p style="color: #856404; margin-bottom: 15px;">API í‚¤ë¥¼ ìƒì„±í•˜ê³  ê°•ë ¥í•œ TTS API ì‚¬ìš©ì„ ì‹œì‘í•˜ë ¤ë©´ Premiumìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì„¸ìš”.</p>
              <button onclick="openNewUpgradeModal()" class="Full-width-btn" style="background-color: #007bff; color: white; border: none;">
                Premiumìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
              </button>
            </div>

            <!-- API Key Display for Premium Users -->
            <div data-ws-show-if-state="isPremium=true">
              <div data-ws-show-if-state="uapi=true" style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                <p type="password" id="apiSecretDisplay" data-ws-label-state="uapi" readonly style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--input-background);"></p>
              </div>

              <div style="display: flex; gap: 10px;">
                <button onclick="generateApiSecret()" id="generateSecretBtn" class="Full-width-btn" style="background-color: #28a745; color: white; border: none;">
                  <span data-ws-show-if-state="uapi=false" style="display: inline;">ìƒˆ API í‚¤ ìƒì„±</span>
                  <span data-ws-show-if-state="uapi=true" style="display: none;">API í‚¤ ì¬ìƒì„±</span>
                </button>
                <button onclick="testApiEndpoint()" data-ws-show-if-state="uapi=true" class="Full-width-btn" style="background-color: #007bff; color: white; border: none;">
                  API í…ŒìŠ¤íŠ¸ ë° MP3 ë‹¤ìš´ë¡œë“œ
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- End of API Key Section -->

        <!-- Code Examples with secret -->
        <div style="background: var(--card-background); padding: 20px; border-radius: 8px; border: 1px solid var(--border-color);">
          <h3 style="margin-bottom: 20px;">ì½”ë“œ ì˜ˆì œ</h3>

          <!-- CURL Example -->
          <div style="margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
              <h4 style="margin: 0;">CURL ì˜ˆì œ</h4>
              <button onclick="copyToClipboard('curlExample')" style="padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                ë³µì‚¬
              </button>
            </div>
            <pre id="curlExample" style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 13px; line-height: 1.4;">curl -X POST "https://ttsreader.com/api/ttsSync" \
-H "Authorization: Bearer UAPI-<span data-ws-label-state="uapi" style="color: #4fc3f7;">YOUR_SECRET_KEY</span>" \
-H "Content-Type: application/json" \
--data '{"text": "Hello world, this is a test from TTSReader API.","lang": "en-US", "voice": "Nova Premium", "rate":1, "quality": "48khz_192kbps" }' \
--output "hello.mp3"</pre>
          </div>

          <!-- JavaScript Example -->
          <div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
              <h4 style="margin: 0;">JavaScript ì˜ˆì œ</h4>
              <button onclick="copyToClipboard('jsExample')" style="padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                ë³µì‚¬
              </button>
            </div>
            <pre id="jsExample" style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 13px; line-height: 1.4;"><span style="color: #569cd6;">async function</span> <span style="color: #dcdcaa;">generateTTS</span>() {
    <span style="color: #569cd6;">const</span> <span style="color: #9cdcfe;">response</span> = <span style="color: #569cd6;">await</span> <span style="color: #dcdcaa;">fetch</span>(<span style="color: #ce9178;">'https://ttsreader.com/api/ttsSync'</span>, {
        <span style="color: #9cdcfe;">method:</span> <span style="color: #ce9178;">'POST'</span>,
        <span style="color: #9cdcfe;">headers:</span> {
            <span style="color: #ce9178;">'Authorization'</span>: <span style="color: #ce9178;">'Bearer UAPI-<span data-ws-label-state="uapi" style="color: #4fc3f7;">YOUR_SECRET_KEY</span>'</span>,
            <span style="color: #ce9178;">'Content-Type'</span>: <span style="color: #ce9178;">'application/json'</span>
        },
        <span style="color: #9cdcfe;">body:</span> <span style="color: #dcdcaa;">JSON.stringify</span>({
            <span style="color: #9cdcfe;">text:</span> <span style="color: #ce9178;">"Hello world, this is a test from TTSReader API."</span>,
            <span style="color: #9cdcfe;">lang:</span> <span style="color: #ce9178;">"en-US"</span>,
            <span style="color: #9cdcfe;">voice:</span> <span style="color: #ce9178;">"Nova Premium"</span>,
            <span style="color: #9cdcfe;">quality:</span> <span style="color: #ce9178;">"48khz_192kbps"</span>,
            <span style="color: #9cdcfe;">rate:</span> <span style="color: #b5cea8;">1</span>
        })
    });

    <span style="color: #c586c0;">if</span> (<span style="color: #9cdcfe;">response</span>.<span style="color: #9cdcfe;">ok</span>) {
        <span style="color: #569cd6;">const</span> <span style="color: #9cdcfe;">audioBlob</span> = <span style="color: #569cd6;">await</span> <span style="color: #9cdcfe;">response</span>.<span style="color: #dcdcaa;">blob</span>();
        <span style="color: #569cd6;">const</span> <span style="color: #9cdcfe;">url</span> = <span style="color: #4ec9b0;">URL</span>.<span style="color: #dcdcaa;">createObjectURL</span>(<span style="color: #9cdcfe;">audioBlob</span>);
        <span style="color: #569cd6;">const</span> <span style="color: #9cdcfe;">a</span> = <span style="color: #4ec9b0;">document</span>.<span style="color: #dcdcaa;">createElement</span>(<span style="color: #ce9178;">'a'</span>);
        <span style="color: #9cdcfe;">a</span>.<span style="color: #9cdcfe;">href</span> = <span style="color: #9cdcfe;">url</span>;
        <span style="color: #9cdcfe;">a</span>.<span style="color: #9cdcfe;">download</span> = <span style="color: #ce9178;">'hello.mp3'</span>;
        <span style="color: #9cdcfe;">a</span>.<span style="color: #dcdcaa;">click</span>();
    }
}</pre>
          </div>

          <br/>
          <h3 style="margin-bottom: 15px;">ìš”ì²­ ë§¤ê°œë³€ìˆ˜</h3>
          <ul style="line-height: 1.8; margin-left: 20px;">
            <li><strong>text</strong> (í•„ìˆ˜): ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸</li>
            <li><strong>lang</strong> (í•„ìˆ˜): ì–¸ì–´ ì½”ë“œ (ì˜ˆ: 'ko-KR', 'en-US')</li>
            <li><strong>voice</strong> (í•„ìˆ˜): ìŒì„± ì´ë¦„ - TTSReader í”Œë ˆì´ì–´ì˜ ìŒì„± ë˜ëŠ” Azure ìŒì„± ì‚¬ìš© <a href="https://speech.azure.cn/portal/voicegallery" target="_blank" style="color: #007bff;">Azure ìŒì„± ê°¤ëŸ¬ë¦¬</a></li>
            <li><strong>rate</strong> (ì„ íƒì‚¬í•­): ìŒì„± ì†ë„ (0.5~2.0, ê¸°ë³¸ê°’: 1.0)</li>
            <li><b>quality</b> (optional): "48khz_192kbps" or empty (which defaults to 24kHz)</li>
          </ul>
          <br/>

        </div>

        <br/>

        <!-- API Documentation -->
        <div style="background: var(--card-background); padding: 20px; border-radius: 8px; margin-bottom: 30px; border: 1px solid var(--border-color);">
          <h3 style="margin-bottom: 15px;">Important Notes</h3>
          <ul style="line-height: 1.8; margin-left: 20px;list-style: disc;">
            <li>Limit charcters to a few thousands (exact limit is unknown, but 5k characters is safe), as this is synchronous API, tjat times out after 5 minutes. So, if it can generate the MP3 within 5 minutes it will - otherwise it will time out before MP3 is ready - but since the AI is started - it will consume credits.</li>
            <li>Async API is coming soon for long-texts, and for supporting multiple voices in a single file.</li>
            <li>The ttsSync endpoint does not support voice-setters (ie: {{set: voice, language, rate}}) within the text. So, a single voice - set in the API request.</li>
            <li>The name of the voice is as shown in the voice-selector UI. In addition ALL Azure's Neural AI voices are supported. So, you're welcome to go to Azure's voice gallery at <a href="https://speech.azure.cn/portal/voicegallery" target="_blank" style="color: #007bff;">https://speech.azure.cn/portal/voicegallery</a> and select a voice from there.</li>
            <li>If you need anything else, or have feedback, suggestions, please let us know at <span style="color: orangered;">contact@ttsreader.com</span></li>
          </ul>
        </div>

        <br/>
      </div>
    </div>
    <div style="height:20px;"></div>
  </div>

  <div class="Modal" id="helpModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 90vh;">
      <button class="Close-modal"><svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>
      <div>
        <img id="helpImgId" data-src="images/help.png" style="max-width: 95%;
    margin: auto;
    max-height: 90vh;
    border: orangered 2px solid;
    border-radius: 10px;">
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="moreVoices" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow-y: auto;max-height: 90%;text-align: justify;">
        <h3 style="text-align: center">ë” ë§ì€ ìŒì„±<!-- More Voices --></h3>

        <p style="text-align: center"><a href="#" onclick="appMethods.handleVoiceLabelClick();">Click here to preview & select a voice available on your browser</a></p>
        <br/>
        <!--<p style="text-align: center"><b>Other voices on other browsers</b></p>
        <div data-ws-show-if-state="os=win">
          <div data-ws-show-if-state="isChrome=true">
            <p>Edge ë¸Œë¼ìš°ì €ì—ì„œ TTSReaderë¥¼ ì‚¬ìš©í•  ë•Œ ë” ë§ì€ ìŒì„±ì´ ì œê³µë©ë‹ˆë‹¤. íŠ¹íˆ Christopherì™€ Michelleì´ ë§¤ìš° ë›°ì–´ë‚©ë‹ˆë‹¤!&lt;!&ndash; More voices are available when using TTSReader on the Edge browser. Specifically - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
          </div>
          <div data-ws-show-if-state="isChrome=false">
            <p>Chrome/Edge ë¸Œë¼ìš°ì €ì—ì„œ TTSReaderë¥¼ ì‚¬ìš©í•  ë•Œ ë” ë§ì€ ìŒì„±ì´ ì œê³µë©ë‹ˆë‹¤. íŠ¹íˆ Chromeì—ì„œëŠ” Noahë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. Edgeì—ì„œëŠ” Christopherì™€ Michelleì´ ëª¨ë‘ ë›°ì–´ë‚©ë‹ˆë‹¤!&lt;!&ndash; More voices are available when using TTSReader on Chrome / Edge browsers. Specifically - on Chrome - Noah is our recommendation. On Edge - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
          </div>
        </div>
        <div data-ws-show-if-state="os=mac">
          <p>Chrome/Edge ë¸Œë¼ìš°ì €ì—ì„œ TTSReaderë¥¼ ì‚¬ìš©í•  ë•Œ ë” ë§ì€ ìŒì„±ì´ ì œê³µë©ë‹ˆë‹¤. íŠ¹íˆ Chromeì—ì„œëŠ” Noahë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. Edgeì—ì„œëŠ” Christopherì™€ Michelleì´ ëª¨ë‘ ë›°ì–´ë‚©ë‹ˆë‹¤!&lt;!&ndash; More voices are available when using TTSReader on Chrome / Edge browsers. Specifically - on Chrome - Noah is our recommendation. On Edge - Christopher & Michelle are both exceptional! &ndash;&gt;</p>
        </div>
        <div>
          <p style="font-weight: bold">ë‹¤ìŒì€ ì‚¬ìš© ê°€ëŠ¥í•œ ìŒì„±ì…ë‹ˆë‹¤:&lt;!&ndash; Here are some of the available voices: &ndash;&gt;</p>
          <p><u>Edgeì—ì„œ:&lt;!&ndash; On Edge: &ndash;&gt;</u></p>
          <div>Christopher: <audio style="vertical-align: middle" controls src="audio/Christopher.mp3" preload="metadata"/></div>
          <br/>
          <div>Michelle: <audio controls src="audio/Michelle.mp3" preload="metadata"/></div>
          <br/>
          <p><u>Chromeì—ì„œ:&lt;!&ndash; On Chrome: &ndash;&gt;</u></p>
          <div>Noah: <audio controls src="audio/Noah.mp3" preload="metadata"></audio></div>
          <br/>
          <div>Lily: <audio controls src="audio/Lily.mp3" preload="metadata"></audio></div>
          <br/>
        </div>-->
        <p><b>SAPI5 (custom / locally installed) Voices Supported</b></p>
        <p>Windowsì—ì„œ Firefox ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì •ì˜ SAPI5 ìŒì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<!-- Using custom SAPI5 voices is possible on Windows using Firefox browser. --></p>
        <p><a target="_blank" href="/blog/exciting-news-use-custom-sapi5-voices-on-ttsreader/">See how to use SAPI5 voices with TTSReader</a></p>
        <p>ëª¨ë°”ì¼ì—ì„œëŠ”<!-- On mobile, you will find more voices using our --> <a href="/mobile/" target="_blank">í…ìŠ¤íŠ¸ ìŒì„± ë³€í™˜ ëª¨ë°”ì¼ ì•±<!-- text-to-speech mobile apps --></a></p>
        <p>í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìì—ê²Œ ë” ë§ì€ ìŒì„±ì„ ì œê³µí•˜ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤<!-- We're working on making even more voices available for Premium users --></p>
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="addPauseModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 100vh;">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow-y: auto;max-height: 90%;text-align: center;">
        <h3>ì½ê¸° ì¼ì‹œ ì •ì§€ íƒ€ì´ë¨¸ ì¶”ê°€<!-- Add Pause Reading Timer --></h3>
        <p>ë‹¤ìŒ ì¤„ì„ ë³µì‚¬í•˜ì—¬ í…ìŠ¤íŠ¸ì— ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤. ì¼ì‹œ ì •ì§€ ì‹œê°„ì„ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.<!-- Copy the following line and paste into the text. Edit the duration of the pause in milliseconds. --></p>
        <br/>
        <code>{{pause:1000}}</code>
        <br/>
        <a style="text-decoration: none;" class="Link-btn" data-ws-toggle="#addPauseModal" onclick="navigator.clipboard.writeText('{{pause:1000}}\n')">
          <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
            <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
          </svg>&nbsp;ë³µì‚¬<!-- Copy -->
        </a>
        <br/><br/><br/>
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="addCommentModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 100vh;">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div style="overflow-y: auto;max-height: 90%;text-align: center;">
        <h3>Add Comments - Text to be Ignored by the Player<!-- Add Pause Reading Timer --></h3>
        <p>Copy the following line and paste into the text. Edit its inner content to add your own comments in the text.</p>
        <br/>
        <code>{{skip: YOUR-COMMENT-HERE}}</code>
        <br/>
        <a style="text-decoration: none;" class="Link-btn" data-ws-toggle="#addCommentModal" onclick="navigator.clipboard.writeText('{{skip:   }}\n')">
          <svg xmlns="http://www.w3.org/2000/svg" class="Middle-vertical-align" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
            <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
          </svg>&nbsp;ë³µì‚¬<!-- Copy -->
        </a>
        <br/><br/><br/>
      </div>
    </div>
    <div style="flex:1"></div>
  </div>

  <div class="Modal" id="shareModal" style="display: none;">
    <div style="flex:1"></div>
    <div class="Modal-content" style="max-width: 100%;max-height: 100vh;">
      <button class="Close-modal">
        <svg style="" focusable="false" aria-hidden="true" viewBox="0 0 24 24">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
        </svg>
      </button>
      <div>
        <p><a href="https://www.facebook.com/sharer.php?u=https://ttsreader.com/player/" target="_blank">Facebookì— ê³µìœ <!-- Share on Facebook --></a></p>
        <p><a href="https://twitter.com/intent/tweet?url=https://ttsreader.com/player/" target="_blank">Twitterì— ê³µìœ <!-- Share on Twitter --></a></p>
        <p><a href="https://api.whatsapp.com/send?text=https://ttsreader.com/player/" target="_blank">WhatsAppì— ê³µìœ <!-- Share on WhatsApp --></a></p>
        <p><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ttsreader.com/player/" target="_blank">LinkedInì— ê³µìœ <!-- Share on LinkedIn --></a></p>
        <p><a href="#" onclick="copy('https://ttsreader.com/player/');">ë§í¬ ë³µì‚¬<!-- Copy link --></a></p>
      </div>
    </div>
  </div>

  <div class="Modal" id="processingModal" style="display: none; flex-direction: column; align-items: center; justify-content: center;">
    <div style="flex: 1"></div>
    <div class="Modal-content" style="max-width: 100%; max-height: 100vh; text-align: center;">
      <p>ì²˜ë¦¬ ì¤‘... ETA:</p>
      <p id="processingTimer" style="font-size: 1.2em;font-weight: bold">01:00</p>
      <p><b>- ì´ íƒ­ì„ ì—´ì–´ ë‘ì„¸ìš” -</b></p>
    </div>
    <div style="flex: 1"></div>
  </div>

  <div class="loading-overlay hidden" data-ws-show-if-state="isLoading=true">
    <div class="spinner"></div>
    <div class="loading-text">Loading...</div>
  </div>
</div>


<script>

  document.querySelectorAll('.TabsContainer .TabTitlesContainer').forEach(titlesContainer => {
    const tabTitles = titlesContainer.children;

    Array.from(tabTitles).forEach((tabTitle, index) => {
      tabTitle.addEventListener('click', () => {
        const tabsContainer = tabTitle.closest('.TabsContainer');
        const contents = tabsContainer.querySelector('.TabContentsContainer').children;

        // Remove active class from all
        Array.from(tabTitles).forEach(el => el.classList.remove('active'));
        Array.from(contents).forEach(el => el.style.display = 'none');

        // Activate selected tab
        tabTitle.classList.add('active');
        contents[index].style.display = 'block';
      });
    });

    // Trigger first tab as active by default
    tabTitles[0].click();
  });

  function copy(text) {
    navigator.clipboard.writeText(text).then(function() {
      console.log('Copied!');
    }, function() {
      console.log('Copy error')
    });
  }

  function copyPodcastUrl(button) {
    const urlElement = button.parentElement.querySelector('[data-ws-label-state="podcast_main_channel_url"]');
    const url = urlElement.textContent.trim();
    
    if (url) {
      navigator.clipboard.writeText(url).then(function() {
        // Show success feedback
        const originalText = button.innerHTML;
        button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg> URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
        button.style.backgroundColor = '#2E7D32';
        
        // Reset after 2 seconds
        setTimeout(function() {
          button.innerHTML = originalText;
          button.style.backgroundColor = '#4CAF50';
        }, 2000);
      }, function() {
        console.log('Copy error');
        alert('Failed to copy URL to clipboard');
      });
    }
  }

  function togglePodcastDescription(button) {
    const container = button.closest('.podcast-description-container');
    const collapsedDiv = container.querySelector('.podcast-description-collapsed');
    const expandedDiv = container.querySelector('.podcast-description-expanded');
    const toggleText = button.querySelector('.toggle-text');

    if (collapsedDiv) {
      collapsedDiv.classList.remove("podcast-description-collapsed");
      collapsedDiv.classList.add("podcast-description-expanded");
      toggleText.textContent = 'ëœ ë³´ê¸°';
    } else {
      expandedDiv.classList.add("podcast-description-collapsed");
      expandedDiv.classList.remove("podcast-description-expanded");
      toggleText.textContent = 'ë” ë³´ê¸°';
    }
  }

  function share() {
    const shareData = {
      title: "TTSReader",
      text: "Listen to any text with TTSReader. AI powered natural sounding voices.",
      url: "https://ttsreader.com/player/",
    };

    navigator.share(shareData)
            .then(() => console.log('Share was successful.'))
            .catch((error) => console.log('Sharing failed', error));
  }

  function loadImages(selector) {
    document.querySelectorAll(selector).forEach((el)=>{
      if (!el.getAttribute('src')) {
        el.setAttribute('src', el.getAttribute('data-src'));
      }
    });
  }

  /*var ce = document.querySelector('[contenteditable]')
  ce.addEventListener('paste', function (e) {
    e.preventDefault()
    var text = e.clipboardData.getData('text/plain')
    document.execCommand('insertText', false, text)
  })*/

  document.querySelectorAll('.Modal').forEach((el)=>{
    el.addEventListener('click',((evt) => {
      if (!evt.target.closest('.Modal-content')) {
        evt.target.closest('.Modal').style.display = "none";
      }
    }));
  });

  function closeSelf(evt) {
    evt.target.closest('.Modal').style.display = "none";
  }

  document.querySelectorAll('.Close-modal').forEach((el)=>{
    el.addEventListener('click',((evt) => {
      evt.target.closest('.Modal').style.display = "none";
    }));
  });

  if (window.matchMedia( "(hover: none)" ).matches) {
    // hover unavailable
    document.addEventListener('click', ({ target }) => {
      if (!target.closest('.Dropdown-content')) {
        document.querySelectorAll('.Dropdown-content').forEach((el)=>{
          el.style.display = 'none';
          //document.querySelector('.Text-box').setAttribute('contentEditable',true);
        })
      }
    });

    document.querySelectorAll('.Dropdown-header').forEach((el)=>{
      if (el instanceof Element) {
        el.addEventListener('click',(ev)=>{
          if (ev.target.closest('.Dropdown-content')) {
            return;
          }
          let child = el.querySelector('.Dropdown-content');
          let textBox = document.querySelector('.Text-box');
          if (getComputedStyle(child).display!=="none") {
            child.style.display = 'none';
            //textBox.setAttribute('contentEditable',true);
          } else {
            child.style.display = 'block';
            //textBox.removeAttribute('contentEditable');
            ev.preventDefault();
            ev.stopPropagation();
          }
        });
      }
    })
  }

  function sendAnalyticsEvent(name) {
    if (window.AppAnalytics) {
      window.AppAnalytics.sendEvent(name);
    }
    let pre = "ttsreader_player_";
    if (gtag) {
      gtag('event', pre + name, {'value': "1"});
    }
  }

  function feedback(value) {
    if (gtag) {
      gtag('event', value>0 ? "feedback_good" : "feedback_bad", {
        'value': value>0 ? "good" : "bad"
      });
    }

    if (value<0) {
      window.open("https://docs.google.com/forms/d/e/1FAIpQLSecnm9ZnFje9S6OSSQqP4Ts4av-hSmhAUbuLvQAojWUdckAtg/viewform?usp=sf_link","_blank");
    } else {
      alert('í”¼ë“œë°± ê°ì‚¬í•©ë‹ˆë‹¤. â¤ï¸');
    }
  }
</script>

<div id="area" style="height: 0;width: 0; visibility: hidden"></div>

<script>
  /*
  This script is for sign-in and for premium status.
   */
  let currentAudioInJobs = null;
  let currentPlayButtonInJobs = null;
  const exportsRowsContainer = document.getElementById('exportsRowsContainer');
  const demoExportsRowsContainer = document.getElementById('demoExportsRowsContainer');
  const rowTemplate = document.getElementById('exportsListItemTemplate');

  function getClientInfo() {
    try {
      const ua = navigator.userAgent.toLowerCase();

      // --- Device Type ---
      let deviceType = 'desktop';
      if (navigator.userAgentData && typeof navigator.userAgentData.mobile === 'boolean') {
        deviceType = navigator.userAgentData.mobile ? 'mobile' : 'desktop';
      } else if (/mobile/.test(ua)) {
        deviceType = 'mobile';
      } else if (/android|iphone|ipad|ipod/.test(ua)) {
        deviceType = 'mobile';
      } else if (window.innerWidth < 768) {
        deviceType = 'mobile';
      }

      // --- OS ---
      let os = 'other';
      if (ua.indexOf('win') !== -1) os = 'win';
      else if (ua.indexOf('mac') !== -1) os = 'mac';
      else if (ua.indexOf('linux') !== -1) os = 'linux';
      else if (/android/.test(ua)) os = 'android';
      else if (/iphone|ipad|ipod/.test(ua)) os = 'ios';

      // --- Browser ---
      let browser = 'other';
      if (ua.indexOf('edg') !== -1) browser = 'edge';
      else if (ua.indexOf('chrome') !== -1 && ua.indexOf('edg') === -1) browser = 'chrome';
      else if (ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1) browser = 'safari';
      else if (ua.indexOf('firefox') !== -1) browser = 'firefox';
      else if (ua.indexOf('opr') !== -1 || ua.indexOf('opera') !== -1) browser = 'opera';

      // --- Timezone ---
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'unknown';

      return `${deviceType}:${os}:${browser}:${tz}`;
    } catch (e) {
      return "";
    }
  }

  window.AppAnalytics = {
    // --- Generate or Retrieve Local ID ---
    STORAGE_KEY_ID: 'ttsreader.analytics.id',
    STORAGE_KEY_START_MS: 'ttsreader.analytics.start_ms',
    STORAGE_KEY_SENT_EVENT_TYPES: 'ttsreader.analytics.sent_types',
    id: localStorage.getItem('ttsreader.analytics.id'),
    clientInfo: getClientInfo(),
    sendEvent: (eventType) => {
      if (!firebase || !window.AppAnalytics.id) {
        return;
      }

      try {
        // Send first of type only:
        let pastEvents = localStorage.getItem(window.AppAnalytics.STORAGE_KEY_SENT_EVENT_TYPES) || "";
        if (pastEvents.indexOf(eventType) >= 0) {
          return;
        }

        localStorage.setItem(window.AppAnalytics.STORAGE_KEY_SENT_EVENT_TYPES, (pastEvents + "," + eventType));
        const now = Date.now();
        const secondsSinceStart = Math.floor((now - localStorage.getItem(window.AppAnalytics.STORAGE_KEY_START_MS)) / 1000);
        const dateKey = new Date().toISOString().slice(0, 10).replace(/-/g, ''); // YYYYMMDD
        const path = `analytics/${dateKey}/${eventType}`;

        const data = {
          id: window.AppAnalytics.id,
          eventType,
          secondsSinceStart,
          timestamp: new Date(now).toISOString(),
          info: window.AppAnalytics.clientInfo
        };

        firebase.database().ref(path).push(data)
                .then(() => {
                })
                .catch(err => {
                });
      } catch (e) {}
    }
  }
  window.addEventListener('pagehide', (event) => {
    if (!event.persisted) { // if not from bfcache
      window.AppAnalytics.sendEvent('user_left');
    }
  });
  document.querySelectorAll(".Playback-buttons-bar button").forEach((el)=>{
    el.addEventListener('click',(event) => {
      let buttonName = event.currentTarget.getAttribute('data-ws-onclick');
      console.log('click_' + buttonName);
      window.AppAnalytics.sendEvent('click_' + buttonName);
    });
  });

  const voiceToName = {
    "gcp.en-GB-Standard-D": "Noah",
    "gcp.en-GB-Standard-N": "Lilly",
    "gcp.en-GB-Standard-A": "Olivia",
    "en-US-AndrewMultilingualNeural": "John",
    "it-IT-MarcelloMultilingualNeural": "Marcello",
    "de-DE-SeraphinaMultilingualNeural": "Seraphina",
  }

  function getNameFromVoiceUri(voiceUri) {
    if (voiceToName[voiceUri]) {
      return voiceToName[voiceUri];
    }

    let parts = voiceUri.split(".");
    // find largest part:
    let largestPart = parts.reduce((a, b) => a.length > b.length ? a : b);
    parts = largestPart.split("-");
    // find largest part again:
    largestPart = parts.reduce((a, b) => a.length > b.length ? a : b);

    largestPart = largestPart.replace("Multilingual","").replace("Neural", "").replace("Standard", "").replace("Premium", "").replace("Expressive", "").replace("Enhanced", "");
    return largestPart;
  }

    // Handle cases like "Google UK

  function getFlagForLocaleCode(code, voiceUri) {
    if (code === undefined || code === "") {
      return "";
    }

    if (code==="i18n") {
      return "ğŸŒ";
    }

    if (code.includes("-")) {
      // Handle locale codes like "en-US", "fr-FR", etc.
      code = code.split("-")[1];
    } else if (code.includes("_")) {
      // Handle locale codes like "en_US", "fr_FR", etc.
      code = code.split("_")[1];
    } else {
      // code is only lang, no country - get country from voiceUri
      if (code==="en") {
        if (voiceUri.includes("en-US")) {
          code = "US";
        } else if (voiceUri.includes("en-GB")) {
          code = "GB";
        } else if (voiceUri.includes("en-AU")) {
          code = "AU";
        } else if (voiceUri.includes("en-CA")) {
          code = "CA";
        } else if (voiceUri.includes("en-IN")) {
          code = "IN";
        } else if (voiceUri.includes("en-NZ")) {
          code = "NZ";
        } else if (voiceUri.includes("en-ZA")) {
          code = "ZA";
        } else {
          code = "US"; // Default if no specific country is found
        }
      } else if (code==="fr") {
        if (voiceUri.includes("fr-FR")) {
          code = "FR";
        } else if (voiceUri.includes("fr-CA")) {
          code = "CA";
        } else {
          code = "FR"; // Default if no specific country is found
        }
      } else if (code==="es") {
        if (voiceUri.includes("es-ES")) {
          code = "ES";
        } else if (voiceUri.includes("es-MX")) {
          code = "MX";
        } else if (voiceUri.includes("es-US")) {
          code = "US";
        } else {
          code = "MX"; // Default if no specific country is found
        }
      }
    }

    if (code === null || code.length !== 2) {
      return code ? code.substring(0,3) : "";
    }

    code = code.toUpperCase();

    if (code==="IL") {
      return "ğŸ‡®ğŸ‡±";
    }

    if (code==="PS") {
      return "ğŸ‡µğŸ‡¸";
    }

    let sb = "";
    const a = String.fromCodePoint(code.codePointAt(0) - 0x41 + 0x1F1E6);
    const b = String.fromCodePoint(code.codePointAt(1) - 0x41 + 0x1F1E6);
    return a + b;
  }

  function startCountdown(row, job) {
    const etaSeconds = job.estimatedTimeInSecs || 10;
    const startTime = job.createdAt;
    const endTime = startTime + etaSeconds * 1000;

    const stateEl = row.querySelector('.job-state');

    function updateCountdown() {
      const now = Date.now();
      let remaining = Math.max(0, Math.floor((endTime - now) / 1000)); // in seconds

      const minutes = String(Math.floor(remaining / 60)).padStart(2, '0');
      const seconds = String(remaining % 60).padStart(2, '0');

      stateEl.textContent = `ì²˜ë¦¬ ì¤‘. ETA: ${minutes}:${seconds}`;

      if (remaining <= 0) {
        if (timer) {
        clearInterval(timer);
        }
        stateEl.textContent = 'ë§ˆë¬´ë¦¬ ì¤‘...'; // or "Done", depending on your app logic
      }
    }

    const timer = setInterval(updateCountdown, 1000);
  }

  function renderJobRow(job, container) {
    const clone = rowTemplate.content.cloneNode(true);
    const row = clone.querySelector('.job-row');

    /*
      <div class="job-row">
          <span class="job-date"></span>
          <div class="job-preview flex-fill"></div>
          <span class="voice-lang Flag-font" title="Language & accent">ğŸ‡¬ğŸ‡§</span>
          <span class="voice-name">David</span>
          <div class="job-rate"></div>
          <span class="job-state"></span>
          <span class="job-download-btn"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg></span>
      </div>
     */
    const downloadLink = clone.querySelector('.job-download-link');
    downloadLink.setAttribute("data-ws-job-id", job.id);
    row.querySelector('.job-date').textContent = new Date(job.createdAt).toLocaleDateString();
    row.querySelector('.job-preview').textContent = job.previewText || '';
    row.querySelector('.voice-lang').textContent = getFlagForLocaleCode(job.lang, job.voiceURI);
    row.querySelector('.voice-name').textContent = getNameFromVoiceUri(job.voiceURI);
    row.querySelector('.job-rate').textContent = job.rate;

    if (job.statusCode==="Done") {
      row.querySelector('.job-state').remove();
    } else {
      row.querySelector('.job-download-btn').remove();
      if (job.statusCode==="Processing") {
        let estimatedTimeInSecs = 10 + Math.floor(job.requestedChars * 70/15000);
        //row.querySelector('.job-state').textContent = "Processing. ETA: " + new Date(job.createdAt + estimatedTimeInSecs * 1000).toLocaleTimeString();
        job.estimatedTimeInSecs = estimatedTimeInSecs;
        startCountdown(row, job);
      } else {
        row.querySelector('.job-state').textContent = job.statusCode;
      }
    }


    if (job.mp3Url) {
      let mp3Link = job.mp3Url.split('?')[0];
      let jobLink = mp3Link.split('.mp3')[0];
      downloadLink.querySelector("a").href = mp3Link;
      downloadLink.querySelector("a").setAttribute("onclick", "event.stopPropagation();");
      downloadLink.setAttribute("onclick", "openRenderedModal(" + JSON.stringify({url: jobLink, voice: getNameFromVoiceUri(job.voiceURI), lang: job.lang, rate: job.rate, date: job.createdAt}) + "); return false;");
    } else {
      downloadLink.onclick ="alert('ì‘ì—…ì´ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì²˜ë¦¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');";
    }

    // If exportsRowsContainer contains a row with [data-ws-job-id] equal to job.id, replace it with the new row.
    // Otherwise, append the new row.

    if (container.querySelector(`[data-ws-job-id="${job.id}"]`)) {
      const existingRow = container.querySelector(`[data-ws-job-id="${job.id}"]`);
      container.replaceChild(clone, existingRow);
      if (job.mp3Url && !existingRow.querySelector('.job-download-btn')) {
        // IE newly available link:
        downloadLink.click(); // Effectively opening renderedModal
        appMethods.closeModal("uploadSuccessModal"); // If priorly opened
      }
    } else {
      // 'Append' to be the first child:
      container.insertBefore(clone, container.firstChild);
    }
  }

  window.getIdToken = async () => null;

  let clockStartedOn = Date.now();
  function stopper() {
    return Math.round((Date.now()-clockStartedOn)/1000) + ": ";
  }

  function fetchJsFile(url, callback, dataNamespace) {
    let newEl = document.createElement('script');
    newEl.src=url;
    newEl.onload = function(){
      if (callback) {
        callback();
      }
    };
    if (dataNamespace) {
      newEl.setAttribute('data-namespace', dataNamespace);
    }
    document.getElementsByTagName("head")[0].appendChild(newEl);
  }

  if (document.readyState == "loading") {
    // Still loading, no need for optional added scripts. Wait.
    console.log(stopper() + 'Script awaiting to load all DOM');
    addEventListener('DOMContentLoaded', (event) => {
      runPostLoadScript();
    });
  } else {
    console.log(stopper() + 'Loading script right away');
    runPostLoadScript();
  }

  function runPostLoadScript() {

    console.log(stopper() + 'Loading script post DOM');

    let srcs = [
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js",
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js",
      "https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js",
      "https://unpkg.com/mammoth/mammoth.browser.min.js"
    ]

    let loadedScripts = 0;
    function onScriptLoaded() {
      loadedScripts++;
      if (loadedScripts==srcs.length) {
        runDependentScript();
      } else {
        fetchJsFile(srcs[loadedScripts], onScriptLoaded);
      }
    }

    function isBotUserAgent() {
      const ua = navigator.userAgent.toLowerCase();
      return /bot|crawler|spider|crawling|facebookexternalhit|slurp|bingpreview|embedly|pinterest|whatsapp|twitterbot|linkedinbot|telegrambot/.test(ua);
    }

    fetchJsFile(srcs[0], onScriptLoaded);

    function renderPayPalButton(uid, container) {
      const sku = container.getAttribute("data-ws-sku");
      let style = {
        shape: 'pill',
        color: 'gold',
        layout: 'vertical',
        label: 'paypal',
        height: 50             // ğŸ”¼ Default is ~35 â€” make this 45â€“55 for a larger button
      };

      function delayAcknowledgeAlertAsync() {
        // Acknowledge alert after a delay to ensure the UI is responsive
        setTimeout(() => {
          alert('ê°ì‚¬í•©ë‹ˆë‹¤ - ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ìƒ ì²˜ë¦¬ ì‹œ PayPalì´ ì„œë²„ì— ì•Œë¦¬ê³  êµ¬ë§¤ê°€ ëª‡ ì´ˆ ë‚´ í™œì„±í™”ë©ë‹ˆë‹¤. ë¬¸ì œê°€ ìˆìœ¼ë©´ contact@ttsreader.com ìœ¼ë¡œ ì—°ë½í•˜ì„¸ìš”.');
          window.window.AppAnalytics.sendEvent('purchase');
          //appMethods.closeModal("upgradeModal");
        }, 100);
      }

      let onApproveSub = function (data, actions) {
        console.log('subscriptionID: ' + data?.subscriptionID); // You can add optional success message for the subscriber here
        delayAcknowledgeAlertAsync();
        return Promise.resolve();
        // onSubscriptionComplete(data.subscriptionID, uid);
      };

      let onApproveOnce = function (data, actions) {
        return actions.order.capture().then(function (details) {
          console.log('approved: ', details);
          delayAcknowledgeAlertAsync();
        });
      };

      let onCancel = function (data) {
        console.log('Payment cancelled:', data);
        // Optionally, you can add a message to the user here
        alert('ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      };

      const custom_id = sku + "__" + uid;

      let config = {
        style, onCancel
      }

      let paypalScope;

      if (sku === "SKU_TTSREADER_PREMIUM_MONTHLY") {
        paypalScope = paypalSubs;
        config.onApprove = onApproveSub;
        config.createSubscription = function (data, actions) {
          return actions.subscription.create({
            /* Creates the subscription */
            plan_id: 'P-82C30553N8925890NMZZWUTA',
            custom_id
          });
        }
      } else {
        paypalScope = paypalOnce; // For one-time purchases
        config.onApprove = onApproveOnce;
        // Default is the minimum 200k:
        let price = 39; // In USD
        let credits = "3M"; // As human string
        let description = "TTSReader " + credits + " Extra Credits";
        config.createOrder = function (data, actions) {
          return actions.order.create({
            purchase_units: [{
              description,
              custom_id,
              amount: {
                value: price
              }
            }]
          });
        }
      }

      paypalScope.Buttons(config).render(container); // Renders the PayPal button UI
    }

    function runDependentScript() {
      let firebaseConfig = {
        apiKey: "AIzaSyDqtWayB72nqpH81RMSEgUzFDN1ES0hrcY",
        authDomain: "ttsreader.com",
        databaseURL: "https://ttsreader.firebaseio.com",
        projectId: "ttsreader",
        messagingSenderId: "656667743185"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      firebase.auth().onAuthStateChanged(function(user) {
        //window.globalMethods.closeModalById("modalSigninVertical");
        console.log(stopper() + 'user signed ' + (user ? "IN" : "OUT"));

        if (!user) {
          // Set up analytics for new real human users:
          if (!localStorage.getItem("ttsreader.wasOnboarding3") && !localStorage.getItem("ttsreader.wasSignedIn") && !window.AppAnalytics.id && !isBotUserAgent()) {
            // This is a first ever visit. Set unique setup here:
            // A/B test prefix: 50% A / 50% B
            const prefix = DEFAULT_THEME.includes("dark") ? 'D3101_' : 'L3101_'; //
            console.log({prefix});
            const randomString = Math.random().toString(36).substring(2, 17); // 15 chars
            window.AppAnalytics.id = prefix + randomString;
            localStorage.setItem(window.AppAnalytics.STORAGE_KEY_ID, window.AppAnalytics.id);
            localStorage.setItem(window.AppAnalytics.STORAGE_KEY_START_MS, Date.now());
            window.AppAnalytics.sendEvent('firstVisit');
            openOnboarding();
          }
        }

        if (user) {
          appMethods.closeModal("signinModal");

          window.getIdToken = async () => {
            return await user.getIdToken();
          }

          localStorage.setItem("ttsreader.wasSignedIn", "true");
          // Remove the "data-is-signed-out" attribute from the html tag:
          document.documentElement.removeAttribute("data-is-signed-out");
          closeOnboarding();

          // User is signed in.
          window.updateStateWithParentData({
            wasAuthReceived: true,
            uid: user.uid,
            email: user.email,
            ronenMock: true,
          });
          window.uid = user.uid;
          initDbListeners(user.uid);

          // Bring PayPal SDK:
          fetchJsFile("https://www.paypal.com/sdk/js?client-id=AUZU9gCiVB9cPTl9r8lUGSUvD-dn8dSsmYzxysRH2Ec4Dv6fpq2g4gK7nZYYrltIFnyAMMS7F5IfN0LG&vault=true&intent=subscription&locale=ko_KR",
                  ()=>{
                    fetchJsFile("https://www.paypal.com/sdk/js?client-id=AUZU9gCiVB9cPTl9r8lUGSUvD-dn8dSsmYzxysRH2Ec4Dv6fpq2g4gK7nZYYrltIFnyAMMS7F5IfN0LG&locale=ko_KR",
                            () => {
                              // Fill in the buttons:
                              console.log('PayPal SDK loaded: ', paypalOnce, paypalSubs);
                              document.querySelectorAll(".paypal-btn-container").forEach(container => {
                                renderPayPalButton(user.uid, container);
                              })
                            }, "paypalOnce");
                  }, "paypalSubs");
        } else {
          // User signed out.
          window.getIdToken = async () => null;
          localStorage.removeItem("ttsreader.wasSignedIn");
          // Set the "data-is-signed-out" attribute to the html tag:
          document.documentElement.setAttribute("data-is-signed-out", "true");

          window.updateStateWithParentData({
            serverData: null,
            isPremium: false,
            wasAuthReceived: false,
            uid:  "",
            email: "",
            ronenMock: {key: true},
            podcast_main_channel_url: "",
          });
          window.uid = null;
          if (window.getAppState && !getAppState().data.isPremium) {
            // injectAds();
          }
          let els = document.querySelectorAll("#exportsRowsContainer>.job-download-link");
          if (els && els.length>0) {
            els.forEach((el)=>{
              el.remove();
            })
          }
        }
      });
    }
  }

  function hashFromString(str) {
    let hash = 0,
            i, chr;
    if (str.length === 0) return hash;
    for (i = 0; i < str.length; i++) {
      chr = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + chr;
      hash |= 0; // Convert to 32bit integer
    }
    return hash;
  }

  async function cancelSubscription() {
    if (!window.subscriptionId) {
      alert('ì·¨ì†Œí•  êµ¬ë…ì´ ì—†ìŠµë‹ˆë‹¤. ì˜¤ë¥˜ë¼ ìƒê°ë˜ë©´ ì–‘ì‹ì´ë‚˜ contact@ttsreader.com ìœ¼ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.');
      return;
    }

    if (confirm('Are you sure you want to cancel your subscription?')) {
      let url = "https://us-central1-ttsreader.cloudfunctions.net/cancelPremiumSubscription";  // Production
      //let url = "http://127.0.0.1:5001/ttsreader/us-central1/cancelPremiumSubscription"; // Local testing
      const subId = window.subscriptionId;
      const authToken = await window.getIdToken();

      fetch(url, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${authToken}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ subId })
      })
              .then(async (response) => {
                const text = await response.text();
                if (!response.ok) {
                  alert("Error: " + response.status + " - " + text);
                  throw new Error(text || "Unknown error");
                }
                // Success
                alert("ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
              })
              .catch((error) => {
                // Failure
                console.error("Request failed:", error);
                alert("An error occurred: " + error.message);
              });
    }
  }

  function confirmUploadSucceeded() {
    openOrCloseExportsListModal();
    appMethods.closeModal('uploadModal');
    appMethods.showModal('uploadSuccessModal');
    window.isWaitingForUploadConfirmation = false;
  }

  (function populateDemoExports() {
    // This function populates the demo exports with some sample data.
    const demoJobs = [
      {
        id: "demo1",
        createdAt: Date.now() - 1000 * 60 * 60 * 240, // 10 days ago
        previewText: "The fascinating 19th Century. Sourced from Wikipedia.",
        voiceURI: "Nova",
        lang: "en-US",
        rate: "1.0",
        statusCode: "Done",
        mp3Url: "https://ttsreaderstorage.blob.core.windows.net/tts-outputs/83d9901c-3e5a-4dd8-9f12-88311274d7a9/83d9901c-3e5a-4dd8-9f12-88311274d7a9/0001.mp3"
      },
      {
        id: "demo2",
        createdAt: Date.now() - 1000 * 60 * 30 * 120, // 5 days ago
        previewText: "The incredible Benjamin Franklin, a writer, scientist, inventor and statesman.",
        voiceURI: "John",
        lang: "en-US",
        rate: "1.0",
        statusCode: "Done",
        mp3Url: "https://ttsreaderstorage.blob.core.windows.net/tts-outputs/demo_benjamin_franklin/demo_benjamin_franklin/0001.mp3" // demo_benjamin_franklin
      }
    ];

    demoJobs.forEach(job => renderJobRow(job, demoExportsRowsContainer));
  })();

  async function initDbListeners(uid) {

    // Listen to 'users' data: TODO...
    /*firebase.database().ref('/users/' + uid).on('value', (snapshot) => {
      let data = snapshot.val();
      console.log(stopper() + 'got user data from db: ', data);
      // If we need anything from the user data, we can use it here.
      // In the future - this would be the place to sync between devices.
    });*/

    // Listen to the new plans path.
    // If none - then fetch legacy data. If data there - then call sync plans once.
    firebase.database().ref('/users_server_data/' + uid).on('value', async (snapshot) => {
      let data = snapshot.val();
      let wasLegacyPlanFound = false;

      if (!localStorage.getItem('wasBWCompatRun') && (!data || Object.keys(data).length === 0 || !data.currentPremiumPlan || Object.keys(data.currentPremiumPlan).length === 0)) {
        // No new plan found.

        console.log(stopper() + 'No server data found for user: ' + uid);
        // Let's see if there's legacy data to sync:

        const subsSnapshot = await firebase.database().ref('/subs/' + uid).once('value');
        const subsData = subsSnapshot.val();
        if (!subsData || Object.keys(subsData).length === 0) {
          // Continues to 'purchases':
          const purchasesSnapshot = await firebase.database().ref('/purchases/' + uid).once('value');
          const purchasesData = purchasesSnapshot.val();
          if (purchasesData && Object.keys(purchasesData).length > 0) {
            wasLegacyPlanFound = true;
          }
        } else {
          wasLegacyPlanFound = true;
        }
      }

      if (!data || Object.keys(data).length===0) {
        data = true; // A simple flag to indicate that the data was fetched, although empty.
      } else {
        if (data.currentPremiumPlan && data.usage) {
          const now = new Date();
          let clientMonthId = (now.getUTCFullYear() - 1970) * 12 + now.getUTCMonth();
          console.log("Client monthId:", clientMonthId, "Server monthId:", data.usage.mEpoch);
          // If we have a current plan, let's set it to the state:
          window.updateStateWithParentData({
            isPremium: true,
            currentPremiumPlan: data.currentPremiumPlan
          });
          if (clientMonthId > data.usage.mEpoch) {
            // The client month is greater than the server month, so we need to update the monthId:
            // Send an authenticated request to update the monthId to the server endpoint:
            // curl -X POST "https://us-central1-ttsreader.cloudfunctions.net/functionForwardQuotaMonth" -H "Authorization: Bearer FIREBASE_USER_TOKEN_ID" -H "Content-Type: application/json"
            const idToken = await window.getIdToken();
            if (idToken) {
              fetch("https://us-central1-ttsreader.cloudfunctions.net/functionForwardQuotaMonth", {
                method: "POST",
                headers: {
                  "Authorization": `Bearer ${idToken}`,
                  "Content-Type": "application/json"
                },
                body: ""
              });
            } else {
              console.warn("No ID token available to update monthId.");
            }
          }
        }
      }

      updateStateWithParentData({serverData: data || true});
      if (wasLegacyPlanFound) {
        // Sync plans:
        setBackwardsCompatibilityQuotas();
      }
    });

    let jobsRef = firebase.database().ref('/exports/' + uid);

    // On child added listener, sort by createdAt descending:
    jobsRef.orderByChild('createdAt').on('child_added', (snapshot) => {
      const jobData = snapshot.val();
      if (!jobData || typeof jobData.createdAt !== 'number') return;

      const job = {
        id: snapshot.key,
        ...jobData
      };

      // Render the new job row:
      renderJobRow(job, exportsRowsContainer);
      let createdAt = job.createdAt || 0;
      if (window.isWaitingForUploadConfirmation && job.statusCode === "Processing" && ((Date.now() - createdAt) < (1000*60*5))) {
        // If we are waiting for upload confirmation and the job is done, confirm it:
        confirmUploadSucceeded();
      }
    });

    // Add onchild change listener to update existing jobs:
    jobsRef.on('child_changed', (snapshot) => {
      console.log('Job changed:', snapshot.key);
      const jobData = snapshot.val();
      if (!jobData || typeof jobData.createdAt !== 'number') return;

      const job = {
        id: snapshot.key,
        ...jobData
      };

      // Render the updated job row - it will replace the existing one:
      renderJobRow(job, exportsRowsContainer);
    });


    /*firebase.database().ref('/exports/' + uid).on('value',
            async (snapshot) => {
              try {
                const data = snapshot.val();

                if (!data || typeof data !== 'object') {
                  jobs = [];
                  return;
                }

                jobs = Object.entries(data)
                        .map(([jobId, jobData]) => {
                          if (!jobData || typeof jobData.createdAt !== 'number') return null;

                          return {
                            jobId,
                            ...jobData
                          };
                        })
                        .filter(job => job !== null) // remove invalid entries
                        .sort((a, b) => b.createdAt - a.createdAt);

                if (jobs.length>0) {
                  document.getElementById("exportsRowsContainer").innerHTML = ""; // Clear the previous jobs list
                }
                // console.log('Updated jobs list:', jobs);
                // TODO: Update the UI with the new jobs list.
                for (const job of jobs) {
                  renderJobRow(job);
                }
              } catch (err) {
                console.error('Error processing jobs snapshot:', err);
                jobs = [];
              }
            },
            (error) => {
              console.error('Firebase listener error:', error);
            }
    );*/
  }

  async function setBackwardsCompatibilityQuotas() {
    try {
      const user = firebase.auth().currentUser;
      if (!user) {
        return;
      }

      const idToken = await user.getIdToken();

      const response = await fetch("https://us-central1-ttsreader.cloudfunctions.net/functionArrangePastPayments", {
        method: "GET", // Or "POST" if your function expects POST
        headers: {
          "Authorization": `Bearer ${idToken}`
        }
      });

      if (!response.ok) {
        const errText = await response.text();
        return;
      }

      const responseMessage = await response.text();
      console.log("Function response: ", responseMessage);

      localStorage.setItem('wasBWCompatRun', true);
      return responseMessage;
    } catch (err) {
      console.error("Failed to call setBackwardsCompatibilityQuotas:", err);
    }
  }

  function getOs() {
    if (!window.navigator) {
      return "unknown";
    }

    let userAgentLowerCaseString = ("" + navigator.userAgent + " " + navigator.platform + " " + navigator.userAgentData).toLowerCase();

    if (/android/i.test(userAgentLowerCaseString)) {
      return "android";
    }

    if (/mac/i.test(userAgentLowerCaseString) && "ontouchend" in document) {
      return "ios";
    }

    if (/ipad|iphone|ipod|ios/i.test(userAgentLowerCaseString)) {
      return "ios";
    }

    if (/mac/i.test(userAgentLowerCaseString)) {
      return "mac";
    }

    if (/win/i.test(userAgentLowerCaseString)) {
      return "win";
    }

    return "unknown"
  }

  function injectAds() {
    let isSafari = window.safari !== undefined;
    let isIos = getOs() === 'ios';
    let DISABLE_ADS = true;

    if (DISABLE_ADS || isSafari || isIos) {
      // TODO: Inject static images links to amazon, or write about premium advantages with a call to action button...
      return;
    } else {
      // Actually inserting ads:
      document.documentElement.removeAttribute('data-no-ads');
      // Inject Adsense:
      let newScriptEl = document.createElement('script');
      newScriptEl.setAttribute("src", "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5434274073094626");
      newScriptEl.setAttribute("async", "true");
      newScriptEl.setAttribute("crossorigin", "anonymous");
      document.getElementsByTagName("head")[0].appendChild(newScriptEl);
      (adsbygoogle = window.adsbygoogle || []).push({});
    }
  }

  function sendLogsToFb(uid, type, message) {
    if (!firebase) {
      return;
    }

    message = {...message, clientInfo: getClientInfo(), createdAt: new Date().toISOString(),};

    try {
      // Send first of type only:
      const dateKey = new Date().toISOString().slice(0, 10).replace(/-/g, ''); // YYYYMMDD
      const path = `logs/errors/${dateKey}/${type}/${uid}`;

      firebase.database().ref(path).push(message)
              .then(() => {
              })
              .catch(err => {
              });
    } catch (e) {}
  }

  window.sendLogsToFb = sendLogsToFb;

  function toggleSignIn() {
    var user = firebase.auth().currentUser;
    //console.log("user " , user);

    if (user) {
      // User is signed in.
      signOut();
    } else {
      // No user is signed in.
      signIn();
    }
  }

  function signInIfNeeded() {
    /*let uid = firebase.auth().currentUser ? firebase.auth().currentUser.uid : null;
    if (!uid) {
      signIn();
    }*/
  }

  async function sendWelcome() {
    try {
      let idToken = await firebase.auth().currentUser.getIdToken();
      const response = await fetch('https://us-central1-ttsreader.cloudfunctions.net/welcome', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${idToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ lang: "ko" })
      });

      if (!response.ok) {
        const errorText = await response.text();
        throw new Error(`HTTP ${response.status} â€“ ${errorText}`);
      }

      const data = await response.json();
      console.log('Success:', data);
      return data;
    } catch (err) {
      console.error('Error:', err.message);
      return null;
    }
  }

  function signOut() {
    firebase.auth().signOut();
  }

  document.querySelectorAll(".styled-sign-in-btn-google").forEach(el => {
    el.addEventListener('click', (ev) => {
      ev.stopPropagation();
      signIn(null, "google");
    });
  });

  document.querySelectorAll(".styled-sign-in-btn-apple").forEach(el => {
    el.addEventListener('click', (ev) => {
      ev.stopPropagation();
      signIn(null, "apple");
    });
  });

  function signIn(optionalOnSuccessCallback, providerName) {
    if (!providerName) {
      appMethods.showModal("signinModal");
      return;
    }
    let provider = providerName && providerName==="apple" ? (new firebase.auth.OAuthProvider('apple.com')) : (new firebase.auth.GoogleAuthProvider());
    provider.setCustomParameters({
      prompt: 'select_account'  // ğŸ”‘ This forces the account selection UI
    });
    firebase.auth().languageCode = 'ko';
    firebase.auth().signInWithPopup(provider).then(function(result) {
      // This gives you a Google Access Token. You can use it to access the Google API.
      let token = result.credential.accessToken;
      // The signed-in user info.
      let user = result.user;
      let isNewUser = result.additionalUserInfo.isNewUser;
      if (isNewUser) {
        try {
          sendWelcome();
          window.AppAnalytics.sendEvent('signup');
        } catch (err) {
          console.error('Error on isNewUser: ', err.message);
        }
      }
      if (optionalOnSuccessCallback) {
        optionalOnSuccessCallback(user);
      }
    }).catch(function(error) {
      // Handle Errors here.
      let errorCode = error.code;
      let errorMessage = error.message;
      // The email of the user's account used.
      let email = error.email;
      // The firebase.auth.AuthCredential type that was used.
      let credential = error.credential;
      // ...
    });
  }
</script>

<script>
  function getUrl(url) {
    fetch(url).then(function(response) {
      return response.text();
    }).then(function(data) {
      console.log(data);
    }).catch(function(err) {
      console.log('Fetch Error :-S', err);
    });
  }
</script>

<script>

  let currentAudio = new Audio();

  document.querySelector(".Voices-Gallery").addEventListener('click',(ev) => {
    if (ev.target.closest("[data-ws-voiceURI]")?.getAttribute("data-ws-voiceURI")) {
      ev.stopPropagation();
      let voiceURI = ev.target.closest("[data-ws-voiceURI]")?.getAttribute("data-ws-voiceURI");
      if (!voiceURI) {
        return;
      }

      appMethods.handleVoiceChange({currentTarget: {value: voiceURI}});
      ev.target.closest('.Voices-Gallery').querySelectorAll('.selected').forEach((el)=> {
        el.classList.remove('selected');
      });
      ev.target.closest(".voice-tile").classList.add('selected');
      let audioSrc = ev.target.closest("[data-ws-voiceURI]").getAttribute("data-ws-audio-src");
      console.log(audioSrc);

      console.log(currentAudio.src.endsWith(audioSrc), currentAudio.src)
      console.log(currentAudio.paused)
      console.log(currentAudio.ended)

      let shouldSimplyStop = audioSrc && currentAudio.src.endsWith(audioSrc) && !currentAudio.paused && !currentAudio.ended;
      // Stop:
      currentAudio.currentTime = 0;  // Always restart from beginning
      currentAudio.pause();

      // Potentially play something else:
      if (!shouldSimplyStop) {
        appMethods.testVoice(ev.target.closest("[data-ws-voiceURI]"), voiceURI);
      }
    }
  });

  function openOnboarding(forceOpen) {
    let shouldOpen = forceOpen; // || window.AppAnalytics.id?.startsWith("A_") - if we want to try some better onboarding...
    if (!shouldOpen) {
      //appMethods.showModal("emptyTextModal")
      localStorage.setItem("ttsreader.wasOnboarding3", "true");
      return;
    }

    document.getElementById('onboardingModal').style.display = 'flex';
    localStorage.removeItem("ttsreader.wasOnboarding3");
  }

  function closeOnboarding() {
    document.getElementById('onboardingModal').style.display = 'none';
    if (!localStorage.getItem("ttsreader.wasOnboarding3")) {
      // If we never did the onboarding, set the flag:
      appMethods.showModal("postOnboardingModal");
    }
    localStorage.setItem("ttsreader.wasOnboarding3", "true");
  }

  function isVoicePremium() {
    return appMethods.isVoicePremium();
  }

  function jumpToStep(el, index) {
    let parent = el.closest("[data-ws-step]")?.parentElement;
    if (parent) {
      parent.querySelectorAll("[data-ws-step]").forEach((el)=> {
        if (el.getAttribute("data-ws-step")===index) {
          el.style.display = "flex";
        } else {
          el.style.display = "none";
        }
      });
    }
  }

  function nextStep(el) {
    let currentStep = "" + el.closest("[data-ws-step]")?.getAttribute("data-ws-step");
    jumpToStep(el, "" + (Number.parseInt(currentStep) + 1));
  }

  function prevStep(el) {
    let currentStep = "" + el.closest("[data-ws-step]")?.getAttribute("data-ws-step");
    jumpToStep(el, "" + (Number.parseInt(currentStep) - 1));
  }

  const themeSwitches = document.querySelectorAll('.themeSwitch');
  if (document.documentElement.hasAttribute('data-dark-mode')) {
    themeSwitches.forEach((el)=>{
      el.setAttribute('checked', true);
    });
  }
  themeSwitches.forEach((themeSwitch)=>{
    themeSwitch.addEventListener('change', () => {
      if(themeSwitch.checked) {
        setUiToDarkModeAndBgTheme(true);
      } else {
        setUiToDarkModeAndBgTheme(false);
      }
    });
  });

  function closeNewUpgradeModal(isPurchase) {
    appMethods.closeModal('upgradeModal')
    let modalEl = document.getElementById('newUpgradeModal');
    if (modalEl) {
      modalEl.classList.remove("show");
      modalEl.addEventListener("transitionend", () => {
        //modalEl.classList.add("hidden");
      }, { once: true });
    }
    if (isPurchase) {
      window.AppAnalytics.sendEvent('purchase');
    }
  }

  function closeRenderedModal() {
    let modalEl = document.getElementById('renderedModal');
    if (modalEl) {
      modalEl.classList.remove("show");
      modalEl.addEventListener("transitionend", () => {
        //modalEl.classList.add("hidden");
      }, { once: true });
    }
  }

  function openOrCloseExportsListModal(isToClose) {
    let modalEl = document.getElementById('exportsListModal');
    if (isToClose) {
      modalEl.classList.remove("show");
    } else {
      modalEl.classList.add("show");
      modalEl.classList.remove("hidden");
      appMethods.closeModal("exportModal");
    }
  }

  function openNewUpgradeModal() {
    let uid = firebase?.auth()?.currentUser?.uid;
    if (!uid) {
      window.AppAnalytics.sendEvent('upgradeModalPreSignin');
      appMethods.showModal("upgradeModal");
      return;
    } else {
      window.AppAnalytics.sendEvent('upgradeModalPostSignin');
    }

    /*if (window.AppAnalytics?.id?.startsWith("N1_")) {
      appMethods.showModal("upgradeModal");
      return;
    }*/

    /*if (!uid) {
      signIn(openNewUpgradeModal);
      return;
    }*/

    let modalEl = document.getElementById('newUpgradeModal');
    if (!modalEl) {
      console.error("Modal element not found");
      return;
    }

    let iframeEl = modalEl.querySelector('iframe');
    if (!iframeEl) {
      console.error("Iframe element not found in modal");
      return;
    }
    let lang = document.documentElement.getAttribute('lang') || 'en';
    let theme = document.documentElement.getAttribute('data-dark-mode') ? 'dark' : 'light';

    iframeEl.onload = function () {
      modalEl.classList.remove("hidden");
      requestAnimationFrame(() => modalEl.classList.add("show"));
    };
    let shouldHideSubscriptions = Boolean(window.subscriptionId);
    let src = `newUpgradeModal.${lang}.html?uid=${uid}&theme=${theme}&lang=${lang}&onClose=closeNewUpgradeModal&isPremiumPlanAlready=${shouldHideSubscriptions}`;
    if (!iframeEl.src || !iframeEl.src.endsWith(src)) {
      let obj = {iframe: iframeEl.src, src};
      console.log("src!==src: ", obj);
      iframeEl.src = src;
    } else {
      console.log("src===src");
      modalEl.classList.remove("hidden");
      requestAnimationFrame(() => modalEl.classList.add("show"));
    }
  }

  function openRenderedModal(params) {
    const {url, voice, rate, date, lang} = params;
    let modalEl = document.getElementById('renderedModal');
    if (!modalEl) {
      console.error("Modal element not found");
      return;
    }

    let iframeEl = modalEl.querySelector('iframe');
    if (!iframeEl) {
      console.error("Iframe element not found in modal");
      return;
    }
    let theme = document.documentElement.getAttribute('data-dark-mode') ? 'dark' : 'light';

    iframeEl.onload = function () {
      modalEl.classList.remove("hidden");
      requestAnimationFrame(() => modalEl.classList.add("show"));
    };
    iframeEl.src = `rendered.html?url=${url}&lang=${lang}&voice=${encodeURIComponent(voice)}&rate=${rate}&date=${date}&onClose=closeRenderedModal&theme=${theme}`;
  }


  // Initialize and manage the Podcast checkbox availability and state
  (function initSendToPodcastCheckbox() {
    const checkbox = document.getElementById('sendToPodcastCheckbox');

    // Reflect user choice into app state
    checkbox.addEventListener('change', function () {
      if (window.updateStateWithParentData) {
        window.updateStateWithParentData({ shouldPodcast: Boolean(checkbox.checked) });
      }
    });
  })();


</script>


<!-- JS STRINGS -->
<div id="JS_STRINGS" style="display: none">
  <div data-ws-string-key="alert_file_not_supported" data-ws-string-value="ì§€ì›ë˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë¼ë©´ contact@ttsreader.com ìœ¼ë¡œ ì•Œë ¤ì£¼ì„¸ìš”."></div>
  <div data-ws-string-key="alert_quota_reached" data-ws-string-value="ì¿¼í„°ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ì”ì•¡ì„ í™•ì¸í•˜ê±°ë‚˜ í•„ìš” ì‹œ ì‚¬ìš©ëŸ‰ ê¸°ë°˜ êµ¬ë§¤ë¥¼ í•˜ê±°ë‚˜ ë¬´ë£Œ ë° ë¬´ì œí•œ ìŒì„±ìœ¼ë¡œ ì „í™˜í•˜ì„¸ìš”."></div>
  <div data-ws-string-key="alert_copied" data-ws-string-value="í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤."></div>
  <div data-ws-string-key="alert_missing_credits" data-ws-string-value="ìš”ì²­ì„ ì™„ë£Œí•  ì¶©ë¶„í•œ í¬ë ˆë”§ì´ ì—†ìŠµë‹ˆë‹¤."></div>
  <div data-ws-string-key="alert_requires_premium" data-ws-string-value="ì´ ìƒˆ ê¸°ëŠ¥ì€ í”„ë¦¬ë¯¸ì—„ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¨¼ì € ì—…ê·¸ë ˆì´ë“œí•˜ì„¸ìš”. ì–¸ì œë“  ì·¨ì†Œ ê°€ëŠ¥í•˜ë©° 100% ë§Œì¡± ë³´ì¥ ì •ì±…ì´ ìˆìŠµë‹ˆë‹¤."></div>
  <div data-ws-string-key="alert_requires_signin" data-ws-string-value=""></div>
  <div data-ws-string-key="alert_export_too_long" data-ws-string-value="í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¹ë‹ˆë‹¤. í•©ë¦¬ì ì¸ ì˜¤ë””ì˜¤ íŒŒì¼ í¬ê¸°ë¥¼ ìœ„í•´ 200,000ì ë¯¸ë§Œìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì£¼ì„¸ìš”."></div>
  <div data-ws-string-key="alert_export_limited" data-ws-string-value="ì„ íƒí•œ ìŒì„±ì€ ìµœëŒ€ 6,000ìê¹Œì§€ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í…ìŠ¤íŠ¸ë¥¼ 6,000ì ì´í•˜ë¡œ ì¤„ì´ê±°ë‚˜ ê¸´ í…ìŠ¤íŠ¸ ë‚´ë³´ë‚´ê¸°ë¥¼ ì§€ì›í•˜ëŠ” ìŒì„±ìœ¼ë¡œ ì „í™˜í•˜ì„¸ìš”. ì§€ì›í•˜ëŠ” ìŒì„±ì€ ëª¨ë‘ í”„ë¦¬ë¯¸ì—„ì…ë‹ˆë‹¤. **NOAH, LILLY, OLIVIA ì œì™¸.**"></div>
  <div data-ws-string-key="alert_export_premium_voice" data-ws-string-value="ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì€ í”„ë¦¬ë¯¸ì—„ ìŒì„±ì—ë§Œ ì œê³µë©ë‹ˆë‹¤. ë³„í‘œ â­ê°€ ë¶™ì€ í”„ë¦¬ë¯¸ì—„ ìŒì„±ì„ ì„ íƒí•˜ê±°ë‚˜ 'RECORD â—‰' ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì„¸ìš”."></div>
  <div data-ws-string-key="alert_no_text_to_export" data-ws-string-value="í…ìŠ¤íŠ¸ ìƒìê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ì…ë ¥, ë¶™ì—¬ë„£ê¸° ë˜ëŠ” ì—…ë¡œë“œí•˜ì„¸ìš”."></div>
  <div data-ws-string-key="alert_paste_to_editor" data-ws-string-value="ê¸°ëŠ¥ì„ ì‘ë™ì‹œí‚¤ê³  ì‹¶ì€ ì—ë””í„° ìœ„ì¹˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></div>
  <div data-ws-string-key="alert_new_payment_received" data-ws-string-value="ê²°ì œê°€ ì ‘ìˆ˜ë˜ì–´ ê³„ì •ì— ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."></div>
  <div data-ws-string-key="alert_unknown_tts_error" data-ws-string-value="í…ìŠ¤íŠ¸ ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì¬ìƒì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”. ë¬¸ì œê°€ ì§€ì†ë˜ë©´ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ì„¸ìš”. ê³„ì† ë°œìƒí•˜ë©´ contact@ttsreader.com ìœ¼ë¡œ ì•Œë ¤ì£¼ì„¸ìš”."></div>
  <div data-ws-string-key="alert_remove_setters_to_export" data-ws-string-value="ë‚´ë³´ë‚´ê¸° ì „ì— í…ìŠ¤íŠ¸ì—ì„œ ìŒì„±/ì†ë„ ì„¤ì •ì„ ì œê±°í•˜ì„¸ìš”. ë‚´ë³´ë‚¸ MP3ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„¤ì •ì€ {{set:...}} í˜•ì‹ì…ë‹ˆë‹¤."></div>
  <div data-ws-string-key="app_js__processing_finished" data-ws-string-value="ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‚´ë³´ë‚´ê¸° ëª©ë¡ì„ í™•ì¸í•˜ì„¸ìš”. ë¬¸ì œê°€ ìˆìœ¼ë©´ contact@ttsreader.com ìœ¼ë¡œ ì—°ë½ì£¼ì„¸ìš”."></div>
  <div data-ws-string-key="app_js__invalid_url" data-ws-string-value="ìœ íš¨í•˜ì§€ ì•Šì€ URL"></div>
  <div data-ws-string-key="notification__no_text_title" data-ws-string-value=""></div>
  <div data-ws-string-key="notification__no_text_paragraph" data-ws-string-value=""></div>
</div>
<!-- end of JS STRINGS -->

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const findReplaceWidget = new FindReplaceWidget();

      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
          e.preventDefault();
          findReplaceWidget.show();
        }
      });

      const frIcon = document.getElementById('fr-icon');
      if (frIcon) {
        frIcon.addEventListener('click', () => {
          findReplaceWidget.toggle();
        });
      }

      // Import confety.js:
      /*let el = document.createElement('script');
      el.src = 'confety.js';
      document.head.appendChild(el);*/
    });
  </script>
</body>
</html>

